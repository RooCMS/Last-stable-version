CodeMirror.defineMode("smarty",function(a){var e={rightDelimiter:"}",leftDelimiter:"{",smartyVersion:2};if(a.hasOwnProperty("leftDelimiter")){e.leftDelimiter=a.leftDelimiter}if(a.hasOwnProperty("rightDelimiter")){e.rightDelimiter=a.rightDelimiter}if(a.hasOwnProperty("smartyVersion")&&a.smartyVersion===3){e.smartyVersion=3}var d=["debug","extends","function","include","literal"];var g;var c={operatorChars:/[+\-*&%=<>!?]/,validIdentifier:/[a-zA-Z0-9_]/,stringChar:/['"]/};var f={cont:function(i,h){g=h;return i},chain:function(i,h,j){h.tokenize=j;return j(i,h)}};var b={tokenizer:function(k,i){if(k.match(e.leftDelimiter,true)){if(k.eat("*")){return f.chain(k,i,b.inBlock("comment","*"+e.rightDelimiter))}else{i.depth++;var h=k.eol();var j=/\s/.test(k.peek());if(e.smartyVersion===3&&e.leftDelimiter==="{"&&(h||j)){i.depth--;return null}else{i.tokenize=b.smarty;g="startTag";return"tag"}}}else{k.next();return null}},smarty:function(o,m){if(o.match(e.rightDelimiter,true)){if(e.smartyVersion===3){m.depth--;if(m.depth<=0){m.tokenize=b.tokenizer}}else{m.tokenize=b.tokenizer}return f.cont("tag",null)}if(o.match(e.leftDelimiter,true)){m.depth++;return f.cont("tag","startTag")}var l=o.next();if(l=="$"){o.eatWhile(c.validIdentifier);return f.cont("variable-2","variable")}else{if(l=="|"){return f.cont("operator","pipe")}else{if(l=="."){return f.cont("operator","property")}else{if(c.stringChar.test(l)){m.tokenize=b.inAttribute(l);return f.cont("string","string")}else{if(c.operatorChars.test(l)){o.eatWhile(c.operatorChars);return f.cont("operator","operator")}else{if(l=="["||l=="]"){return f.cont("bracket","bracket")}else{if(l=="("||l==")"){return f.cont("bracket","operator")}else{if(/\d/.test(l)){o.eatWhile(/\d/);return f.cont("number","number")}else{if(m.last=="variable"){if(l=="@"){o.eatWhile(c.validIdentifier);return f.cont("property","property")}else{if(l=="|"){o.eatWhile(c.validIdentifier);return f.cont("qualifier","modifier")}}}else{if(m.last=="pipe"){o.eatWhile(c.validIdentifier);return f.cont("qualifier","modifier")}else{if(m.last=="whitespace"){o.eatWhile(c.validIdentifier);return f.cont("attribute","modifier")}}}if(m.last=="property"){o.eatWhile(c.validIdentifier);return f.cont("property",null)}else{if(/\s/.test(l)){g="whitespace";return null}}var n="";if(l!="/"){n+=l}var p=null;while(p=o.eat(c.validIdentifier)){n+=p}for(var k=0,h=d.length;k<h;k++){if(d[k]==n){return f.cont("keyword","keyword")}}if(/\s/.test(l)){return null}return f.cont("tag","tag")}}}}}}}}},inAttribute:function(h){return function(k,i){var l=null;var j=null;while(!k.eol()){j=k.peek();if(k.next()==h&&l!=="\\"){i.tokenize=b.smarty;break}l=j}return"string"}},inBlock:function(i,h){return function(k,j){while(!k.eol()){if(k.match(h)){j.tokenize=b.tokenizer;break}k.next()}return i}}};return{startState:function(){return{tokenize:b.tokenizer,mode:"smarty",last:null,depth:0}},token:function(j,i){var h=i.tokenize(j,i);i.last=g;return h},electricChars:""}});CodeMirror.defineMIME("text/x-smarty","smarty");