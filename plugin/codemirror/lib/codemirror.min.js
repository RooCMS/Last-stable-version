(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.CodeMirror=a())}(this,(function(){var ee=navigator.userAgent;var ep=navigator.platform;var cz=/gecko\/\d/i.test(ee);var e7=/MSIE \d/.test(ee);var bQ=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ee);var cN=/Edge\/(\d+)/.exec(ee);var dW=e7||bQ||cN;var l=dW&&(e7?document.documentMode||6:+(cN||bQ)[1]);var db=!cN&&/WebKit\//.test(ee);var dZ=db&&/Qt\/\d+\.\d+/.test(ee);var dq=!cN&&/Chrome\//.test(ee);var eg=/Opera\//.test(ee);var aD=/Apple Computer/.test(navigator.vendor);var di=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ee);var fR=/PhantomJS/.test(ee);var fp=!cN&&/AppleWebKit/.test(ee)&&/Mobile\/\w+/.test(ee);var ev=fp||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ee);var cf=fp||/Mac/.test(ep);var ga=/\bCrOS\b/.test(ee);var aQ=/win/i.test(ep);var a0=eg&&ee.match(/Version\/(\d*\.\d*)/);if(a0){a0=Number(a0[1])}if(a0&&a0>=15){eg=false;db=true}var bX=cf&&(dZ||eg&&(a0==null||a0<12.11));var gG=cz||(dW&&l>=9);function S(i){return new RegExp("(^|\\s)"+i+"(?:$|\\s)\\s*")}var h=function(gR,i){var gS=gR.className;var gQ=S(i).exec(gS);if(gQ){var gT=gS.slice(gQ.index+gQ[0].length);gR.className=gS.slice(0,gQ.index)+(gT?gQ[1]+gT:"")}};function ef(gQ){for(var i=gQ.childNodes.length;i>0;--i){gQ.removeChild(gQ.firstChild)}return gQ}function bZ(i,gQ){return ef(i).appendChild(gQ)}function gz(gQ,gU,gT,gS){var gV=document.createElement(gQ);if(gT){gV.className=gT}if(gS){gV.style.cssText=gS}if(typeof gU=="string"){gV.appendChild(document.createTextNode(gU))}else{if(gU){for(var gR=0;gR<gU.length;++gR){gV.appendChild(gU[gR])}}}return gV}var cw;if(document.createRange){cw=function(gS,gT,gQ,i){var gR=document.createRange();gR.setEnd(i||gS,gQ);gR.setStart(gS,gT);return gR}}else{cw=function(gR,gT,i){var gQ=document.body.createTextRange();try{gQ.moveToElementText(gR.parentNode)}catch(gS){return gQ}gQ.collapse(true);gQ.moveEnd("character",i);gQ.moveStart("character",gT);return gQ}}function gH(i,gQ){if(gQ.nodeType==3){gQ=gQ.parentNode}if(i.contains){return i.contains(gQ)}do{if(gQ.nodeType==11){gQ=gQ.host}if(gQ==i){return true}}while(gQ=gQ.parentNode)}function d0(){var i;try{i=document.activeElement}catch(gQ){i=document.body||null}while(i&&i.root&&i.root.activeElement){i=i.root.activeElement}return i}function f0(gQ,i){var gR=gQ.className;if(!S(i).test(gR)){gQ.className+=(gR?" ":"")+i}}function gp(gS,gQ){var gR=gS.split(" ");for(var gT=0;gT<gR.length;gT++){if(gR[gT]&&!S(gR[gT]).test(gQ)){gQ+=" "+gR[gT]}}return gQ}var dX=function(i){i.select()};if(fp){dX=function(i){i.selectionStart=0;i.selectionEnd=i.value.length}}else{if(dW){dX=function(gQ){try{gQ.select()}catch(i){}}}}function cG(gQ){var i=Array.prototype.slice.call(arguments,1);return function(){return gQ.apply(null,i)}}function aO(gR,gQ,i){if(!gQ){gQ={}}for(var gS in gR){if(gR.hasOwnProperty(gS)&&(i!==false||!gQ.hasOwnProperty(gS))){gQ[gS]=gR[gS]}}return gQ}function bY(gT,gR,gV,gW,gS){if(gR==null){gR=gT.search(/[^\s\u00a0]/);if(gR==-1){gR=gT.length}}for(var gU=gW||0,gX=gS||0;;){var gQ=gT.indexOf("\t",gU);if(gQ<0||gQ>=gR){return gX+(gR-gU)}gX+=gQ-gU;gX+=gV-(gX%gV);gU=gQ+1}}var gP=function(){this.id=null};gP.prototype.set=function(i,gQ){clearTimeout(this.id);this.id=setTimeout(gQ,i)};function dw(gS,gQ){for(var gR=0;gR<gS.length;++gR){if(gS[gR]==gQ){return gR}}return -1}var dV=30;var ck={toString:function(){return"CodeMirror.Pass"}};var aa={scroll:false};var M={origin:"*mouse"};var c7={origin:"+move"};function eH(gT,gS,gU){for(var gV=0,gR=0;;){var gQ=gT.indexOf("\t",gV);if(gQ==-1){gQ=gT.length}var i=gQ-gV;if(gQ==gT.length||gR+i>=gS){return gV+Math.min(i,gS-gR)}gR+=gQ-gV;gR+=gU-(gR%gU);gV=gQ+1;if(gR>=gS){return gV}}}var a1=[""];function cA(i){while(a1.length<=i){a1.push(f6(a1)+" ")}return a1[i]}function f6(i){return i[i.length-1]}function b0(gT,gS){var gQ=[];for(var gR=0;gR<gT.length;gR++){gQ[gR]=gS(gT[gR],gR)}return gQ}function ci(gT,gQ,gR){var gS=0,i=gR(gQ);while(gS<gT.length&&gR(gT[gS])<=i){gS++}gT.splice(gS,0,gQ)}function gq(){}function cu(gR,i){var gQ;if(Object.create){gQ=Object.create(gR)}else{gq.prototype=gR;gQ=new gq()}if(i){aO(i,gQ)}return gQ}var bd=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function f3(i){return/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||bd.test(i))}function cL(i,gQ){if(!gQ){return f3(i)}if(gQ.source.indexOf("\\w")>-1&&f3(i)){return true}return gQ.test(i)}function fi(i){for(var gQ in i){if(i.hasOwnProperty(gQ)&&i[gQ]){return false}}return true}var e6=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function fM(i){return i.charCodeAt(0)>=768&&e6.test(i)}function ez(gQ,gR,i){while((i<0?gR>0:gR<gQ.length)&&fM(gQ.charAt(gR))){gR+=i}return gR}function cx(i,gS,gR){for(;;){if(Math.abs(gS-gR)<=1){return i(gS)?gS:gR}var gQ=Math.floor((gS+gR)/2);if(i(gQ)){gR=gQ}else{gS=gQ}}}function e4(i,gR,gQ){var gS=this;this.input=gQ;gS.scrollbarFiller=gz("div",null,"CodeMirror-scrollbar-filler");gS.scrollbarFiller.setAttribute("cm-not-content","true");gS.gutterFiller=gz("div",null,"CodeMirror-gutter-filler");gS.gutterFiller.setAttribute("cm-not-content","true");gS.lineDiv=gz("div",null,"CodeMirror-code");gS.selectionDiv=gz("div",null,null,"position: relative; z-index: 1");gS.cursorDiv=gz("div",null,"CodeMirror-cursors");gS.measure=gz("div",null,"CodeMirror-measure");gS.lineMeasure=gz("div",null,"CodeMirror-measure");gS.lineSpace=gz("div",[gS.measure,gS.lineMeasure,gS.selectionDiv,gS.cursorDiv,gS.lineDiv],null,"position: relative; outline: none");gS.mover=gz("div",[gz("div",[gS.lineSpace],"CodeMirror-lines")],null,"position: relative");gS.sizer=gz("div",[gS.mover],"CodeMirror-sizer");gS.sizerWidth=null;gS.heightForcer=gz("div",null,null,"position: absolute; height: "+dV+"px; width: 1px;");gS.gutters=gz("div",null,"CodeMirror-gutters");gS.lineGutter=null;gS.scroller=gz("div",[gS.sizer,gS.heightForcer,gS.gutters],"CodeMirror-scroll");gS.scroller.setAttribute("tabIndex","-1");gS.wrapper=gz("div",[gS.scrollbarFiller,gS.gutterFiller,gS.scroller],"CodeMirror");if(dW&&l<8){gS.gutters.style.zIndex=-1;gS.scroller.style.paddingRight=0}if(!db&&!(cz&&ev)){gS.scroller.draggable=true}if(i){if(i.appendChild){i.appendChild(gS.wrapper)}else{i(gS.wrapper)}}gS.viewFrom=gS.viewTo=gR.first;gS.reportedViewFrom=gS.reportedViewTo=gR.first;gS.view=[];gS.renderedView=null;gS.externalMeasured=null;gS.viewOffset=0;gS.lastWrapHeight=gS.lastWrapWidth=0;gS.updateLineNumbers=null;gS.nativeBarWidth=gS.barHeight=gS.barWidth=0;gS.scrollbarsClipped=false;gS.lineNumWidth=gS.lineNumInnerWidth=gS.lineNumChars=null;gS.alignWidgets=false;gS.cachedCharWidth=gS.cachedTextHeight=gS.cachedPaddingH=null;gS.maxLine=null;gS.maxLineLength=0;gS.maxLineChanged=false;gS.wheelDX=gS.wheelDY=gS.wheelStartX=gS.wheelStartY=null;gS.shift=false;gS.selForContextMenu=null;gS.activeTouch=null;gQ.init(gS)}function fD(gT,gV){gV-=gT.first;if(gV<0||gV>=gT.size){throw new Error("There is no line "+(gV+gT.first)+" in the document.")}var gQ=gT;while(!gQ.lines){for(var gR=0;;++gR){var gU=gQ.children[gR],gS=gU.chunkSize();if(gV<gS){gQ=gU;break}gV-=gS}}return gQ.lines[gV]}function gA(gR,gT,i){var gQ=[],gS=gT.line;gR.iter(gT.line,i.line+1,function(gU){var gV=gU.text;if(gS==i.line){gV=gV.slice(0,i.ch)}if(gS==gT.line){gV=gV.slice(gT.ch)}gQ.push(gV);++gS});return gQ}function a3(gQ,gS,gR){var i=[];gQ.iter(gS,gR,function(gT){i.push(gT.text)});return i}function gD(gQ,i){var gR=i-gQ.height;if(gR){for(var gS=gQ;gS;gS=gS.parent){gS.height+=gR}}}function bU(gQ){if(gQ.parent==null){return null}var gU=gQ.parent,gT=dw(gU.lines,gQ);for(var gR=gU.parent;gR;gU=gR,gR=gR.parent){for(var gS=0;;++gS){if(gR.children[gS]==gU){break}gT+=gR.children[gS].chunkSize()}}return gT+gU.first}function bO(gW,gV){var gT=gW.first;outer:do{for(var gS=0;gS<gW.children.length;++gS){var gR=gW.children[gS],gQ=gR.height;if(gV<gQ){gW=gR;continue outer}gV-=gQ;gT+=gR.chunkSize()}return gT}while(!gW.lines);var gU=0;for(;gU<gW.lines.length;++gU){var gY=gW.lines[gU],gX=gY.height;if(gV<gX){break}gV-=gX}return gT+gU}function ch(gQ,i){return i>=gQ.first&&i<gQ.first+gQ.size}function eK(gQ,gR){return String(gQ.lineNumberFormatter(gR+gQ.firstLineNumber))}function W(i,gQ,gR){if(gR===void 0){gR=null}if(!(this instanceof W)){return new W(i,gQ,gR)}this.line=i;this.ch=gQ;this.sticky=gR}function co(gQ,i){return gQ.line-i.line||gQ.ch-i.ch}function X(gQ,i){return gQ.sticky==i.sticky&&co(gQ,i)==0}function cr(i){return W(i.line,i.ch)}function bE(gQ,i){return co(gQ,i)<0?i:gQ}function ar(gQ,i){return co(gQ,i)<0?gQ:i}function dg(i,gQ){return Math.max(i.first,Math.min(gQ,i.first+i.size-1))}function gb(gQ,gR){if(gR.line<gQ.first){return W(gQ.first,0)}var i=gQ.first+gQ.size-1;if(gR.line>i){return W(i,fD(gQ,i).text.length)}return fP(gR,fD(gQ,gR.line).text.length)}function fP(gR,gQ){var i=gR.ch;if(i==null||i>gQ){return W(gR.line,gQ)}else{if(i<0){return W(gR.line,0)}else{return gR}}}function ed(gS,gT){var gQ=[];for(var gR=0;gR<gT.length;gR++){gQ[gR]=gb(gS,gT[gR])}return gQ}var gK=false;var a8=false;function fY(){gK=true}function bD(){a8=true}function ey(i,gR,gQ){this.marker=i;this.from=gR;this.to=gQ}function fy(gS,gQ){if(gS){for(var gR=0;gR<gS.length;++gR){var gT=gS[gR];if(gT.marker==gQ){return gT}}}}function e3(gR,gS){var gT;for(var gQ=0;gQ<gR.length;++gQ){if(gR[gQ]!=gS){(gT||(gT=[])).push(gR[gQ])}}return gT}function cm(i,gQ){i.markedSpans=i.markedSpans?i.markedSpans.concat([gQ]):[gQ];gQ.marker.attachLine(i)}function aR(gR,gS,gW){var gX;if(gR){for(var gU=0;gU<gR.length;++gU){var gY=gR[gU],gV=gY.marker;var gQ=gY.from==null||(gV.inclusiveLeft?gY.from<=gS:gY.from<gS);if(gQ||gY.from==gS&&gV.type=="bookmark"&&(!gW||!gY.marker.insertLeft)){var gT=gY.to==null||(gV.inclusiveRight?gY.to>=gS:gY.to>gS);(gX||(gX=[])).push(new ey(gV,gY.from,gT?null:gY.to))}}}return gX}function aC(gR,gT,gW){var gX;if(gR){for(var gU=0;gU<gR.length;++gU){var gY=gR[gU],gV=gY.marker;var gS=gY.to==null||(gV.inclusiveRight?gY.to>=gT:gY.to>gT);if(gS||gY.from==gT&&gV.type=="bookmark"&&(!gW||gY.marker.insertLeft)){var gQ=gY.from==null||(gV.inclusiveLeft?gY.from<=gT:gY.from<gT);(gX||(gX=[])).push(new ey(gV,gQ?null:gY.from-gT,gY.to==null?null:gY.to-gT))}}}return gX}function eA(hb,g1){if(g1.full){return null}var gS=ch(hb,g1.from.line)&&fD(hb,g1.from.line).markedSpans;var gZ=ch(hb,g1.to.line)&&fD(hb,g1.to.line).markedSpans;if(!gS&&!gZ){return null}var gY=g1.from.ch,g6=g1.to.ch,g3=co(g1.from,g1.to)==0;var gX=aR(gS,gY,g3);var g0=aC(gZ,g6,g3);var g4=g1.text.length==1,gV=f6(g1.text).length+(g4?gY:0);if(gX){for(var g9=0;g9<gX.length;++g9){var g8=gX[g9];if(g8.to==null){var g2=fy(g0,g8.marker);if(!g2){g8.to=gY}else{if(g4){g8.to=g2.to==null?null:g2.to+gV}}}}}if(g0){for(var gW=0;gW<g0.length;++gW){var g7=g0[gW];if(g7.to!=null){g7.to+=gV}if(g7.from==null){var gR=fy(gX,g7.marker);if(!gR){g7.from=gV;if(g4){(gX||(gX=[])).push(g7)}}}else{g7.from+=gV;if(g4){(gX||(gX=[])).push(g7)}}}}if(gX){gX=r(gX)}if(g0&&g0!=gX){g0=r(g0)}var ha=[gX];if(!g4){var g5=g1.text.length-2,gQ;if(g5>0&&gX){for(var gU=0;gU<gX.length;++gU){if(gX[gU].to==null){(gQ||(gQ=[])).push(new ey(gX[gU].marker,null,null))}}}for(var gT=0;gT<g5;++gT){ha.push(gQ)}ha.push(g0)}return ha}function r(gR){for(var gQ=0;gQ<gR.length;++gQ){var gS=gR[gQ];if(gS.from!=null&&gS.from==gS.to&&gS.marker.clearWhenEmpty!==false){gR.splice(gQ--,1)}}if(!gR.length){return null}return gR}function cT(g2,g0,g1){var gU=null;g2.iter(g0.line,g1.line+1,function(g3){if(g3.markedSpans){for(var g4=0;g4<g3.markedSpans.length;++g4){var g5=g3.markedSpans[g4].marker;if(g5.readOnly&&(!gU||dw(gU,g5)==-1)){(gU||(gU=[])).push(g5)}}}});if(!gU){return null}var gV=[{from:g0,to:g1}];for(var gW=0;gW<gU.length;++gW){var gX=gU[gW],gS=gX.find(0);for(var gT=0;gT<gV.length;++gT){var gR=gV[gT];if(co(gR.to,gS.from)<0||co(gR.from,gS.to)>0){continue}var gZ=[gT,1],gQ=co(gR.from,gS.from),gY=co(gR.to,gS.to);if(gQ<0||!gX.inclusiveLeft&&!gQ){gZ.push({from:gR.from,to:gS.from})}if(gY>0||!gX.inclusiveRight&&!gY){gZ.push({from:gS.to,to:gR.to})}gV.splice.apply(gV,gZ);gT+=gZ.length-3}}return gV}function gF(gQ){var gS=gQ.markedSpans;if(!gS){return}for(var gR=0;gR<gS.length;++gR){gS[gR].marker.detachLine(gQ)}gQ.markedSpans=null}function de(gQ,gS){if(!gS){return}for(var gR=0;gR<gS.length;++gR){gS[gR].marker.attachLine(gQ)}gQ.markedSpans=gS}function v(i){return i.inclusiveLeft?-1:0}function b3(i){return i.inclusiveRight?1:0}function d4(gS,gQ){var gU=gS.lines.length-gQ.lines.length;if(gU!=0){return gU}var gR=gS.find(),gV=gQ.find();var i=co(gR.from,gV.from)||v(gS)-v(gQ);if(i){return -i}var gT=co(gR.to,gV.to)||b3(gS)-b3(gQ);if(gT){return gT}return gQ.id-gS.id}function a7(gR,gV){var gQ=a8&&gR.markedSpans,gU;if(gQ){for(var gT=(void 0),gS=0;gS<gQ.length;++gS){gT=gQ[gS];if(gT.marker.collapsed&&(gV?gT.from:gT.to)==null&&(!gU||d4(gU,gT.marker)<0)){gU=gT.marker}}}return gU}function fc(i){return a7(i,true)}function eO(i){return a7(i,false)}function z(gY,gS,gW,gX,gU){var g1=fD(gY,gS);var gQ=a8&&g1.markedSpans;if(gQ){for(var gT=0;gT<gQ.length;++gT){var gR=gQ[gT];if(!gR.marker.collapsed){continue}var g0=gR.marker.find(0);var gZ=co(g0.from,gW)||v(gR.marker)-v(gU);var gV=co(g0.to,gX)||b3(gR.marker)-b3(gU);if(gZ>=0&&gV<=0||gZ<=0&&gV>=0){continue}if(gZ<=0&&(gR.marker.inclusiveRight&&gU.inclusiveLeft?co(g0.to,gW)>=0:co(g0.to,gW)>0)||gZ>=0&&(gR.marker.inclusiveRight&&gU.inclusiveLeft?co(g0.from,gX)<=0:co(g0.from,gX)<0)){return true}}}}function y(gQ){var i;while(i=fc(gQ)){gQ=i.find(-1,true).line}return gQ}function ct(gQ){var i;while(i=eO(gQ)){gQ=i.find(1,true).line}return gQ}function g(gR){var i,gQ;while(i=eO(gR)){gR=i.find(1,true).line;(gQ||(gQ=[])).push(gR)}return gQ}function aX(gS,gQ){var i=fD(gS,gQ),gR=y(i);if(i==gR){return gQ}return bU(gR)}function eh(gS,gR){if(gR>gS.lastLine()){return gR}var gQ=fD(gS,gR),i;if(!fT(gS,gQ)){return gR}while(i=eO(gQ)){gQ=i.find(1,true).line}return bU(gQ)+1}function fT(gU,gR){var gQ=a8&&gR.markedSpans;if(gQ){for(var gT=(void 0),gS=0;gS<gQ.length;++gS){gT=gQ[gS];if(!gT.marker.collapsed){continue}if(gT.from==null){return true}if(gT.marker.widgetNode){continue}if(gT.from==0&&gT.marker.inclusiveLeft&&T(gU,gR,gT)){return true}}}}function T(gV,gR,gT){if(gT.to==null){var gQ=gT.marker.find(1,true);return T(gV,gQ.line,fy(gQ.line.markedSpans,gT.marker))}if(gT.marker.inclusiveRight&&gT.to==gR.text.length){return true}for(var gU=(void 0),gS=0;gS<gR.markedSpans.length;++gS){gU=gR.markedSpans[gS];if(gU.marker.collapsed&&!gU.marker.widgetNode&&gU.from==gT.to&&(gU.to==null||gU.to!=gT.from)&&(gU.marker.inclusiveLeft||gT.marker.inclusiveRight)&&T(gV,gR,gU)){return true}}}function bT(gS){gS=y(gS);var gU=0,gR=gS.parent;for(var gT=0;gT<gR.lines.length;++gT){var gQ=gR.lines[gT];if(gQ==gS){break}else{gU+=gQ.height}}for(var gV=gR.parent;gV;gR=gV,gV=gR.parent){for(var gX=0;gX<gV.children.length;++gX){var gW=gV.children[gX];if(gW==gR){break}else{gU+=gW.height}}}return gU}function eD(gR){if(gR.height==0){return 0}var gQ=gR.text.length,i,gU=gR;while(i=fc(gU)){var gS=i.find(0,true);gU=gS.from.line;gQ+=gS.from.ch-gS.to.ch}gU=gR;while(i=eO(gU)){var gT=i.find(0,true);gQ-=gU.text.length-gT.from.ch;gU=gT.to.line;gQ+=gU.text.length-gT.to.ch}return gQ}function f(i){var gR=i.display,gQ=i.doc;gR.maxLine=fD(gQ,gQ.first);gR.maxLineLength=eD(gR.maxLine);gR.maxLineChanged=true;gQ.iter(function(gT){var gS=eD(gT);if(gS>gR.maxLineLength){gR.maxLineLength=gS;gR.maxLine=gT}})}function ei(gQ,gW,gV,gU){if(!gQ){return gU(gW,gV,"ltr")}var gT=false;for(var gS=0;gS<gQ.length;++gS){var gR=gQ[gS];if(gR.from<gV&&gR.to>gW||gW==gV&&gR.to==gW){gU(Math.max(gR.from,gW),Math.min(gR.to,gV),gR.level==1?"rtl":"ltr");gT=true}}if(!gT){gU(gW,gV,"ltr")}}var fr=null;function aI(gQ,gS,gU){var gT;fr=null;for(var gR=0;gR<gQ.length;++gR){var gV=gQ[gR];if(gV.from<gS&&gV.to>gS){return gR}if(gV.to==gS){if(gV.from!=gV.to&&gU=="before"){gT=gR}else{fr=gR}}if(gV.from==gS){if(gV.from!=gV.to&&gU!="before"){gT=gR}else{fr=gR}}}return gT!=null?gT:fr}var bj=(function(){var gV="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var gT="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function gS(gZ){if(gZ<=247){return gV.charAt(gZ)}else{if(1424<=gZ&&gZ<=1524){return"R"}else{if(1536<=gZ&&gZ<=1785){return gT.charAt(gZ-1536)}else{if(1774<=gZ&&gZ<=2220){return"r"}else{if(8192<=gZ&&gZ<=8203){return"w"}else{if(gZ==8204){return"b"}else{return"L"}}}}}}}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var gY=/[stwN]/,gR=/[LRr]/,gQ=/[Lb1n]/,gU=/[1n]/;var gX="L";function gW(g1,g0,gZ){this.level=g1;this.from=g0;this.to=gZ}return function(hn){if(!i.test(hn)){return false}var hu=hn.length,he=[];for(var hs=0;hs<hu;++hs){he.push(gS(hn.charCodeAt(hs)))}for(var hc=0,hi=gX;hc<hu;++hc){var g3=he[hc];if(g3=="m"){he[hc]=hi}else{hi=g3}}for(var ha=0,g1=gX;ha<hu;++ha){var ho=he[ha];if(ho=="1"&&g1=="r"){he[ha]="n"}else{if(gR.test(ho)){g1=ho;if(ho=="r"){he[ha]="R"}}}}for(var g9=1,hj=he[0];g9<hu-1;++g9){var hl=he[g9];if(hl=="+"&&hj=="1"&&he[g9+1]=="1"){he[g9]="1"}else{if(hl==","&&hj==he[g9+1]&&(hj=="1"||hj=="n")){he[g9]=hj}}hj=hl}for(var g8=0;g8<hu;++g8){var hk=he[g8];if(hk==","){he[g8]="N"}else{if(hk=="%"){var g4=(void 0);for(g4=g8+1;g4<hu&&he[g4]=="%";++g4){}var hx=(g8&&he[g8-1]=="!")||(g4<hu&&he[g4]=="1")?"1":"N";for(var hr=g8;hr<g4;++hr){he[hr]=hx}g8=g4-1}}}for(var g5=0,ht=gX;g5<hu;++g5){var hh=he[g5];if(ht=="L"&&hh=="1"){he[g5]="L"}else{if(gR.test(hh)){ht=hh}}}for(var g2=0;g2<hu;++g2){if(gY.test(he[g2])){var g7=(void 0);for(g7=g2+1;g7<hu&&gY.test(he[g7]);++g7){}var hf=(g2?he[g2-1]:gX)=="L";var g0=(g7<hu?he[g7]:gX)=="L";var hd=hf||g0?"L":"R";for(var hw=g2;hw<g7;++hw){he[hw]=hd}g2=g7-1}}var hq=[],hm;for(var gZ=0;gZ<hu;){if(gQ.test(he[gZ])){var g6=gZ;for(++gZ;gZ<hu&&gQ.test(he[gZ]);++gZ){}hq.push(new gW(0,g6,gZ))}else{var hb=gZ,hg=hq.length;for(++gZ;gZ<hu&&he[gZ]!="L";++gZ){}for(var hv=hb;hv<gZ;){if(gU.test(he[hv])){if(hb<hv){hq.splice(hg,0,new gW(1,hb,hv))}var hp=hv;for(++hv;hv<gZ&&gU.test(he[hv]);++hv){}hq.splice(hg,0,new gW(2,hp,hv));hb=hv}else{++hv}}if(hb<gZ){hq.splice(hg,0,new gW(1,hb,gZ))}}}if(hq[0].level==1&&(hm=hn.match(/^\s+/))){hq[0].from=hm[0].length;hq.unshift(new gW(0,0,hm[0].length))}if(f6(hq).level==1&&(hm=hn.match(/\s+$/))){f6(hq).to-=hm[0].length;hq.push(new gW(0,hu-hm[0].length,hu))}return hq}})();function a(gQ){var i=gQ.order;if(i==null){i=gQ.order=bj(gQ.text)}return i}function bv(i,gR,gQ){var gS=ez(i.text,gR+gQ,gQ);return gS<0||gS>i.text.length?null:gS}function aj(i,gS,gQ){var gR=bv(i,gS.ch,gQ);return gR==null?null:new W(gS.line,gR,gQ<0?"after":"before")}function eT(gQ,gY,gV,gU,gS){if(gQ){var gT=a(gV);if(gT){var gR=gS<0?f6(gT):gT[0];var g0=(gS<0)==(gR.level==1);var gX=g0?"after":"before";var i;if(gR.level>0){var gW=a6(gY,gV);i=gS<0?gV.text.length-1:0;var gZ=C(gY,gW,i).top;i=cx(function(g1){return C(gY,gW,g1).top==gZ},(gS<0)==(gR.level==1)?gR.from:gR.to-1,i);if(gX=="before"){i=bv(gV,i,1,true)}}else{i=gS<0?gR.to:gR.from}return new W(gU,i,gX)}}return new W(gU,gS<0?gV.text.length:0,gS<0?"before":"after")}function u(g0,g4,gT,gW){var g2=a(g4);if(!g2){return aj(g4,gT,gW)}if(gT.ch>=g4.text.length){gT.ch=g4.text.length;gT.sticky="before"}else{if(gT.ch<=0){gT.ch=0;gT.sticky="after"}}var gS=aI(g2,gT.ch,gT.sticky),gU=g2[gS];if(gU.level%2==0&&(gW>0?gU.to>gT.ch:gU.from<gT.ch)){return aj(g4,gT,gW)}var g3=function(g6,g5){return bv(g4,g6 instanceof W?g6.ch:g6,g5)};var gX;var g1=function(g5){if(!g0.options.lineWrapping){return{begin:0,end:g4.text.length}}gX=gX||a6(g0,g4);return bp(g0,g4,gX,g5)};var gV=g1(gT.sticky=="before"?g3(gT,-1):gT.ch);if(gU.level%2==1){var gQ=g3(gT,-gW);if(gQ!=null&&(gW>0?gQ>=gU.from&&gQ>=gV.begin:gQ<=gU.to&&gQ<=gV.end)){var gZ=gW<0?"before":"after";return new W(gT.line,gQ,gZ)}}var gR=function(g5,g8,hb){var g7=function(hd,hc){return hc?new W(gT.line,g3(hd,1),"before"):new W(gT.line,hd,"after")};for(;g5>=0&&g5<g2.length;g5+=g8){var g6=g2[g5];var g9=(g8>0)==(g6.level!=1);var ha=g9?hb.begin:g3(hb.end,-1);if(g6.from<=ha&&ha<g6.to){return g7(ha,g9)}ha=g9?g6.from:g3(g6.to,-1);if(hb.begin<=ha&&ha<hb.end){return g7(ha,g9)}}};var gY=gR(gS+gW,gW,gV);if(gY){return gY}var i=gW>0?gV.end:g3(gV.begin,-1);if(i!=null&&!(gW>0&&i==g4.text.length)){gY=gR(gW>0?0:g2.length-1,gW,g1(i));if(gY){return gY}}return null}var fu=[];var b4=function(gR,i,gQ){if(gR.addEventListener){gR.addEventListener(i,gQ,false)}else{if(gR.attachEvent){gR.attachEvent("on"+i,gQ)}else{var gS=gR._handlers||(gR._handlers={});gS[i]=(gS[i]||fu).concat(gQ)}}};function eB(gQ,i){return gQ._handlers&&gQ._handlers[i]||fu}function eu(gT,gR,gS){if(gT.removeEventListener){gT.removeEventListener(gR,gS,false)}else{if(gT.detachEvent){gT.detachEvent("on"+gR,gS)}else{var gU=gT._handlers,i=gU&&gU[gR];if(i){var gQ=dw(i,gS);if(gQ>-1){gU[gR]=i.slice(0,gQ).concat(i.slice(gQ+1))}}}}}function aF(gU,gT){var gQ=eB(gU,gT);if(!gQ.length){return}var gR=Array.prototype.slice.call(arguments,2);for(var gS=0;gS<gQ.length;++gS){gQ[gS].apply(null,gR)}}function aS(i,gR,gQ){if(typeof gR=="string"){gR={type:gR,preventDefault:function(){this.defaultPrevented=true}}}aF(i,gQ||gR.type,i,gR);return bS(gR)||gR.codemirrorIgnore}function V(gR){var gQ=gR._handlers&&gR._handlers.cursorActivity;if(!gQ){return}var gT=gR.curOp.cursorActivityHandlers||(gR.curOp.cursorActivityHandlers=[]);for(var gS=0;gS<gQ.length;++gS){if(dw(gT,gQ[gS])==-1){gT.push(gQ[gS])}}}function fI(gQ,i){return eB(gQ,i).length>0}function bG(i){i.prototype.on=function(gQ,gR){b4(this,gQ,gR)};i.prototype.off=function(gQ,gR){eu(this,gQ,gR)}}function cR(i){if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}}function dD(i){if(i.stopPropagation){i.stopPropagation()}else{i.cancelBubble=true}}function bS(i){return i.defaultPrevented!=null?i.defaultPrevented:i.returnValue==false}function eI(i){cR(i);dD(i)}function L(i){return i.target||i.srcElement}function gg(gQ){var i=gQ.which;if(i==null){if(gQ.button&1){i=1}else{if(gQ.button&2){i=3}else{if(gQ.button&4){i=2}}}}if(cf&&gQ.ctrlKey&&i==1){i=3}return i}var e8=function(){if(dW&&l<9){return false}var i=gz("div");return"draggable" in i||"dragDrop" in i}();var ge;function bs(i){if(ge==null){var gR=gz("span","\u200b");bZ(i,gz("span",[gR,document.createTextNode("x")]));if(i.firstChild.offsetHeight!=0){ge=gR.offsetWidth<=1&&gR.offsetHeight>2&&!(dW&&l<8)}}var gQ=ge?gz("span","\u200b"):gz("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");gQ.setAttribute("cm-text","");return gQ}var gf;function bV(gS){if(gf!=null){return gf}var i=bZ(gS,document.createTextNode("A\u062eA"));var gR=cw(i,0,1).getBoundingClientRect();var gQ=cw(i,1,2).getBoundingClientRect();ef(gS);if(!gR||gR.left==gR.right){return false}return gf=(gQ.right-gR.right<3)}var gl="\n\nb".split(/\n/).length!=3?function(gU){var gV=0,i=[],gT=gU.length;while(gV<=gT){var gS=gU.indexOf("\n",gV);if(gS==-1){gS=gU.length}var gR=gU.slice(gV,gU.charAt(gS-1)=="\r"?gS-1:gS);var gQ=gR.indexOf("\r");if(gQ!=-1){i.push(gR.slice(0,gQ));gV+=gQ+1}else{i.push(gR);gV=gS+1}}return i}:function(i){return i.split(/\r\n?|\n/)};var by=window.getSelection?function(gQ){try{return gQ.selectionStart!=gQ.selectionEnd}catch(i){return false}}:function(gR){var i;try{i=gR.ownerDocument.selection.createRange()}catch(gQ){}if(!i||i.parentElement()!=gR){return false}return i.compareEndPoints("StartToEnd",i)!=0};var dm=(function(){var i=gz("div");if("oncopy" in i){return true}i.setAttribute("oncopy","return;");return typeof i.oncopy=="function"})();var fv=null;function aM(gQ){if(fv!=null){return fv}var gR=bZ(gQ,gz("span","x"));var gS=gR.getBoundingClientRect();var i=cw(gR,0,1).getBoundingClientRect();return fv=Math.abs(gS.left-i.left)>1}var dF={};var aT={};function eL(i,gQ){if(arguments.length>2){gQ.dependencies=Array.prototype.slice.call(arguments,2)}dF[i]=gQ}function br(gQ,i){aT[gQ]=i}function gI(i){if(typeof i=="string"&&aT.hasOwnProperty(i)){i=aT[i]}else{if(i&&typeof i.name=="string"&&aT.hasOwnProperty(i.name)){var gQ=aT[i.name];if(typeof gQ=="string"){gQ={name:gQ}}i=cu(gQ,i);i.name=gQ.name}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(i)){return gI("application/xml")}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(i)){return gI("application/json")}}}}if(typeof i=="string"){return{name:i}}else{return i||{name:"null"}}}function fZ(gR,gQ){gQ=gI(gQ);var gT=dF[gQ.name];if(!gT){return fZ(gR,"text/plain")}var gU=gT(gR,gQ);if(dC.hasOwnProperty(gQ.name)){var gS=dC[gQ.name];for(var gV in gS){if(!gS.hasOwnProperty(gV)){continue}if(gU.hasOwnProperty(gV)){gU["_"+gV]=gU[gV]}gU[gV]=gS[gV]}}gU.name=gQ.name;if(gQ.helperType){gU.helperType=gQ.helperType}if(gQ.modeProps){for(var i in gQ.modeProps){gU[i]=gQ.modeProps[i]}}return gU}var dC={};function eY(gR,gQ){var i=dC.hasOwnProperty(gR)?dC[gR]:(dC[gR]={});aO(gQ,i)}function cb(gS,i){if(i===true){return i}if(gS.copyState){return gS.copyState(i)}var gR={};for(var gT in i){var gQ=i[gT];if(gQ instanceof Array){gQ=gQ.concat([])}gR[gT]=gQ}return gR}function gE(gR,i){var gQ;while(gR.innerMode){gQ=gR.innerMode(i);if(!gQ||gQ.mode==gR){break}i=gQ.state;gR=gQ.mode}return gQ||{mode:gR,state:i}}function b8(gR,gQ,i){return gR.startState?gR.startState(gQ,i):true}var fh=function(i,gQ){this.pos=this.start=0;this.string=i;this.tabSize=gQ||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};fh.prototype.eol=function(){return this.pos>=this.string.length};fh.prototype.sol=function(){return this.pos==this.lineStart};fh.prototype.peek=function(){return this.string.charAt(this.pos)||undefined};fh.prototype.next=function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}};fh.prototype.eat=function(i){var gR=this.string.charAt(this.pos);var gQ;if(typeof i=="string"){gQ=gR==i}else{gQ=gR&&(i.test?i.test(gR):i(gR))}if(gQ){++this.pos;return gR}};fh.prototype.eatWhile=function(i){var gQ=this.pos;while(this.eat(i)){}return this.pos>gQ};fh.prototype.eatSpace=function(){var gQ=this;var i=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++gQ.pos}return this.pos>i};fh.prototype.skipToEnd=function(){this.pos=this.string.length};fh.prototype.skipTo=function(i){var gQ=this.string.indexOf(i,this.pos);if(gQ>-1){this.pos=gQ;return true}};fh.prototype.backUp=function(i){this.pos-=i};fh.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=bY(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?bY(this.string,this.lineStart,this.tabSize):0)};fh.prototype.indentation=function(){return bY(this.string,null,this.tabSize)-(this.lineStart?bY(this.string,this.lineStart,this.tabSize):0)};fh.prototype.match=function(gT,gQ,i){if(typeof gT=="string"){var gU=function(gV){return i?gV.toLowerCase():gV};var gS=this.string.substr(this.pos,gT.length);if(gU(gS)==gU(gT)){if(gQ!==false){this.pos+=gT.length}return true}}else{var gR=this.string.slice(this.pos).match(gT);if(gR&&gR.index>0){return null}if(gR&&gQ!==false){this.pos+=gR[0].length}return gR}};fh.prototype.current=function(){return this.string.slice(this.start,this.pos)};fh.prototype.hideFirstChars=function(gQ,i){this.lineStart+=gQ;try{return i()}finally{this.lineStart-=gQ}};function fX(i,gR,gV,gU){var gT=[i.state.modeGen],gS={};w(i,gR.text,i.doc.mode,gV,function(gX,gY){return gT.push(gX,gY)},gS,gU);var gQ=function(g0){var gY=i.state.overlays[g0],gZ=1,gX=0;w(i,gR.text,gY.mode,true,function(g1,g3){var g5=gZ;while(gX<g1){var g2=gT[gZ];if(g2>g1){gT.splice(gZ,1,g1,gT[gZ+1],g2)}gZ+=2;gX=Math.min(g1,g2)}if(!g3){return}if(gY.opaque){gT.splice(g5,gZ-g5,g1,"overlay "+g3);gZ=g5+2}else{for(;g5<gZ;g5+=2){var g4=gT[g5+1];gT[g5+1]=(g4?g4+" ":"")+"overlay "+g3}}},gS)};for(var gW=0;gW<i.state.overlays.length;++gW){gQ(gW)}return{styles:gT,classes:gS.bgClass||gS.textClass?gS:null}}function dj(gQ,gR,gT){if(!gR.styles||gR.styles[0]!=gQ.state.modeGen){var gS=dO(gQ,bU(gR));var i=fX(gQ,gR,gR.text.length>gQ.options.maxHighlightLength?cb(gQ.doc.mode,gS):gS);gR.stateAfter=gS;gR.styles=i.styles;if(i.classes){gR.styleClasses=i.classes}else{if(gR.styleClasses){gR.styleClasses=null}}if(gT===gQ.doc.frontier){gQ.doc.frontier++}}return gR.styles}function dO(i,gV,gQ){var gT=i.doc,gS=i.display;if(!gT.mode.startState){return true}var gU=cJ(i,gV,gQ),gR=gU>gT.first&&fD(gT,gU-1).stateAfter;if(!gR){gR=b8(gT.mode)}else{gR=cb(gT.mode,gR)}gT.iter(gU,gV,function(gW){dK(i,gW.text,gR);var gX=gU==gV-1||gU%5==0||gU>=gS.viewFrom&&gU<gS.viewTo;gW.stateAfter=gX?cb(gT.mode,gR):null;++gU});if(gQ){gT.frontier=gU}return gR}function dK(i,gU,gR,gQ){var gT=i.doc.mode;var gS=new fh(gU,i.options.tabSize);gS.start=gS.pos=gQ||0;if(gU==""){fN(gT,gR)}while(!gS.eol()){eW(gT,gS,gR);gS.start=gS.pos}}function fN(gR,gQ){if(gR.blankLine){return gR.blankLine(gQ)}if(!gR.innerMode){return}var i=gE(gR,gQ);if(i.mode.blankLine){return i.mode.blankLine(i.state)}}function eW(gV,gU,gT,gQ){for(var gR=0;gR<10;gR++){if(gQ){gQ[0]=gE(gV,gT).mode}var gS=gV.token(gU,gT);if(gU.pos>gU.start){return gS}}throw new Error("Mode "+gV.name+" failed to advance stream.")}function cB(gY,gW,gT,gS){var i=function(g1){return({start:gZ.start,end:gZ.pos,string:gZ.current(),type:gR||null,state:g1?cb(gX.mode,gQ):gQ})};var gX=gY.doc,gU=gX.mode,gR;gW=gb(gX,gW);var g0=fD(gX,gW.line),gQ=dO(gY,gW.line,gT);var gZ=new fh(g0.text,gY.options.tabSize),gV;if(gS){gV=[]}while((gS||gZ.pos<gW.ch)&&!gZ.eol()){gZ.start=gZ.pos;gR=eW(gU,gZ,gQ);if(gS){gV.push(i(true))}}return gS?gV:i()}function dx(gR,gQ){if(gR){for(;;){var i=gR.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i){break}gR=gR.slice(0,i.index)+gR.slice(i.index+i[0].length);var gS=i[1]?"bgClass":"textClass";if(gQ[gS]==null){gQ[gS]=i[2]}else{if(!(new RegExp("(?:^|s)"+i[2]+"(?:$|s)")).test(gQ[gS])){gQ[gS]+=" "+i[2]}}}}return gR}function w(gZ,g1,gU,gQ,gV,gS,gT){var gR=gU.flattenSpans;if(gR==null){gR=gZ.options.flattenSpans}var gX=0,gW=null;var g0=new fh(g1,gZ.options.tabSize),i;var g3=gZ.options.addModeClass&&[null];if(g1==""){dx(fN(gU,gQ),gS)}while(!g0.eol()){if(g0.pos>gZ.options.maxHighlightLength){gR=false;if(gT){dK(gZ,g1,gQ,g0.pos)}g0.pos=g1.length;i=null}else{i=dx(eW(gU,g0,gQ,g3),gS)}if(g3){var g2=g3[0].name;if(g2){i="m-"+(i?g2+" "+i:g2)}}if(!gR||gW!=i){while(gX<g0.start){gX=Math.min(g0.start,gX+5000);gV(gX,gW)}gW=i}g0.start=g0.pos}while(gX<g0.pos){var gY=Math.min(g0.pos,gX+5000);gV(gY,gW);gX=gY}}function cJ(gV,i,gS){var gQ,gT,gU=gV.doc;var gR=gS?-1:i-(gV.doc.mode.innerMode?1000:100);for(var gY=i;gY>gR;--gY){if(gY<=gU.first){return gU.first}var gX=fD(gU,gY-1);if(gX.stateAfter&&(!gS||gY<=gU.frontier)){return gY}var gW=bY(gX.text,null,gV.options.tabSize);if(gT==null||gQ>gW){gT=gY-1;gQ=gW}}return gT}var gC=function(gR,gQ,i){this.text=gR;de(this,gQ);this.height=i?i(this):1};gC.prototype.lineNo=function(){return bU(this)};bG(gC);function eE(gQ,gT,gR,i){gQ.text=gT;if(gQ.stateAfter){gQ.stateAfter=null}if(gQ.styles){gQ.styles=null}if(gQ.order!=null){gQ.order=null}gF(gQ);de(gQ,gR);var gS=i?i(gQ):1;if(gS!=gQ.height){gD(gQ,gS)}}function bI(i){i.parent=null;gF(i)}var d9={};var ca={};function fk(gR,gQ){if(!gR||/^\s*$/.test(gR)){return null}var i=gQ.addModeClass?ca:d9;return i[gR]||(i[gR]=gR.replace(/\S+/g,"cm-$&"))}function ff(gW,gV){var gU=gz("span",null,null,db?"padding-right: .1px":null);var gT={pre:gz("pre",[gU],"CodeMirror-line"),content:gU,col:0,pos:0,cm:gW,trailingSpace:false,splitSpaces:(dW||db)&&gW.getOption("lineWrapping")};gU.setAttribute("role","presentation");gT.pre.setAttribute("role","presentation");gV.measure={};for(var gS=0;gS<=(gV.rest?gV.rest.length:0);gS++){var gY=gS?gV.rest[gS-1]:gV.line,gR=(void 0);gT.pos=0;gT.addToken=t;if(bV(gW.display.measure)&&(gR=a(gY))){gT.addToken=U(gT.addToken,gR)}gT.map=[];var gQ=gV!=gW.display.externalMeasured&&bU(gY);bt(gY,gT,dj(gW,gY,gQ));if(gY.styleClasses){if(gY.styleClasses.bgClass){gT.bgClass=gp(gY.styleClasses.bgClass,gT.bgClass||"")}if(gY.styleClasses.textClass){gT.textClass=gp(gY.styleClasses.textClass,gT.textClass||"")}}if(gT.map.length==0){gT.map.push(0,0,gT.content.appendChild(bs(gW.display.measure)))}if(gS==0){gV.measure.map=gT.map;gV.measure.cache={}}else{(gV.measure.maps||(gV.measure.maps=[])).push(gT.map);(gV.measure.caches||(gV.measure.caches=[])).push({})}}if(db){var gX=gT.content.lastChild;if(/\bcm-tab\b/.test(gX.className)||(gX.querySelector&&gX.querySelector(".cm-tab"))){gT.content.className="cm-tab-wrap-hack"}}aF(gW,"renderLine",gW,gV.line,gT.pre);if(gT.pre.className){gT.textClass=gp(gT.pre.className,gT.textClass||"")}return gT}function fC(gQ){var i=gz("span","\u2022","cm-invalidchar");i.title="\\u"+gQ.charCodeAt(0).toString(16);i.setAttribute("aria-label",i.title);return i}function t(g0,gV,g5,g2,gY,g8,gU){if(!gV){return}var g4=g0.splitSpaces?cQ(gV,g0.trailingSpace):gV;var i=g0.cm.state.specialChars,gQ=false;var g3;if(!i.test(gV)){g0.col+=gV.length;g3=document.createTextNode(g4);g0.map.push(g0.pos,g0.pos+gV.length,g3);if(dW&&l<9){gQ=true}g0.pos+=gV.length}else{g3=document.createDocumentFragment();var gS=0;while(true){i.lastIndex=gS;var g1=i.exec(gV);var g7=g1?g1.index-gS:gV.length-gS;if(g7){var gX=document.createTextNode(g4.slice(gS,gS+g7));if(dW&&l<9){g3.appendChild(gz("span",[gX]))}else{g3.appendChild(gX)}g0.map.push(g0.pos,g0.pos+g7,gX);g0.col+=g7;g0.pos+=g7}if(!g1){break}gS+=g7+1;var g6=(void 0);if(g1[0]=="\t"){var gZ=g0.cm.options.tabSize,gW=gZ-g0.col%gZ;g6=g3.appendChild(gz("span",cA(gW),"cm-tab"));g6.setAttribute("role","presentation");g6.setAttribute("cm-text","\t");g0.col+=gW}else{if(g1[0]=="\r"||g1[0]=="\n"){g6=g3.appendChild(gz("span",g1[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));g6.setAttribute("cm-text",g1[0]);g0.col+=1}else{g6=g0.cm.options.specialCharPlaceholder(g1[0]);g6.setAttribute("cm-text",g1[0]);if(dW&&l<9){g3.appendChild(gz("span",[g6]))}else{g3.appendChild(g6)}g0.col+=1}}g0.map.push(g0.pos,g0.pos+1,g6);g0.pos++}}g0.trailingSpace=g4.charCodeAt(gV.length-1)==32;if(g5||g2||gY||gQ||gU){var gR=g5||"";if(g2){gR+=g2}if(gY){gR+=gY}var gT=gz("span",[g3],gR,gU);if(g8){gT.title=g8}return g0.content.appendChild(gT)}g0.content.appendChild(g3)}function cQ(gV,gU){if(gV.length>1&&!/  /.test(gV)){return gV}var gR=gU,gQ="";for(var gS=0;gS<gV.length;gS++){var gT=gV.charAt(gS);if(gT==" "&&gR&&(gS==gV.length-1||gV.charCodeAt(gS+1)==32)){gT="\u00a0"}gQ+=gT;gR=gT==" "}return gQ}function U(gQ,i){return function(gY,g0,gR,gV,g1,gZ,gX){gR=gR?gR+" cm-force-border":"cm-force-border";var gS=gY.pos,gU=gS+g0.length;for(;;){var gT=(void 0);for(var gW=0;gW<i.length;gW++){gT=i[gW];if(gT.to>gS&&gT.from<=gS){break}}if(gT.to>=gU){return gQ(gY,g0,gR,gV,g1,gZ,gX)}gQ(gY,g0.slice(0,gT.to-gS),gR,gV,null,gZ,gX);gV=null;g0=g0.slice(gT.to-gS);gS=gT.to}}}function ae(gQ,gS,i,gR){var gT=!gR&&i.widgetNode;if(gT){gQ.map.push(gQ.pos,gQ.pos+gS,gT)}if(!gR&&gQ.cm.display.input.needsContentAttribute){if(!gT){gT=gQ.content.appendChild(document.createElement("span"))}gT.setAttribute("cm-marker",i.id)}if(gT){gQ.cm.display.input.setUneditable(gT);gQ.content.appendChild(gT)}gQ.pos+=gS;gQ.trailingSpace=false}function bt(g1,g8,g0){var gV=g1.markedSpans,gY=g1.text,g6=0;if(!gV){for(var gW=1;gW<g0.length;gW+=2){g8.addToken(g8,gY.slice(g6,g6=g0[gW]),fk(g0[gW+1],g8.cm.options))}return}var hc=gY.length,gU=0,hb=1,g4="",hd,g2;var hh=0,gQ,hg,g5,hi,gS;for(;;){if(hh==gU){gQ=hg=g5=hi=g2="";gS=null;hh=Infinity;var gX=[],gZ=(void 0);for(var g9=0;g9<gV.length;++g9){var ha=gV[g9],g7=ha.marker;if(g7.type=="bookmark"&&ha.from==gU&&g7.widgetNode){gX.push(g7)}else{if(ha.from<=gU&&(ha.to==null||ha.to>gU||g7.collapsed&&ha.to==gU&&ha.from==gU)){if(ha.to!=null&&ha.to!=gU&&hh>ha.to){hh=ha.to;hg=""}if(g7.className){gQ+=" "+g7.className}if(g7.css){g2=(g2?g2+";":"")+g7.css}if(g7.startStyle&&ha.from==gU){g5+=" "+g7.startStyle}if(g7.endStyle&&ha.to==hh){(gZ||(gZ=[])).push(g7.endStyle,ha.to)}if(g7.title&&!hi){hi=g7.title}if(g7.collapsed&&(!gS||d4(gS.marker,g7)<0)){gS=ha}}else{if(ha.from>gU&&hh>ha.from){hh=ha.from}}}}if(gZ){for(var hf=0;hf<gZ.length;hf+=2){if(gZ[hf+1]==hh){hg+=" "+gZ[hf]}}}if(!gS||gS.from==gU){for(var he=0;he<gX.length;++he){ae(g8,0,gX[he])}}if(gS&&(gS.from||0)==gU){ae(g8,(gS.to==null?hc+1:gS.to)-gU,gS.marker,gS.from==null);if(gS.to==null){return}if(gS.to==gU){gS=false}}}if(gU>=hc){break}var g3=Math.min(hc,hh);while(true){if(g4){var gR=gU+g4.length;if(!gS){var gT=gR>g3?g4.slice(0,g3-gU):g4;g8.addToken(g8,gT,hd?hd+gQ:gQ,g5,gU+gT.length==hh?hg:"",hi,g2)}if(gR>=g3){g4=g4.slice(g3-gU);gU=g3;break}gU=gR;g5=""}g4=gY.slice(g6,g6=g0[hb++]);hd=fk(g0[hb++],g8.cm.options)}}}function bB(gR,i,gQ){this.line=i;this.rest=g(i);this.size=this.rest?bU(f6(this.rest))-gQ+1:1;this.node=this.text=null;this.hidden=fT(gR,i)}function fj(i,gV,gU){var gT=[],gR;for(var gS=gV;gS<gU;gS=gR){var gQ=new bB(i.doc,fD(i.doc,gS),gS);gR=gS+gQ.size;gT.push(gQ)}return gT}var bu=null;function eR(i){if(bu){bu.ops.push(i)}else{i.ownsGroup=bu={ops:[i],delayedCallbacks:[]}}}function c5(gT){var gS=gT.delayedCallbacks,gR=0;do{for(;gR<gS.length;gR++){gS[gR].call(null)}for(var gQ=0;gQ<gT.ops.length;gQ++){var gU=gT.ops[gQ];if(gU.cursorActivityHandlers){while(gU.cursorActivityCalled<gU.cursorActivityHandlers.length){gU.cursorActivityHandlers[gU.cursorActivityCalled++].call(null,gU.cm)}}}}while(gR<gS.length)}function b5(gR,gQ){var i=gR.ownsGroup;if(!i){return}try{c5(i)}finally{bu=null;gQ(i)}}var bF=null;function af(gW,gU){var gQ=eB(gW,gU);if(!gQ.length){return}var gS=Array.prototype.slice.call(arguments,2),gV;if(bu){gV=bu.delayedCallbacks}else{if(bF){gV=bF}else{gV=bF=[];setTimeout(aN,0)}}var gR=function(gX){gV.push(function(){return gQ[gX].apply(null,gS)})};for(var gT=0;gT<gQ.length;++gT){gR(gT)}}function aN(){var gQ=bF;bF=null;for(var gR=0;gR<gQ.length;++gR){gQ[gR]()}}function ac(i,gR,gT,gU){for(var gQ=0;gQ<gR.changes.length;gQ++){var gS=gR.changes[gQ];if(gS=="text"){fJ(i,gR)}else{if(gS=="gutter"){dt(i,gR,gT,gU)}else{if(gS=="class"){dS(gR)}else{if(gS=="widget"){ao(i,gR,gU)}}}}}gR.changes=null}function f8(i){if(i.node==i.text){i.node=gz("div",null,null,"position: relative");if(i.text.parentNode){i.text.parentNode.replaceChild(i.node,i.text)}i.node.appendChild(i.text);if(dW&&l<8){i.node.style.zIndex=2}}return i.node}function eN(gQ){var i=gQ.bgClass?gQ.bgClass+" "+(gQ.line.bgClass||""):gQ.line.bgClass;if(i){i+=" CodeMirror-linebackground"}if(gQ.background){if(i){gQ.background.className=i}else{gQ.background.parentNode.removeChild(gQ.background);gQ.background=null}}else{if(i){var gR=f8(gQ);gQ.background=gR.insertBefore(gz("div",null,i),gR.firstChild)}}}function d8(i,gQ){var gR=i.display.externalMeasured;if(gR&&gR.line==gQ.line){i.display.externalMeasured=null;gQ.measure=gR.measure;return gR.built}return ff(i,gQ)}function fJ(i,gS){var gQ=gS.text.className;var gR=d8(i,gS);if(gS.text==gS.node){gS.node=gR.pre}gS.text.parentNode.replaceChild(gR.pre,gS.text);gS.text=gR.pre;if(gR.bgClass!=gS.bgClass||gR.textClass!=gS.textClass){gS.bgClass=gR.bgClass;gS.textClass=gR.textClass;dS(gS)}else{if(gQ){gS.text.className=gQ}}}function dS(gQ){eN(gQ);if(gQ.line.wrapClass){f8(gQ).className=gQ.line.wrapClass}else{if(gQ.node!=gQ.text){gQ.node.className=""}}var i=gQ.textClass?gQ.textClass+" "+(gQ.line.textClass||""):gQ.line.textClass;gQ.text.className=i||""}function dt(gX,gV,gU,gW){if(gV.gutter){gV.node.removeChild(gV.gutter);gV.gutter=null}if(gV.gutterBackground){gV.node.removeChild(gV.gutterBackground);gV.gutterBackground=null}if(gV.line.gutterClass){var gQ=f8(gV);gV.gutterBackground=gz("div",null,"CodeMirror-gutter-background "+gV.line.gutterClass,("left: "+(gX.options.fixedGutter?gW.fixedPos:-gW.gutterTotalWidth)+"px; width: "+(gW.gutterTotalWidth)+"px"));gQ.insertBefore(gV.gutterBackground,gV.text)}var gS=gV.line.gutterMarkers;if(gX.options.lineNumbers||gS){var gY=f8(gV);var gT=gV.gutter=gz("div",null,"CodeMirror-gutter-wrapper",("left: "+(gX.options.fixedGutter?gW.fixedPos:-gW.gutterTotalWidth)+"px"));gX.display.input.setUneditable(gT);gY.insertBefore(gT,gV.text);if(gV.line.gutterClass){gT.className+=" "+gV.line.gutterClass}if(gX.options.lineNumbers&&(!gS||!gS["CodeMirror-linenumbers"])){gV.lineNumber=gT.appendChild(gz("div",eK(gX.options,gU),"CodeMirror-linenumber CodeMirror-gutter-elt",("left: "+(gW.gutterLeft["CodeMirror-linenumbers"])+"px; width: "+(gX.display.lineNumInnerWidth)+"px")))}if(gS){for(var gR=0;gR<gX.options.gutters.length;++gR){var i=gX.options.gutters[gR],gZ=gS.hasOwnProperty(i)&&gS[i];if(gZ){gT.appendChild(gz("div",[gZ],"CodeMirror-gutter-elt",("left: "+(gW.gutterLeft[i])+"px; width: "+(gW.gutterWidth[i])+"px")))}}}}}function ao(i,gQ,gT){if(gQ.alignable){gQ.alignable=null}for(var gS=gQ.node.firstChild,gR=(void 0);gS;gS=gR){gR=gS.nextSibling;if(gS.className=="CodeMirror-linewidget"){gQ.node.removeChild(gS)}}fQ(i,gQ,gT)}function aG(i,gR,gS,gT){var gQ=d8(i,gR);gR.text=gR.node=gQ.pre;if(gQ.bgClass){gR.bgClass=gQ.bgClass}if(gQ.textClass){gR.textClass=gQ.textClass}dS(gR);dt(i,gR,gS,gT);fQ(i,gR,gT);return gR.node}function fQ(gQ,gS,gT){gB(gQ,gS.line,gS,gT,true);if(gS.rest){for(var gR=0;gR<gS.rest.length;gR++){gB(gQ,gS.rest[gR],gS,gT,false)}}}function gB(gY,gZ,gV,gX,gT){if(!gZ.widgets){return}var gQ=f8(gV);for(var gS=0,gW=gZ.widgets;gS<gW.length;++gS){var gU=gW[gS],gR=gz("div",[gU.node],"CodeMirror-linewidget");if(!gU.handleMouseEvents){gR.setAttribute("cm-ignore-events","true")}bM(gU,gR,gV,gX);gY.display.input.setUneditable(gR);if(gT&&gU.above){gQ.insertBefore(gR,gV.gutter||gV.text)}else{gQ.appendChild(gR)}af(gU,"redraw")}}function bM(gS,gR,i,gT){if(gS.noHScroll){(i.alignable||(i.alignable=[])).push(gR);var gQ=gT.wrapperWidth;gR.style.left=gT.fixedPos+"px";if(!gS.coverGutter){gQ-=gT.gutterTotalWidth;gR.style.paddingLeft=gT.gutterTotalWidth+"px"}gR.style.width=gQ+"px"}if(gS.coverGutter){gR.style.zIndex=5;gR.style.position="relative";if(!gS.noHScroll){gR.style.marginLeft=-gT.gutterTotalWidth+"px"}}}function c9(gR){if(gR.height!=null){return gR.height}var i=gR.doc.cm;if(!i){return 0}if(!gH(document.body,gR.node)){var gQ="position: relative;";if(gR.coverGutter){gQ+="margin-left: -"+i.display.gutters.offsetWidth+"px;"}if(gR.noHScroll){gQ+="width: "+i.display.wrapper.clientWidth+"px;"}bZ(i.display.measure,gz("div",[gR.node],null,gQ))}return gR.height=gR.node.parentNode.offsetHeight}function bc(gQ,i){for(var gR=L(i);gR!=gQ.wrapper;gR=gR.parentNode){if(!gR||(gR.nodeType==1&&gR.getAttribute("cm-ignore-events")=="true")||(gR.parentNode==gQ.sizer&&gR!=gQ.mover)){return true}}}function fx(i){return i.lineSpace.offsetTop}function bP(i){return i.mover.offsetHeight-i.lineSpace.offsetHeight}function ft(gS){if(gS.cachedPaddingH){return gS.cachedPaddingH}var gR=bZ(gS.measure,gz("pre","x"));var i=window.getComputedStyle?window.getComputedStyle(gR):gR.currentStyle;var gQ={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};if(!isNaN(gQ.left)&&!isNaN(gQ.right)){gS.cachedPaddingH=gQ}return gQ}function c4(i){return dV-i.display.nativeBarWidth}function dz(i){return i.display.scroller.clientWidth-c4(i)-i.display.barWidth}function c6(i){return i.display.scroller.clientHeight-c4(i)-i.display.barHeight}function cq(gX,gT,gW){var gS=gX.options.lineWrapping;var gU=gS&&dz(gX);if(!gT.measure.heights||gS&&gT.measure.width!=gU){var gV=gT.measure.heights=[];if(gS){gT.measure.width=gU;var gZ=gT.text.firstChild.getClientRects();for(var gQ=0;gQ<gZ.length-1;gQ++){var gY=gZ[gQ],gR=gZ[gQ+1];if(Math.abs(gY.bottom-gR.bottom)>2){gV.push((gY.bottom+gR.top)/2-gW.top)}}}gV.push(gW.bottom-gW.top)}}function cE(gS,gQ,gT){if(gS.line==gQ){return{map:gS.measure.map,cache:gS.measure.cache}}for(var gR=0;gR<gS.rest.length;gR++){if(gS.rest[gR]==gQ){return{map:gS.measure.maps[gR],cache:gS.measure.caches[gR]}}}for(var gU=0;gU<gS.rest.length;gU++){if(bU(gS.rest[gU])>gT){return{map:gS.measure.maps[gU],cache:gS.measure.caches[gU],before:true}}}}function dd(i,gR){gR=y(gR);var gT=bU(gR);var gQ=i.display.externalMeasured=new bB(i.doc,gR,gT);gQ.lineN=gT;var gS=gQ.built=ff(i,gQ);gQ.text=gS.pre;bZ(i.display.lineMeasure,gS.pre);return gQ}function ew(i,gQ,gS,gR){return C(i,a6(i,gQ),gS,gR)}function fA(i,gR){if(gR>=i.display.viewFrom&&gR<i.display.viewTo){return i.display.view[dE(i,gR)]}var gQ=i.display.externalMeasured;if(gQ&&gR>=gQ.lineN&&gR<gQ.lineN+gQ.size){return gQ}}function a6(i,gR){var gS=bU(gR);var gQ=fA(i,gS);if(gQ&&!gQ.text){gQ=null}else{if(gQ&&gQ.changes){ac(i,gQ,gS,fB(i));i.curOp.forceUpdate=true}}if(!gQ){gQ=dd(i,gR)}var gT=cE(gQ,gR,gS);return{line:gR,view:gQ,rect:null,map:gT.map,cache:gT.cache,before:gT.before,hasHeights:false}}function C(i,gV,gT,gQ,gS){if(gV.before){gT=-1}var gR=gT+(gQ||""),gU;if(gV.cache.hasOwnProperty(gR)){gU=gV.cache[gR]}else{if(!gV.rect){gV.rect=gV.view.text.getBoundingClientRect()}if(!gV.hasHeights){cq(i,gV.view,gV.rect);gV.hasHeights=true}gU=k(i,gV,gT,gQ);if(!gU.bogus){gV.cache[gR]=gU}}return{left:gU.left,right:gU.right,top:gS?gU.rtop:gU.top,bottom:gS?gU.rbottom:gU.bottom}}var eV={left:0,right:0,top:0,bottom:0};function aL(gR,gQ,gX){var gT,gS,gV,gY,gU,gZ;for(var gW=0;gW<gR.length;gW+=3){gU=gR[gW];gZ=gR[gW+1];if(gQ<gU){gS=0;gV=1;gY="left"}else{if(gQ<gZ){gS=gQ-gU;gV=gS+1}else{if(gW==gR.length-3||gQ==gZ&&gR[gW+3]>gQ){gV=gZ-gU;gS=gV-1;if(gQ>=gZ){gY="right"}}}}if(gS!=null){gT=gR[gW+2];if(gU==gZ&&gX==(gT.insertLeft?"left":"right")){gY=gX}if(gX=="left"&&gS==0){while(gW&&gR[gW-2]==gR[gW-3]&&gR[gW-1].insertLeft){gT=gR[(gW-=3)+2];gY="left"}}if(gX=="right"&&gS==gZ-gU){while(gW<gR.length-3&&gR[gW+3]==gR[gW+4]&&!gR[gW+5].insertLeft){gT=gR[(gW+=3)+2];gY="right"}}break}}return{node:gT,start:gS,end:gV,collapse:gY,coverStart:gU,coverEnd:gZ}}function fg(gR,gQ){var gT=eV;if(gQ=="left"){for(var gS=0;gS<gR.length;gS++){if((gT=gR[gS]).left!=gT.right){break}}}else{for(var gU=gR.length-1;gU>=0;gU--){if((gT=gR[gU]).left!=gT.right){break}}}return gT}function k(gY,g8,g1,gV){var gZ=aL(g8.map,g1,gV);var g6=gZ.node,gU=gZ.start,gT=gZ.end,gQ=gZ.collapse;var gR;if(g6.nodeType==3){for(var gW=0;gW<4;gW++){while(gU&&fM(g8.line.text.charAt(gZ.coverStart+gU))){--gU}while(gZ.coverStart+gT<gZ.coverEnd&&fM(g8.line.text.charAt(gZ.coverStart+gT))){++gT}if(dW&&l<9&&gU==0&&gT==gZ.coverEnd-gZ.coverStart){gR=g6.parentNode.getBoundingClientRect()}else{gR=fg(cw(g6,gU,gT).getClientRects(),gV)}if(gR.left||gR.right||gU==0){break}gT=gU;gU=gU-1;gQ="right"}if(dW&&l<11){gR=fa(gY.display.measure,gR)}}else{if(gU>0){gQ=gV="right"}var gS;if(gY.options.lineWrapping&&(gS=g6.getClientRects()).length>1){gR=gS[gV=="right"?gS.length-1:0]}else{gR=g6.getBoundingClientRect()}}if(dW&&l<9&&!gU&&(!gR||!gR.left&&!gR.right)){var gX=g6.parentNode.getClientRects()[0];if(gX){gR={left:gX.left,right:gX.left+dP(gY.display),top:gX.top,bottom:gX.bottom}}else{gR=eV}}var g4=gR.top-g8.rect.top,g2=gR.bottom-g8.rect.top;var ha=(g4+g2)/2;var g9=g8.view.measure.heights;var g7=0;for(;g7<g9.length-1;g7++){if(ha<g9[g7]){break}}var g5=g7?g9[g7-1]:0,g3=g9[g7];var g0={left:(gQ=="right"?gR.right:gR.left)-g8.rect.left,right:(gQ=="left"?gR.left:gR.right)-g8.rect.left,top:g5,bottom:g3};if(!gR.left&&!gR.right){g0.bogus=true}if(!gY.options.singleCursorHeightPerLine){g0.rtop=g4;g0.rbottom=g2}return g0}function fa(gR,gS){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!aM(gR)){return gS}var gQ=screen.logicalXDPI/screen.deviceXDPI;var i=screen.logicalYDPI/screen.deviceYDPI;return{left:gS.left*gQ,right:gS.right*gQ,top:gS.top*i,bottom:gS.bottom*i}}function av(gR){if(gR.measure){gR.measure.cache={};gR.measure.heights=null;if(gR.rest){for(var gQ=0;gQ<gR.rest.length;gQ++){gR.measure.caches[gQ]={}}}}}function aP(gQ){gQ.display.externalMeasure=null;ef(gQ.display.lineMeasure);for(var gR=0;gR<gQ.display.view.length;gR++){av(gQ.display.view[gR])}}function ak(i){aP(i);i.display.cachedCharWidth=i.display.cachedTextHeight=i.display.cachedPaddingH=null;if(!i.options.lineWrapping){i.display.maxLineChanged=true}i.display.lineNumChars=null}function cF(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cD(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function fd(gX,gU,gW,gR,gT){if(!gT&&gU.widgets){for(var gS=0;gS<gU.widgets.length;++gS){if(gU.widgets[gS].above){var gZ=c9(gU.widgets[gS]);gW.top+=gZ;gW.bottom+=gZ}}}if(gR=="line"){return gW}if(!gR){gR="local"}var gV=bT(gU);if(gR=="local"){gV+=fx(gX.display)}else{gV-=gX.display.viewOffset}if(gR=="page"||gR=="window"){var gQ=gX.display.lineSpace.getBoundingClientRect();gV+=gQ.top+(gR=="window"?0:cD());var gY=gQ.left+(gR=="window"?0:cF());gW.left+=gY;gW.right+=gY}gW.top+=gV;gW.bottom+=gV;return gW}function gL(gQ,gT,gR){if(gR=="div"){return gT}var gV=gT.left,gU=gT.top;if(gR=="page"){gV-=cF();gU-=cD()}else{if(gR=="local"||!gR){var gS=gQ.display.sizer.getBoundingClientRect();gV+=gS.left;gU+=gS.top}}var i=gQ.display.lineSpace.getBoundingClientRect();return{left:gV-i.left,top:gU-i.top}}function cV(i,gT,gS,gR,gQ){if(!gR){gR=fD(i.doc,gT.line)}return fd(i,gR,ew(i,gR,gT.ch,gQ),gS)}function d7(g0,gY,gR,gV,g2,gW){gV=gV||fD(g0.doc,gY.line);if(!g2){g2=a6(g0,gV)}function gT(g5,g4){var g3=C(g0,g2,g5,g4?"right":"left",gW);if(g4){g3.left=g3.right}else{g3.right=g3.left}return fd(g0,gV,g3,gR)}var gU=a(gV),i=gY.ch,gZ=gY.sticky;if(i>=gV.text.length){i=gV.text.length;gZ="before"}else{if(i<=0){i=0;gZ="after"}}if(!gU){return gT(gZ=="before"?i-1:i,gZ=="before")}function g1(g6,g3,g7){var g4=gU[g3],g5=(g4.level%2)!=0;return gT(g7?g6-1:g6,g5!=g7)}var gQ=aI(gU,i,gZ);var gX=fr;var gS=g1(i,gQ,gZ=="before");if(gX!=null){gS.other=g1(i,gX,gZ!="before")}return gS}function dT(i,gT){var gS=0;gT=gb(i.doc,gT);if(!i.options.lineWrapping){gS=dP(i.display)*gT.ch}var gQ=fD(i.doc,gT.line);var gR=bT(gQ)+fx(i.display);return{left:gS,right:gS,top:gR,bottom:gR+gQ.height}}function gx(i,gQ,gS,gR,gU){var gT=W(i,gQ,gS);gT.xRel=gU;if(gR){gT.outside=true}return gT}function gi(gW,gT,gS){var gV=gW.doc;gS+=gW.display.viewOffset;if(gS<0){return gx(gV.first,0,null,true,-1)}var gR=bO(gV,gS),gX=gV.first+gV.size-1;if(gR>gX){return gx(gV.first+gV.size-1,fD(gV,gX).text.length,null,true,1)}if(gT<0){gT=0}var gQ=fD(gV,gR);for(;;){var gY=da(gW,gQ,gR,gT,gS);var gU=eO(gQ);var i=gU&&gU.find(0,true);if(gU&&(gY.ch>i.from.ch||gY.ch==i.from.ch&&gY.xRel>0)){gR=bU(gQ=i.to.line)}else{return gY}}}function bq(i,gR,gU,gV){var gT=function(gW){return fd(i,gR,C(i,gU,gW),"line")};var gQ=gR.text.length;var gS=cx(function(gW){return gT(gW-1).bottom<=gV},gQ,0);gQ=cx(function(gW){return gT(gW).top>gV},gS,gQ);return{begin:gS,end:gQ}}function bp(i,gQ,gS,gT){var gR=fd(i,gQ,C(i,gS,gT),"line").top;return bq(i,gQ,gS,gR)}function da(gT,i,gW,gV,gU){gU-=bT(i);var g6=0,gQ=i.text.length;var gZ=a6(gT,i);var gS;var g4=a(i);if(g4){if(gT.options.lineWrapping){var g3;((g3=bq(gT,i,gZ,gU),g6=g3.begin,gQ=g3.end,g3))}gS=new W(gW,g6);var g1=d7(gT,gS,"line",i,gZ).left;var g2=g1<gV?1:-1;var gX,g0=g1-gV,gR;do{gX=g0;gR=gS;gS=u(gT,i,gS,g2);if(gS==null||gS.ch<g6||gQ<=(gS.sticky=="before"?gS.ch-1:gS.ch)){gS=gR;break}g0=d7(gT,gS,"line",i,gZ).left-gV}while((g2<0)!=(g0<0)&&(Math.abs(g0)<=Math.abs(gX)));if(Math.abs(g0)>Math.abs(gX)){if((g0<0)==(gX<0)){throw new Error("Broke out of infinite loop in coordsCharInner")}gS=gR}}else{var gY=cx(function(g7){var g8=fd(gT,i,C(gT,gZ,g7),"line");if(g8.top>gU){gQ=Math.min(g7,gQ);return true}else{if(g8.bottom<=gU){return false}else{if(g8.left>gV){return true}else{if(g8.right<gV){return false}else{return(gV-g8.left<g8.right-gV)}}}}},g6,gQ);gY=ez(i.text,gY,1);gS=new W(gW,gY,gY==gQ?"before":"after")}var g5=d7(gT,gS,"line",i,gZ);if(gU<g5.top||g5.bottom<gU){gS.outside=true}gS.xRel=gV<g5.left?-1:(gV>g5.right?1:0);return gS}var aH;function aZ(gS){if(gS.cachedTextHeight!=null){return gS.cachedTextHeight}if(aH==null){aH=gz("pre");for(var gR=0;gR<49;++gR){aH.appendChild(document.createTextNode("x"));aH.appendChild(gz("br"))}aH.appendChild(document.createTextNode("x"))}bZ(gS.measure,aH);var gQ=aH.offsetHeight/50;if(gQ>3){gS.cachedTextHeight=gQ}ef(gS.measure);return gQ||1}function dP(gT){if(gT.cachedCharWidth!=null){return gT.cachedCharWidth}var i=gz("span","xxxxxxxxxx");var gS=gz("pre",[i]);bZ(gT.measure,gS);var gR=i.getBoundingClientRect(),gQ=(gR.right-gR.left)/10;if(gQ>2){gT.cachedCharWidth=gQ}return gQ||10}function fB(gQ){var gV=gQ.display,gT={},gS={};var gU=gV.gutters.clientLeft;for(var gW=gV.gutters.firstChild,gR=0;gW;gW=gW.nextSibling,++gR){gT[gQ.options.gutters[gR]]=gW.offsetLeft+gW.clientLeft+gU;gS[gQ.options.gutters[gR]]=gW.clientWidth}return{fixedPos:eb(gV),gutterTotalWidth:gV.gutters.offsetWidth,gutterLeft:gT,gutterWidth:gS,wrapperWidth:gV.wrapper.clientWidth}}function eb(i){return i.scroller.getBoundingClientRect().left-i.sizer.getBoundingClientRect().left}function bf(i){var gR=aZ(i.display),gQ=i.options.lineWrapping;var gS=gQ&&Math.max(5,i.display.scroller.clientWidth/dP(i.display)-3);return function(gU){if(fT(i.doc,gU)){return 0}var gT=0;if(gU.widgets){for(var gV=0;gV<gU.widgets.length;gV++){if(gU.widgets[gV].height){gT+=gU.widgets[gV].height}}}if(gQ){return gT+(Math.ceil(gU.text.length/gS)||1)*gR}else{return gT+gR}}}function Z(i){var gR=i.doc,gQ=bf(i);gR.iter(function(gS){var gT=gQ(gS);if(gT!=gS.height){gD(gS,gT)}})}function cy(gY,gT,gQ,gR){var gU=gY.display;if(!gQ&&L(gT).getAttribute("cm-not-content")=="true"){return null}var gX,gV,i=gU.lineSpace.getBoundingClientRect();try{gX=gT.clientX-i.left;gV=gT.clientY-i.top}catch(gT){return null}var gW=gi(gY,gX,gV),gZ;if(gR&&gW.xRel==1&&(gZ=fD(gY.doc,gW.line).text).length==gW.ch){var gS=bY(gZ,gZ.length,gY.options.tabSize)-gZ.length;gW=W(gW.line,Math.max(0,Math.round((gX-ft(gY.display).left)/dP(gY.display))-gS))}return gW}function dE(gQ,gT){if(gT>=gQ.display.viewTo){return null}gT-=gQ.display.viewFrom;if(gT<0){return null}var gR=gQ.display.view;for(var gS=0;gS<gR.length;gS++){gT-=gR[gS].size;if(gT<0){return gS}}}function bJ(i){i.display.input.showSelection(i.display.input.prepareSelection())}function f9(gX,gQ){var gW=gX.doc,gY={};var gV=gY.cursors=document.createDocumentFragment();var gR=gY.selection=document.createDocumentFragment();for(var gT=0;gT<gW.sel.ranges.length;gT++){if(gQ===false&&gT==gW.sel.primIndex){continue}var gU=gW.sel.ranges[gT];if(gU.from().line>=gX.display.viewTo||gU.to().line<gX.display.viewFrom){continue}var gS=gU.empty();if(gS||gX.options.showCursorWhenSelecting){A(gX,gU.head,gV)}if(!gS){bK(gX,gU,gR)}}return gY}function A(i,gS,gR){var gU=d7(i,gS,"div",null,null,!i.options.singleCursorHeightPerLine);var gT=gR.appendChild(gz("div","\u00a0","CodeMirror-cursor"));gT.style.left=gU.left+"px";gT.style.top=gU.top+"px";gT.style.height=Math.max(0,gU.bottom-gU.top)*i.options.cursorHeight+"px";if(gU.other){var gQ=gR.appendChild(gz("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));gQ.style.display="";gQ.style.left=gU.other.left+"px";gQ.style.top=gU.other.top+"px";gQ.style.height=(gU.other.bottom-gU.other.top)*0.85+"px"}}function bK(gT,gZ,gU){var g2=gT.display,g6=gT.doc;var i=document.createDocumentFragment();var gY=ft(gT.display),gS=gY.left;var g3=Math.max(g2.sizerWidth,dz(gT)-g2.sizer.offsetLeft)-gY.right;function g0(ha,g9,g8,g7){if(g9<0){g9=0}g9=Math.round(g9);g7=Math.round(g7);i.appendChild(gz("div",null,"CodeMirror-selected",("position: absolute; left: "+ha+"px;\n                             top: "+g9+"px; width: "+(g8==null?g3-ha:g8)+"px;\n                             height: "+(g7-g9)+"px")))}function gQ(g8,ha,hd){var g9=fD(g6,g8);var hb=g9.text.length;var he,g7;function hc(hg,hf){return cV(gT,W(g8,hg),"div",g9,hf)}ei(a(g9),ha||0,hd==null?hb:hd,function(hm,hl,hf){var hi=hc(hm,"left"),hj,hk,hh;if(hm==hl){hj=hi;hk=hh=hi.left}else{hj=hc(hl-1,"right");if(hf=="rtl"){var hg=hi;hi=hj;hj=hg}hk=hi.left;hh=hj.right}if(ha==null&&hm==0){hk=gS}if(hj.top-hi.top>3){g0(hk,hi.top,null,hi.bottom);hk=gS;if(hi.bottom<hj.top){g0(hk,hi.bottom,null,hj.top)}}if(hd==null&&hl==hb){hh=g3}if(!he||hi.top<he.top||hi.top==he.top&&hi.left<he.left){he=hi}if(!g7||hj.bottom>g7.bottom||hj.bottom==g7.bottom&&hj.right>g7.right){g7=hj}if(hk<gS+1){hk=gS}g0(hk,hj.top,hh-hk,hj.bottom)});return{start:he,end:g7}}var g5=gZ.from(),g4=gZ.to();if(g5.line==g4.line){gQ(g5.line,g5.ch,g4.ch)}else{var gR=fD(g6,g5.line),gW=fD(g6,g4.line);var gV=y(gR)==y(gW);var gX=gQ(g5.line,g5.ch,gV?gR.text.length+1:null).end;var g1=gQ(g4.line,gV?0:null,g4.ch).start;if(gV){if(gX.top<g1.top-2){g0(gX.right,gX.top,null,gX.bottom);g0(gS,g1.top,g1.left,g1.bottom)}else{g0(gX.right,gX.top,g1.left-gX.right,gX.bottom)}}if(gX.bottom<g1.top){g0(gS,gX.bottom,null,g1.top)}}gU.appendChild(i)}function p(i){if(!i.state.focused){return}var gR=i.display;clearInterval(gR.blinker);var gQ=true;gR.cursorDiv.style.visibility="";if(i.options.cursorBlinkRate>0){gR.blinker=setInterval(function(){return gR.cursorDiv.style.visibility=(gQ=!gQ)?"":"hidden"},i.options.cursorBlinkRate)}else{if(i.options.cursorBlinkRate<0){gR.cursorDiv.style.visibility="hidden"}}}function s(i){if(!i.state.focused){i.display.input.focus();cM(i)}}function al(i){i.state.delayingBlurEvent=true;setTimeout(function(){if(i.state.delayingBlurEvent){i.state.delayingBlurEvent=false;aW(i)}},100)}function cM(i,gQ){if(i.state.delayingBlurEvent){i.state.delayingBlurEvent=false}if(i.options.readOnly=="nocursor"){return}if(!i.state.focused){aF(i,"focus",i,gQ);i.state.focused=true;f0(i.display.wrapper,"CodeMirror-focused");if(!i.curOp&&i.display.selForContextMenu!=i.doc.sel){i.display.input.reset();if(db){setTimeout(function(){return i.display.input.reset(true)},20)}}i.display.input.receivedFocus()}p(i)}function aW(i,gQ){if(i.state.delayingBlurEvent){return}if(i.state.focused){aF(i,"blur",i,gQ);i.state.focused=false;h(i.display.wrapper,"CodeMirror-focused")}clearInterval(i.display.blinker);setTimeout(function(){if(!i.state.focused){i.display.shift=false}},150)}function eZ(gY){var gW=gY.display,gX=gW.view;if(!gW.alignWidgets&&(!gW.gutters.firstChild||!gY.options.fixedGutter)){return}var gU=eb(gW)-gW.scroller.scrollLeft+gY.doc.scrollLeft;var gQ=gW.gutters.offsetWidth,gR=gU+"px";for(var gT=0;gT<gX.length;gT++){if(!gX[gT].hidden){if(gY.options.fixedGutter){if(gX[gT].gutter){gX[gT].gutter.style.left=gR}if(gX[gT].gutterBackground){gX[gT].gutterBackground.style.left=gR}}var gV=gX[gT].alignable;if(gV){for(var gS=0;gS<gV.length;gS++){gV[gS].style.left=gR}}}}if(gY.options.fixedGutter){gW.gutters.style.left=(gU+gQ)+"px"}}function ej(i){if(!i.options.lineNumbers){return false}var gU=i.doc,gQ=eK(i.options,gU.first+gU.size-1),gT=i.display;if(gQ.length!=gT.lineNumChars){var gV=gT.measure.appendChild(gz("div",[gz("div",gQ)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var gR=gV.firstChild.offsetWidth,gS=gV.offsetWidth-gR;gT.lineGutter.style.width="";gT.lineNumInnerWidth=Math.max(gR,gT.lineGutter.offsetWidth-gS)+1;gT.lineNumWidth=gT.lineNumInnerWidth+gS;gT.lineNumChars=gT.lineNumInnerWidth?gQ.length:-1;gT.lineGutter.style.width=gT.lineNumWidth+"px";df(i);return true}return false}function ba(gX){var gV=gX.display;var gR=gV.lineDiv.offsetTop;for(var gS=0;gS<gV.view.length;gS++){var gY=gV.view[gS],gZ=(void 0);if(gY.hidden){continue}if(dW&&l<8){var gU=gY.node.offsetTop+gY.node.offsetHeight;gZ=gU-gR;gR=gU}else{var gT=gY.node.getBoundingClientRect();gZ=gT.bottom-gT.top}var gW=gY.line.height-gZ;if(gZ<2){gZ=aZ(gV)}if(gW>0.001||gW<-0.001){gD(gY.line,gZ);cj(gY.line);if(gY.rest){for(var gQ=0;gQ<gY.rest.length;gQ++){cj(gY.rest[gQ])}}}}}function cj(gQ){if(gQ.widgets){for(var gR=0;gR<gQ.widgets.length;++gR){gQ.widgets[gR].height=gQ.widgets[gR].node.parentNode.offsetHeight}}}function ce(gS,gW,gR){var gT=gR&&gR.top!=null?Math.max(0,gR.top):gS.scroller.scrollTop;gT=Math.floor(gT-fx(gS));var i=gR&&gR.bottom!=null?gR.bottom:gT+gS.wrapper.clientHeight;var gU=bO(gW,gT),gV=bO(gW,i);if(gR&&gR.ensure){var gQ=gR.ensure.from.line,gX=gR.ensure.to.line;if(gQ<gU){gU=gQ;gV=bO(gW,bT(fD(gW,gQ))+gS.wrapper.clientHeight)}else{if(Math.min(gX,gW.lastLine())>=gV){gU=bO(gW,bT(fD(gW,gX))-gS.wrapper.clientHeight);gV=gX}}}return{from:gU,to:Math.max(gV,gU+1)}}function O(i,gQ){if(Math.abs(i.doc.scrollTop-gQ)<2){return}i.doc.scrollTop=gQ;if(!cz){d6(i,{top:gQ})}if(i.display.scroller.scrollTop!=gQ){i.display.scroller.scrollTop=gQ}i.display.scrollbars.setScrollTop(gQ);if(cz){d6(i)}et(i,100)}function bL(i,gR,gQ){if(gQ?gR==i.doc.scrollLeft:Math.abs(i.doc.scrollLeft-gR)<2){return}gR=Math.min(gR,i.display.scroller.scrollWidth-i.display.scroller.clientWidth);i.doc.scrollLeft=gR;eZ(i);if(i.display.scroller.scrollLeft!=gR){i.display.scroller.scrollLeft=gR}i.display.scrollbars.setScrollLeft(gR)}var fK=0;var cp=null;if(dW){cp=-0.53}else{if(cz){cp=15}else{if(dq){cp=-0.7}else{if(aD){cp=-1/3}}}}function c2(gR){var gQ=gR.wheelDeltaX,i=gR.wheelDeltaY;if(gQ==null&&gR.detail&&gR.axis==gR.HORIZONTAL_AXIS){gQ=gR.detail}if(i==null&&gR.detail&&gR.axis==gR.VERTICAL_AXIS){i=gR.detail}else{if(i==null){i=gR.wheelDelta}}return{x:gQ,y:i}}function aA(i){var gQ=c2(i);gQ.x*=cp;gQ.y*=cp;return gQ}function c(g0,gU){var g2=c2(gU),g4=g2.x,g3=g2.y;var gW=g0.display,gZ=gW.scroller;var gT=gZ.scrollWidth>gZ.clientWidth;var gS=gZ.scrollHeight>gZ.clientHeight;if(!(g4&&gT||g3&&gS)){return}if(g3&&cf&&db){outer:for(var g1=gU.target,gY=gW.view;g1!=gZ;g1=g1.parentNode){for(var gR=0;gR<gY.length;gR++){if(gY[gR].node==g1){g0.display.currentWheelTarget=g1;break outer}}}}if(g4&&!cz&&!eg&&cp!=null){if(g3&&gS){O(g0,Math.max(0,Math.min(gZ.scrollTop+g3*cp,gZ.scrollHeight-gZ.clientHeight)))}bL(g0,Math.max(0,Math.min(gZ.scrollLeft+g4*cp,gZ.scrollWidth-gZ.clientWidth)));if(!g3||(g3&&gS)){cR(gU)}gW.wheelStartX=null;return}if(g3&&cp!=null){var gQ=g3*cp;var gX=g0.doc.scrollTop,gV=gX+gW.wrapper.clientHeight;if(gQ<0){gX=Math.max(0,gX+gQ-50)}else{gV=Math.min(g0.doc.height,gV+gQ+50)}d6(g0,{top:gX,bottom:gV})}if(fK<20){if(gW.wheelStartX==null){gW.wheelStartX=gZ.scrollLeft;gW.wheelStartY=gZ.scrollTop;gW.wheelDX=g4;gW.wheelDY=g3;setTimeout(function(){if(gW.wheelStartX==null){return}var i=gZ.scrollLeft-gW.wheelStartX;var g6=gZ.scrollTop-gW.wheelStartY;var g5=(g6&&gW.wheelDY&&g6/gW.wheelDY)||(i&&gW.wheelDX&&i/gW.wheelDX);gW.wheelStartX=gW.wheelStartY=null;if(!g5){return}cp=(cp*fK+g5)/(fK+1);++fK},200)}else{gW.wheelDX+=g4;gW.wheelDY+=g3}}}function dM(i){var gS=i.display,gR=gS.gutters.offsetWidth;var gQ=Math.round(i.doc.height+bP(i.display));return{clientHeight:gS.scroller.clientHeight,viewHeight:gS.wrapper.clientHeight,scrollWidth:gS.scroller.scrollWidth,clientWidth:gS.scroller.clientWidth,viewWidth:gS.wrapper.clientWidth,barLeft:i.options.fixedGutter?gR:0,docHeight:gQ,scrollHeight:gQ+c4(i)+gS.barHeight,nativeBarWidth:gS.nativeBarWidth,gutterWidth:gR}}var dy=function(gR,gQ,i){this.cm=i;var gS=this.vert=gz("div",[gz("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var gT=this.horiz=gz("div",[gz("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");gR(gS);gR(gT);b4(gS,"scroll",function(){if(gS.clientHeight){gQ(gS.scrollTop,"vertical")}});b4(gT,"scroll",function(){if(gT.clientWidth){gQ(gT.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(dW&&l<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}};dy.prototype.update=function(gS){var gT=gS.scrollWidth>gS.clientWidth+1;var gR=gS.scrollHeight>gS.clientHeight+1;var gU=gS.nativeBarWidth;if(gR){this.vert.style.display="block";this.vert.style.bottom=gT?gU+"px":"0";var gQ=gS.viewHeight-(gT?gU:0);this.vert.firstChild.style.height=Math.max(0,gS.scrollHeight-gS.clientHeight+gQ)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(gT){this.horiz.style.display="block";this.horiz.style.right=gR?gU+"px":"0";this.horiz.style.left=gS.barLeft+"px";var i=gS.viewWidth-gS.barLeft-(gR?gU:0);this.horiz.firstChild.style.width=Math.max(0,gS.scrollWidth-gS.clientWidth+i)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&gS.clientHeight>0){if(gU==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:gR?gU:0,bottom:gT?gU:0}};dy.prototype.setScrollLeft=function(i){if(this.horiz.scrollLeft!=i){this.horiz.scrollLeft=i}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz)}};dy.prototype.setScrollTop=function(i){if(this.vert.scrollTop!=i){this.vert.scrollTop=i}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert)}};dy.prototype.zeroWidthHack=function(){var i=cf&&!di?"12px":"18px";this.horiz.style.height=this.vert.style.width=i;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new gP;this.disableVert=new gP};dy.prototype.enableZeroWidthBar=function(gQ,i){gQ.style.pointerEvents="auto";function gR(){var gT=gQ.getBoundingClientRect();var gS=document.elementFromPoint(gT.left+1,gT.bottom-1);if(gS!=gQ){gQ.style.pointerEvents="none"}else{i.set(1000,gR)}}i.set(1000,gR)};dy.prototype.clear=function(){var i=this.horiz.parentNode;i.removeChild(this.horiz);i.removeChild(this.vert)};var fs=function(){};fs.prototype.update=function(){return{bottom:0,right:0}};fs.prototype.setScrollLeft=function(){};fs.prototype.setScrollTop=function(){};fs.prototype.clear=function(){};function fm(gS,gU){if(!gU){gU=dM(gS)}var gR=gS.display.barWidth,gQ=gS.display.barHeight;aV(gS,gU);for(var gT=0;gT<4&&gR!=gS.display.barWidth||gQ!=gS.display.barHeight;gT++){if(gR!=gS.display.barWidth&&gS.options.lineWrapping){ba(gS)}aV(gS,dM(gS));gR=gS.display.barWidth;gQ=gS.display.barHeight}}function aV(i,gQ){var gS=i.display;var gR=gS.scrollbars.update(gQ);gS.sizer.style.paddingRight=(gS.barWidth=gR.right)+"px";gS.sizer.style.paddingBottom=(gS.barHeight=gR.bottom)+"px";gS.heightForcer.style.borderBottom=gR.bottom+"px solid transparent";if(gR.right&&gR.bottom){gS.scrollbarFiller.style.display="block";gS.scrollbarFiller.style.height=gR.bottom+"px";gS.scrollbarFiller.style.width=gR.right+"px"}else{gS.scrollbarFiller.style.display=""}if(gR.bottom&&i.options.coverGutterNextToScrollbar&&i.options.fixedGutter){gS.gutterFiller.style.display="block";gS.gutterFiller.style.height=gR.bottom+"px";gS.gutterFiller.style.width=gQ.gutterWidth+"px"}else{gS.gutterFiller.style.display=""}}var bo={"native":dy,"null":fs};function aE(i){if(i.display.scrollbars){i.display.scrollbars.clear();if(i.display.scrollbars.addClass){h(i.display.wrapper,i.display.scrollbars.addClass)}}i.display.scrollbars=new bo[i.options.scrollbarStyle](function(gQ){i.display.wrapper.insertBefore(gQ,i.display.scrollbarFiller);b4(gQ,"mousedown",function(){if(i.state.focused){setTimeout(function(){return i.display.input.focus()},0)}});gQ.setAttribute("cm-not-content","true")},function(gR,gQ){if(gQ=="horizontal"){bL(i,gR)}else{O(i,gR)}},i);if(i.display.scrollbars.addClass){f0(i.display.wrapper,i.display.scrollbars.addClass)}}function ek(gQ,gT){if(aS(gQ,"scrollCursorIntoView")){return}var gU=gQ.display,gR=gU.sizer.getBoundingClientRect(),i=null;if(gT.top+gR.top<0){i=true}else{if(gT.bottom+gR.top>(window.innerHeight||document.documentElement.clientHeight)){i=false}}if(i!=null&&!fR){var gS=gz("div","\u200b",null,("position: absolute;\n                         top: "+(gT.top-gU.viewOffset-fx(gQ.display))+"px;\n                         height: "+(gT.bottom-gT.top+c4(gQ)+gU.barHeight)+"px;\n                         left: "+(gT.left)+"px; width: 2px;"));gQ.display.lineSpace.appendChild(gS);gS.scrollIntoView(i);gQ.display.lineSpace.removeChild(gS)}}function D(gZ,gX,gT,gS){if(gS==null){gS=0}var gY;for(var gU=0;gU<5;gU++){var gV=false;gY=d7(gZ,gX);var i=!gT||gT==gX?gY:d7(gZ,gT);var gR=H(gZ,Math.min(gY.left,i.left),Math.min(gY.top,i.top)-gS,Math.max(gY.left,i.left),Math.max(gY.bottom,i.bottom)+gS);var gW=gZ.doc.scrollTop,gQ=gZ.doc.scrollLeft;if(gR.scrollTop!=null){O(gZ,gR.scrollTop);if(Math.abs(gZ.doc.scrollTop-gW)>1){gV=true}}if(gR.scrollLeft!=null){bL(gZ,gR.scrollLeft);if(Math.abs(gZ.doc.scrollLeft-gQ)>1){gV=true}}if(!gV){break}}return gY}function E(i,gR,gT,gQ,gS){var gU=H(i,gR,gT,gQ,gS);if(gU.scrollTop!=null){O(i,gU.scrollTop)}if(gU.scrollLeft!=null){bL(i,gU.scrollLeft)}}function H(g1,gS,g0,gQ,gZ){var gX=g1.display,gV=aZ(g1.display);if(g0<0){g0=0}var gT=g1.curOp&&g1.curOp.scrollTop!=null?g1.curOp.scrollTop:gX.scroller.scrollTop;var g3=c6(g1),g5={};if(gZ-g0>g3){gZ=g0+g3}var gR=g1.doc.height+bP(gX);var i=g0<gV,gW=gZ>gR-gV;if(g0<gT){g5.scrollTop=i?0:g0}else{if(gZ>gT+g3){var gY=Math.min(g0,(gW?gR:gZ)-g3);if(gY!=gT){g5.scrollTop=gY}}}var g4=g1.curOp&&g1.curOp.scrollLeft!=null?g1.curOp.scrollLeft:gX.scroller.scrollLeft;var g2=dz(g1)-(g1.options.fixedGutter?gX.gutters.offsetWidth:0);var gU=gQ-gS>g2;if(gU){gQ=gS+g2}if(gS<10){g5.scrollLeft=0}else{if(gS<g4){g5.scrollLeft=Math.max(0,gS-(gU?0:10))}else{if(gQ>g2+g4-3){g5.scrollLeft=gQ+(gU?0:10)-g2}}}return g5}function cX(i,gR,gQ){if(gR!=null||gQ!=null){f2(i)}if(gR!=null){i.curOp.scrollLeft=(i.curOp.scrollLeft==null?i.doc.scrollLeft:i.curOp.scrollLeft)+gR}if(gQ!=null){i.curOp.scrollTop=(i.curOp.scrollTop==null?i.doc.scrollTop:i.curOp.scrollTop)+gQ}}function f5(i){f2(i);var gQ=i.getCursor(),gS=gQ,gR=gQ;if(!i.options.lineWrapping){gS=gQ.ch?W(gQ.line,gQ.ch-1):gQ;gR=W(gQ.line,gQ.ch+1)}i.curOp.scrollToPos={from:gS,to:gR,margin:i.options.cursorScrollMargin,isCursor:true}}function f2(i){var gR=i.curOp.scrollToPos;if(gR){i.curOp.scrollToPos=null;var gT=dT(i,gR.from),gS=dT(i,gR.to);var gQ=H(i,Math.min(gT.left,gS.left),Math.min(gT.top,gS.top)-gR.margin,Math.max(gT.right,gS.right),Math.max(gT.bottom,gS.bottom)+gR.margin);i.scrollTo(gQ.scrollLeft,gQ.scrollTop)}}var eo=0;function cU(i){i.curOp={cm:i,viewChanged:false,startHeight:i.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++eo};eR(i.curOp)}function an(i){var gQ=i.curOp;b5(gQ,function(gS){for(var gR=0;gR<gS.ops.length;gR++){gS.ops[gR].cm.curOp=null}cW(gS)})}function cW(gV){var gR=gV.ops;for(var gQ=0;gQ<gR.length;gQ++){cd(gR[gQ])}for(var gW=0;gW<gR.length;gW++){aq(gR[gW])}for(var gU=0;gU<gR.length;gU++){b9(gR[gU])}for(var gT=0;gT<gR.length;gT++){ap(gR[gT])}for(var gS=0;gS<gR.length;gS++){fo(gR[gS])}}function cd(gR){var i=gR.cm,gQ=i.display;J(i);if(gR.updateMaxLine){f(i)}gR.mustUpdate=gR.viewChanged||gR.forceUpdate||gR.scrollTop!=null||gR.scrollToPos&&(gR.scrollToPos.from.line<gQ.viewFrom||gR.scrollToPos.to.line>=gQ.viewTo)||gQ.maxLineChanged&&i.options.lineWrapping;gR.update=gR.mustUpdate&&new aK(i,gR.mustUpdate&&{top:gR.scrollTop,ensure:gR.scrollToPos},gR.forceUpdate)}function aq(i){i.updatedDisplay=i.mustUpdate&&B(i.cm,i.update)}function b9(gR){var i=gR.cm,gQ=i.display;if(gR.updatedDisplay){ba(i)}gR.barMeasure=dM(i);if(gQ.maxLineChanged&&!i.options.lineWrapping){gR.adjustWidthTo=ew(i,gQ.maxLine,gQ.maxLine.text.length).left+3;i.display.sizerWidth=gR.adjustWidthTo;gR.barMeasure.scrollWidth=Math.max(gQ.scroller.clientWidth,gQ.sizer.offsetLeft+gR.adjustWidthTo+c4(i)+i.display.barWidth);gR.maxScrollLeft=Math.max(0,gQ.sizer.offsetLeft+gR.adjustWidthTo-dz(i))}if(gR.updatedDisplay||gR.selectionChanged){gR.preparedSelection=gQ.input.prepareSelection(gR.focus)}}function ap(gR){var i=gR.cm;if(gR.adjustWidthTo!=null){i.display.sizer.style.minWidth=gR.adjustWidthTo+"px";if(gR.maxScrollLeft<i.doc.scrollLeft){bL(i,Math.min(i.display.scroller.scrollLeft,gR.maxScrollLeft),true)}i.display.maxLineChanged=false}var gQ=gR.focus&&gR.focus==d0()&&(!document.hasFocus||document.hasFocus());if(gR.preparedSelection){i.display.input.showSelection(gR.preparedSelection,gQ)}if(gR.updatedDisplay||gR.startHeight!=i.doc.height){fm(i,gR.barMeasure)}if(gR.updatedDisplay){dL(i,gR.barMeasure)}if(gR.selectionChanged){p(i)}if(i.state.focused&&gR.updateInput){i.display.input.reset(gR.typing)}if(gQ){s(gR.cm)}}function fo(gT){var gY=gT.cm,gV=gY.display,gX=gY.doc;if(gT.updatedDisplay){cs(gY,gT.update)}if(gV.wheelStartX!=null&&(gT.scrollTop!=null||gT.scrollLeft!=null||gT.scrollToPos)){gV.wheelStartX=gV.wheelStartY=null}if(gT.scrollTop!=null&&(gV.scroller.scrollTop!=gT.scrollTop||gT.forceScroll)){gX.scrollTop=Math.max(0,Math.min(gV.scroller.scrollHeight-gV.scroller.clientHeight,gT.scrollTop));gV.scrollbars.setScrollTop(gX.scrollTop);gV.scroller.scrollTop=gX.scrollTop}if(gT.scrollLeft!=null&&(gV.scroller.scrollLeft!=gT.scrollLeft||gT.forceScroll)){gX.scrollLeft=Math.max(0,Math.min(gV.scroller.scrollWidth-gV.scroller.clientWidth,gT.scrollLeft));gV.scrollbars.setScrollLeft(gX.scrollLeft);gV.scroller.scrollLeft=gX.scrollLeft;eZ(gY)}if(gT.scrollToPos){var gW=D(gY,gb(gX,gT.scrollToPos.from),gb(gX,gT.scrollToPos.to),gT.scrollToPos.margin);if(gT.scrollToPos.isCursor&&gY.state.focused){ek(gY,gW)}}var gU=gT.maybeHiddenMarkers,gQ=gT.maybeUnhiddenMarkers;if(gU){for(var gS=0;gS<gU.length;++gS){if(!gU[gS].lines.length){aF(gU[gS],"hide")}}}if(gQ){for(var gR=0;gR<gQ.length;++gR){if(gQ[gR].lines.length){aF(gQ[gR],"unhide")}}}if(gV.wrapper.offsetHeight){gX.scrollTop=gY.display.scroller.scrollTop}if(gT.changeObjs){aF(gY,"changes",gY,gT.changeObjs)}if(gT.update){gT.update.finish()}}function cY(i,gQ){if(i.curOp){return gQ()}cU(i);try{return gQ()}finally{an(i)}}function dc(i,gQ){return function(){if(i.curOp){return gQ.apply(i,arguments)}cU(i);try{return gQ.apply(i,arguments)}finally{an(i)}}}function dl(i){return function(){if(this.curOp){return i.apply(this,arguments)}cU(this);try{return i.apply(this,arguments)}finally{an(this)}}}function cP(i){return function(){var gQ=this.cm;if(!gQ||gQ.curOp){return i.apply(this,arguments)}cU(gQ);try{return i.apply(this,arguments)}finally{an(gQ)}}}function ai(gX,gV,gW,gY){if(gV==null){gV=gX.doc.first}if(gW==null){gW=gX.doc.first+gX.doc.size}if(!gY){gY=0}var gS=gX.display;if(gY&&gW<gS.viewTo&&(gS.updateLineNumbers==null||gS.updateLineNumbers>gV)){gS.updateLineNumbers=gV}gX.curOp.viewChanged=true;if(gV>=gS.viewTo){if(a8&&aX(gX.doc,gV)<gS.viewTo){eP(gX)}}else{if(gW<=gS.viewFrom){if(a8&&eh(gX.doc,gW+gY)>gS.viewFrom){eP(gX)}else{gS.viewFrom+=gY;gS.viewTo+=gY}}else{if(gV<=gS.viewFrom&&gW>=gS.viewTo){eP(gX)}else{if(gV<=gS.viewFrom){var gU=ds(gX,gW,gW+gY,1);if(gU){gS.view=gS.view.slice(gU.index);gS.viewFrom=gU.lineN;gS.viewTo+=gY}else{eP(gX)}}else{if(gW>=gS.viewTo){var gQ=ds(gX,gV,gV,-1);if(gQ){gS.view=gS.view.slice(0,gQ.index);gS.viewTo=gQ.lineN}else{eP(gX)}}else{var gT=ds(gX,gV,gV,-1);var gR=ds(gX,gW,gW+gY,1);if(gT&&gR){gS.view=gS.view.slice(0,gT.index).concat(fj(gX,gT.lineN,gR.lineN)).concat(gS.view.slice(gR.index));gS.viewTo+=gY}else{eP(gX)}}}}}}var i=gS.externalMeasured;if(i){if(gW<i.lineN){i.lineN+=gY}else{if(gV<i.lineN+i.size){gS.externalMeasured=null}}}}function R(gQ,gR,gU){gQ.curOp.viewChanged=true;var gV=gQ.display,gT=gQ.display.externalMeasured;if(gT&&gR>=gT.lineN&&gR<gT.lineN+gT.size){gV.externalMeasured=null}if(gR<gV.viewFrom||gR>=gV.viewTo){return}var gS=gV.view[dE(gQ,gR)];if(gS.node==null){return}var i=gS.changes||(gS.changes=[]);if(dw(i,gU)==-1){i.push(gU)}}function eP(i){i.display.viewFrom=i.display.viewTo=i.doc.first;i.display.view=[];i.display.viewOffset=0}function ds(gY,gS,gU,gR){var gV=dE(gY,gS),gX,gW=gY.display.view;if(!a8||gU==gY.doc.first+gY.doc.size){return{index:gV,lineN:gU}}var gQ=gY.display.viewFrom;for(var gT=0;gT<gV;gT++){gQ+=gW[gT].size}if(gQ!=gS){if(gR>0){if(gV==gW.length-1){return null}gX=(gQ+gW[gV].size)-gS;gV++}else{gX=gQ-gS}gS+=gX;gU+=gX}while(aX(gY.doc,gU)!=gU){if(gV==(gR<0?0:gW.length-1)){return null}gU+=gR*gW[gV-(gR<0?1:0)].size;gV+=gR}return{index:gV,lineN:gU}}function c3(i,gT,gS){var gR=i.display,gQ=gR.view;if(gQ.length==0||gT>=gR.viewTo||gS<=gR.viewFrom){gR.view=fj(i,gT,gS);gR.viewFrom=gT}else{if(gR.viewFrom>gT){gR.view=fj(i,gT,gR.viewFrom).concat(gR.view)}else{if(gR.viewFrom<gT){gR.view=gR.view.slice(dE(i,gT))}}gR.viewFrom=gT;if(gR.viewTo<gS){gR.view=gR.view.concat(fj(i,gR.viewTo,gS))}else{if(gR.viewTo>gS){gR.view=gR.view.slice(0,dE(i,gS))}}}gR.viewTo=gS}function dp(gQ){var gR=gQ.display.view,gU=0;for(var gT=0;gT<gR.length;gT++){var gS=gR[gT];if(!gS.hidden&&(!gS.node||gS.changes)){++gU}}return gU}function et(i,gQ){if(i.doc.mode.startState&&i.doc.frontier<i.display.viewTo){i.state.highlight.set(gQ,cG(c1,i))}}function c1(i){var gT=i.doc;if(gT.frontier<gT.first){gT.frontier=gT.first}if(gT.frontier>=i.display.viewTo){return}var gR=+new Date+i.options.workTime;var gS=cb(gT.mode,dO(i,gT.frontier));var gQ=[];gT.iter(gT.frontier,Math.min(gT.first+gT.size,i.display.viewTo+500),function(gU){if(gT.frontier>=i.display.viewFrom){var gX=gU.styles,g1=gU.text.length>i.options.maxHighlightLength;var gZ=fX(i,gU,g1?cb(gT.mode,gS):gS,true);gU.styles=gZ.styles;var gW=gU.styleClasses,gY=gZ.classes;if(gY){gU.styleClasses=gY}else{if(gW){gU.styleClasses=null}}var g0=!gX||gX.length!=gU.styles.length||gW!=gY&&(!gW||!gY||gW.bgClass!=gY.bgClass||gW.textClass!=gY.textClass);for(var gV=0;!g0&&gV<gX.length;++gV){g0=gX[gV]!=gU.styles[gV]}if(g0){gQ.push(gT.frontier)}gU.stateAfter=g1?gS:cb(gT.mode,gS)}else{if(gU.text.length<=i.options.maxHighlightLength){dK(i,gU.text,gS)}gU.stateAfter=gT.frontier%5==0?cb(gT.mode,gS):null}++gT.frontier;if(+new Date>gR){et(i,i.options.workDelay);return true}});if(gQ.length){cY(i,function(){for(var gU=0;gU<gQ.length;gU++){R(i,gQ[gU],"text")}})}}var aK=function(gQ,i,gR){var gS=gQ.display;this.viewport=i;this.visible=ce(gS,gQ.doc,i);this.editorIsHidden=!gS.wrapper.offsetWidth;this.wrapperHeight=gS.wrapper.clientHeight;this.wrapperWidth=gS.wrapper.clientWidth;this.oldDisplayWidth=dz(gQ);this.force=gR;this.dims=fB(gQ);this.events=[]};aK.prototype.signal=function(gQ,i){if(fI(gQ,i)){this.events.push(arguments)}};aK.prototype.finish=function(){var gR=this;for(var gQ=0;gQ<this.events.length;gQ++){aF.apply(null,gR.events[gQ])}};function J(i){var gQ=i.display;if(!gQ.scrollbarsClipped&&gQ.scroller.offsetWidth){gQ.nativeBarWidth=gQ.scroller.offsetWidth-gQ.scroller.clientWidth;gQ.heightForcer.style.height=c4(i)+"px";gQ.sizer.style.marginBottom=-gQ.nativeBarWidth+"px";gQ.sizer.style.borderRightWidth=c4(i)+"px";gQ.scrollbarsClipped=true}}function B(gY,gS){var gT=gY.display,gX=gY.doc;if(gS.editorIsHidden){eP(gY);return false}if(!gS.force&&gS.visible.from>=gT.viewFrom&&gS.visible.to<=gT.viewTo&&(gT.updateLineNumbers==null||gT.updateLineNumbers>=gT.viewTo)&&gT.renderedView==gT.view&&dp(gY)==0){return false}if(ej(gY)){eP(gY);gS.dims=fB(gY)}var gR=gX.first+gX.size;var gV=Math.max(gS.visible.from-gY.options.viewportMargin,gX.first);var gW=Math.min(gR,gS.visible.to+gY.options.viewportMargin);if(gT.viewFrom<gV&&gV-gT.viewFrom<20){gV=Math.max(gX.first,gT.viewFrom)}if(gT.viewTo>gW&&gT.viewTo-gW<20){gW=Math.min(gR,gT.viewTo)}if(a8){gV=aX(gY.doc,gV);gW=eh(gY.doc,gW)}var gQ=gV!=gT.viewFrom||gW!=gT.viewTo||gT.lastWrapHeight!=gS.wrapperHeight||gT.lastWrapWidth!=gS.wrapperWidth;c3(gY,gV,gW);gT.viewOffset=bT(fD(gY.doc,gT.viewFrom));gY.display.mover.style.top=gT.viewOffset+"px";var i=dp(gY);if(!gQ&&i==0&&!gS.force&&gT.renderedView==gT.view&&(gT.updateLineNumbers==null||gT.updateLineNumbers>=gT.viewTo)){return false}var gU=d0();if(i>4){gT.lineDiv.style.display="none"}cv(gY,gT.updateLineNumbers,gS.dims);if(i>4){gT.lineDiv.style.display=""}gT.renderedView=gT.view;if(gU&&d0()!=gU&&gU.offsetHeight){gU.focus()}ef(gT.cursorDiv);ef(gT.selectionDiv);gT.gutters.style.height=gT.sizer.style.minHeight=0;if(gQ){gT.lastWrapHeight=gS.wrapperHeight;gT.lastWrapWidth=gS.wrapperWidth;et(gY,400)}gT.updateLineNumbers=null;return true}function cs(gQ,gT){var i=gT.viewport;for(var gS=true;;gS=false){if(!gS||!gQ.options.lineWrapping||gT.oldDisplayWidth==dz(gQ)){if(i&&i.top!=null){i={top:Math.min(gQ.doc.height+bP(gQ.display)-c6(gQ),i.top)}}gT.visible=ce(gQ.display,gQ.doc,i);if(gT.visible.from>=gQ.display.viewFrom&&gT.visible.to<=gQ.display.viewTo){break}}if(!B(gQ,gT)){break}ba(gQ);var gR=dM(gQ);bJ(gQ);fm(gQ,gR);dL(gQ,gR)}gT.signal(gQ,"update",gQ);if(gQ.display.viewFrom!=gQ.display.reportedViewFrom||gQ.display.viewTo!=gQ.display.reportedViewTo){gT.signal(gQ,"viewportChange",gQ,gQ.display.viewFrom,gQ.display.viewTo);gQ.display.reportedViewFrom=gQ.display.viewFrom;gQ.display.reportedViewTo=gQ.display.viewTo}}function d6(gQ,i){var gS=new aK(gQ,i);if(B(gQ,gS)){ba(gQ);cs(gQ,gS);var gR=dM(gQ);bJ(gQ);fm(gQ,gR);dL(gQ,gR);gS.finish()}}function cv(g1,gS,g0){var gX=g1.display,g3=g1.options.lineNumbers;var gQ=gX.lineDiv,g2=gQ.firstChild;function gW(g4){var i=g4.nextSibling;if(db&&cf&&g1.display.currentWheelTarget==g4){g4.style.display="none"}else{g4.parentNode.removeChild(g4)}return i}var gY=gX.view,gV=gX.viewFrom;for(var gT=0;gT<gY.length;gT++){var gU=gY[gT];if(gU.hidden){}else{if(!gU.node||gU.node.parentNode!=gQ){var gR=aG(g1,gU,gV,g0);gQ.insertBefore(gR,g2)}else{while(g2!=gU.node){g2=gW(g2)}var gZ=g3&&gS!=null&&gS<=gV&&gU.lineNumber;if(gU.changes){if(dw(gU.changes,"gutter")>-1){gZ=false}ac(g1,gU,gV,g0)}if(gZ){ef(gU.lineNumber);gU.lineNumber.appendChild(document.createTextNode(eK(g1.options,gV)))}g2=gU.node.nextSibling}}gV+=gU.size}while(g2){g2=gW(g2)}}function df(i){var gQ=i.display.gutters.offsetWidth;i.display.sizer.style.marginLeft=gQ+"px"}function dL(i,gQ){i.display.sizer.style.minHeight=gQ.docHeight+"px";i.display.heightForcer.style.top=gQ.docHeight+"px";i.display.gutters.style.height=(gQ.docHeight+i.display.barHeight+c4(i))+"px"}function er(gQ){var gR=gQ.display.gutters,gV=gQ.options.gutters;ef(gR);var gS=0;for(;gS<gV.length;++gS){var gT=gV[gS];var gU=gR.appendChild(gz("div",null,"CodeMirror-gutter "+gT));if(gT=="CodeMirror-linenumbers"){gQ.display.lineGutter=gU;gU.style.width=(gQ.display.lineNumWidth||1)+"px"}}gR.style.display=gS?"":"none";df(gQ)}function cn(i){var gQ=dw(i.gutters,"CodeMirror-linenumbers");if(gQ==-1&&i.lineNumbers){i.gutters=i.gutters.concat(["CodeMirror-linenumbers"])}else{if(gQ>-1&&!i.lineNumbers){i.gutters=i.gutters.slice(0);i.gutters.splice(gQ,1)}}}var gy=function(i,gQ){this.ranges=i;this.primIndex=gQ};gy.prototype.primary=function(){return this.ranges[this.primIndex]};gy.prototype.equals=function(gQ){var gU=this;if(gQ==this){return true}if(gQ.primIndex!=this.primIndex||gQ.ranges.length!=this.ranges.length){return false}for(var gS=0;gS<this.ranges.length;gS++){var gR=gU.ranges[gS],gT=gQ.ranges[gS];if(!X(gR.anchor,gT.anchor)||!X(gR.head,gT.head)){return false}}return true};gy.prototype.deepCopy=function(){var gS=this;var gQ=[];for(var gR=0;gR<this.ranges.length;gR++){gQ[gR]=new ea(cr(gS.ranges[gR].anchor),cr(gS.ranges[gR].head))}return new gy(gQ,this.primIndex)};gy.prototype.somethingSelected=function(){var gR=this;for(var gQ=0;gQ<this.ranges.length;gQ++){if(!gR.ranges[gQ].empty()){return true}}return false};gy.prototype.contains=function(gU,gQ){var gT=this;if(!gQ){gQ=gU}for(var gS=0;gS<this.ranges.length;gS++){var gR=gT.ranges[gS];if(co(gQ,gR.from())>=0&&co(gU,gR.to())<=0){return gS}}return -1};var ea=function(i,gQ){this.anchor=i;this.head=gQ};ea.prototype.from=function(){return ar(this.anchor,this.head)};ea.prototype.to=function(){return bE(this.anchor,this.head)};ea.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function cH(gQ,gX){var gS=gQ[gX];gQ.sort(function(gZ,i){return co(gZ.from(),i.from())});gX=dw(gQ,gS);for(var gU=1;gU<gQ.length;gU++){var gY=gQ[gU],gR=gQ[gU-1];if(co(gR.to(),gY.from())>=0){var gV=ar(gR.from(),gY.from()),gW=bE(gR.to(),gY.to());var gT=gR.empty()?gY.from()==gY.head:gR.from()==gR.head;if(gU<=gX){--gX}gQ.splice(--gU,2,new ea(gT?gW:gV,gT?gV:gW))}}return new gy(gQ,gX)}function fe(i,gQ){return new gy([new ea(i,gQ||i)],0)}function c8(i){if(!i.text){return i.to}return W(i.from.line+i.text.length-1,f6(i.text).length+(i.text.length==1?i.from.ch:0))}function b7(gS,gR){if(co(gS,gR.from)<0){return gS}if(co(gS,gR.to)<=0){return c8(gR)}var i=gS.line+gR.text.length-(gR.to.line-gR.from.line)-1,gQ=gS.ch;if(gS.line==gR.to.line){gQ+=c8(gR).ch-gR.to.ch}return W(i,gQ)}function fH(gT,gU){var gR=[];for(var gS=0;gS<gT.sel.ranges.length;gS++){var gQ=gT.sel.ranges[gS];gR.push(new ea(b7(gQ.anchor,gU),b7(gQ.head,gU)))}return cH(gR,gT.sel.primIndex)}function bA(gR,gQ,i){if(gR.line==gQ.line){return W(i.line,gR.ch-gQ.ch+i.ch)}else{return W(i.line+(gR.line-gQ.line),gR.ch)}}function ag(g0,gX,gR){var gS=[];var gQ=W(g0.first,0),g1=gQ;for(var gU=0;gU<gX.length;gU++){var gW=gX[gU];var gZ=bA(gW.from,gQ,g1);var gY=bA(c8(gW),gQ,g1);gQ=gW.to;g1=gY;if(gR=="around"){var gV=g0.sel.ranges[gU],gT=co(gV.head,gV.anchor)<0;gS[gU]=new ea(gT?gY:gZ,gT?gZ:gY)}else{gS[gU]=new ea(gZ,gZ)}}return new gy(gS,g0.sel.primIndex)}function bx(i){i.doc.mode=fZ(i.options,i.doc.modeOption);eC(i)}function eC(i){i.doc.iter(function(gQ){if(gQ.stateAfter){gQ.stateAfter=null}if(gQ.styles){gQ.styles=null}});i.doc.frontier=i.doc.first;et(i,100);i.state.modeGen++;if(i.curOp){ai(i)}}function d5(i,gQ){return gQ.from.ch==0&&gQ.to.ch==0&&f6(gQ.text)==""&&(!i.cm||i.cm.options.wholeLineUpdateBefore)}function fW(g6,gZ,gT,gX){function gS(g7){return gT?gT[g7]:null}function gY(g7,g9,g8){eE(g7,g9,g8,gX);af(g7,"change",g7,gZ)}function g3(ha,g8){var g7=[];for(var g9=ha;g9<g8;++g9){g7.push(new gC(g1[g9],gS(g9),gX))}return g7}var g4=gZ.from,gQ=gZ.to,g1=gZ.text;var g0=fD(g6,g4.line),i=fD(g6,gQ.line);var gR=f6(g1),g5=gS(g1.length-1),g2=gQ.line-g4.line;if(gZ.full){g6.insert(0,g3(0,g1.length));g6.remove(g1.length,g6.size-g1.length)}else{if(d5(g6,gZ)){var gW=g3(0,g1.length-1);gY(i,i.text,g5);if(g2){g6.remove(g4.line,g2)}if(gW.length){g6.insert(g4.line,gW)}}else{if(g0==i){if(g1.length==1){gY(g0,g0.text.slice(0,g4.ch)+gR+g0.text.slice(gQ.ch),g5)}else{var gV=g3(1,g1.length-1);gV.push(new gC(gR+g0.text.slice(gQ.ch),g5,gX));gY(g0,g0.text.slice(0,g4.ch)+g1[0],gS(0));g6.insert(g4.line+1,gV)}}else{if(g1.length==1){gY(g0,g0.text.slice(0,g4.ch)+g1[0]+i.text.slice(gQ.ch),gS(0));g6.remove(g4.line+1,g2)}else{gY(g0,g0.text.slice(0,g4.ch)+g1[0],gS(0));gY(i,gR+i.text.slice(gQ.ch),g5);var gU=g3(1,g1.length-1);if(g2>1){g6.remove(g4.line+1,g2-1)}g6.insert(g4.line+1,gU)}}}}af(g6,"change",g6,gZ)}function el(gS,gR,gQ){function i(gY,gW,gU){if(gY.linked){for(var gV=0;gV<gY.linked.length;++gV){var gT=gY.linked[gV];if(gT.doc==gW){continue}var gX=gU&&gT.sharedHist;if(gQ&&!gX){continue}gR(gT.doc,gX);i(gT.doc,gY,gX)}}}i(gS,null,true)}function eq(i,gQ){if(gQ.cm){throw new Error("This document is already in use.")}i.doc=gQ;gQ.cm=i;Z(i);bx(i);if(!i.options.lineWrapping){f(i)}i.options.mode=gQ.modeOption;ai(i)}function go(i){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=i||1}function dI(i,gR){var gQ={from:cr(gR.from),to:c8(gR),text:gA(i,gR.from,gR.to)};b6(i,gQ,gR.from.line,gR.to.line+1);el(i,function(gS){return b6(gS,gQ,gR.from.line,gR.to.line+1)},true);return gQ}function f1(gQ){while(gQ.length){var i=f6(gQ);if(i.ranges){gQ.pop()}else{break}}}function e9(gQ,i){if(i){f1(gQ.done);return f6(gQ.done)}else{if(gQ.done.length&&!f6(gQ.done).ranges){return f6(gQ.done)}else{if(gQ.done.length>1&&!gQ.done[gQ.done.length-2].ranges){gQ.done.pop();return f6(gQ.done)}}}}function gd(gV,gT,i,gS){var gR=gV.history;gR.undone.length=0;var gQ=+new Date,gW;var gX;if((gR.lastOp==gS||gR.lastOrigin==gT.origin&&gT.origin&&((gT.origin.charAt(0)=="+"&&gV.cm&&gR.lastModTime>gQ-gV.cm.options.historyEventDelay)||gT.origin.charAt(0)=="*"))&&(gW=e9(gR,gR.lastOp==gS))){gX=f6(gW.changes);if(co(gT.from,gT.to)==0&&co(gT.from,gX.to)==0){gX.to=c8(gT)}else{gW.changes.push(dI(gV,gT))}}else{var gU=f6(gR.done);if(!gU||!gU.ranges){c0(gV.sel,gR.done)}gW={changes:[dI(gV,gT)],generation:gR.generation};gR.done.push(gW);while(gR.done.length>gR.undoDepth){gR.done.shift();if(!gR.done[0].ranges){gR.done.shift()}}}gR.done.push(i);gR.generation=++gR.maxGeneration;gR.lastModTime=gR.lastSelTime=gQ;gR.lastOp=gR.lastSelOp=gS;gR.lastOrigin=gR.lastSelOrigin=gT.origin;if(!gX){aF(gV,"historyAdded")}}function bH(gT,i,gR,gS){var gQ=i.charAt(0);return gQ=="*"||gQ=="+"&&gR.ranges.length==gS.ranges.length&&gR.somethingSelected()==gS.somethingSelected()&&new Date-gT.history.lastSelTime<=(gT.cm?gT.cm.options.historyEventDelay:500)}function gJ(gU,gS,i,gR){var gT=gU.history,gQ=gR&&gR.origin;if(i==gT.lastSelOp||(gQ&&gT.lastSelOrigin==gQ&&(gT.lastModTime==gT.lastSelTime&&gT.lastOrigin==gQ||bH(gU,gQ,f6(gT.done),gS)))){gT.done[gT.done.length-1]=gS}else{c0(gS,gT.done)}gT.lastSelTime=+new Date;gT.lastSelOrigin=gQ;gT.lastSelOp=i;if(gR&&gR.clearRedo!==false){f1(gT.undone)}}function c0(gQ,i){var gR=f6(i);if(!(gR&&gR.ranges&&gR.equals(gQ))){i.push(gQ)}}function b6(gQ,gU,gT,gS){var i=gU["spans_"+gQ.id],gR=0;gQ.iter(Math.max(gQ.first,gT),Math.min(gQ.first+gQ.size,gS),function(gV){if(gV.markedSpans){(i||(i=gU["spans_"+gQ.id]={}))[gR]=gV.markedSpans}++gR})}function bm(gS){if(!gS){return null}var gQ;for(var gR=0;gR<gS.length;++gR){if(gS[gR].marker.explicitlyCleared){if(!gQ){gQ=gS.slice(0,gR)}}else{if(gQ){gQ.push(gS[gR])}}}return !gQ?gS:gQ.length?gQ:null}function cc(gT,gU){var gS=gU["spans_"+gT.id];if(!gS){return null}var gQ=[];for(var gR=0;gR<gU.text.length;++gR){gQ.push(bm(gS[gR]))}return gQ}function en(gY,gW){var gQ=cc(gY,gW);var gZ=eA(gY,gW);if(!gQ){return gZ}if(!gZ){return gQ}for(var gT=0;gT<gQ.length;++gT){var gU=gQ[gT],gV=gZ[gT];if(gU&&gV){spans:for(var gS=0;gS<gV.length;++gS){var gX=gV[gS];for(var gR=0;gR<gU.length;++gR){if(gU[gR].marker==gX.marker){continue spans}}gU.push(gX)}}else{if(gV){gQ[gT]=gV}}}return gQ}function bW(g1,gT,g0){var gR=[];for(var gW=0;gW<g1.length;++gW){var gS=g1[gW];if(gS.ranges){gR.push(g0?gy.prototype.deepCopy.call(gS):gS);continue}var gY=gS.changes,gZ=[];gR.push({changes:gZ});for(var gV=0;gV<gY.length;++gV){var gX=gY[gV],gU=(void 0);gZ.push({from:gX.from,to:gX.to,text:gX.text});if(gT){for(var gQ in gX){if(gU=gQ.match(/^spans_(\d+)$/)){if(dw(gT,Number(gU[1]))>-1){f6(gZ)[gQ]=gX[gQ];delete gX[gQ]}}}}}}return gR}function fS(gU,gQ,gT,i){if(gU.cm&&gU.cm.display.shift||gU.extend){var gS=gQ.anchor;if(i){var gR=co(gT,gS)<0;if(gR!=(co(i,gS)<0)){gS=gT;gT=i}else{if(gR!=(co(gT,i)<0)){gT=i}}}return new ea(gS,gT)}else{return new ea(i||gT,gT)}}function gt(gS,gR,i,gQ){b1(gS,new gy([fS(gS,gS.sel.primary(),gR,i)],0),gQ)}function aw(gV,gU,gS){var gR=[];for(var gT=0;gT<gV.sel.ranges.length;gT++){gR[gT]=fS(gV,gV.sel.ranges[gT],gU[gT],null)}var gQ=cH(gR,gV.sel.primIndex);b1(gV,gQ,gS)}function e(gU,gT,gR,gS){var gQ=gU.sel.ranges.slice(0);gQ[gT]=gR;b1(gU,cH(gQ,gU.sel.primIndex),gS)}function F(gS,gQ,gR,i){b1(gS,fe(gQ,gR),i)}function b(gS,gQ,i){var gR={ranges:gQ.ranges,update:function(gT){var gV=this;this.ranges=[];for(var gU=0;gU<gT.length;gU++){gV.ranges[gU]=new ea(gb(gS,gT[gU].anchor),gb(gS,gT[gU].head))}},origin:i&&i.origin};aF(gS,"beforeSelectionChange",gS,gR);if(gS.cm){aF(gS.cm,"beforeSelectionChange",gS.cm,gR)}if(gR.ranges!=gQ.ranges){return cH(gR.ranges,gR.ranges.length-1)}else{return gQ}}function fw(gT,gS,gQ){var i=gT.history.done,gR=f6(i);if(gR&&gR.ranges){i[i.length-1]=gS;eG(gT,gS,gQ)}else{b1(gT,gS,gQ)}}function b1(gR,gQ,i){eG(gR,gQ,i);gJ(gR,gR.sel,gR.cm?gR.cm.curOp.id:NaN,i)}function eG(gS,gR,gQ){if(fI(gS,"beforeSelectionChange")||gS.cm&&fI(gS.cm,"beforeSelectionChange")){gR=b(gS,gR,gQ)}var i=gQ&&gQ.bias||(co(gR.primary().head,gS.sel.primary().head)<0?-1:1);dk(gS,o(gS,gR,i,true));if(!(gQ&&gQ.scroll===false)&&gS.cm){f5(gS.cm)}}function dk(gQ,i){if(i.equals(gQ.sel)){return}gQ.sel=i;if(gQ.cm){gQ.cm.curOp.updateInput=gQ.cm.curOp.selectionChanged=true;V(gQ.cm)}af(gQ,"cursorActivity",gQ)}function eQ(i){dk(i,o(i,i.sel,null,false),aa)}function o(gZ,gQ,gW,gX){var gT;for(var gU=0;gU<gQ.ranges.length;gU++){var gV=gQ.ranges[gU];var gR=gQ.ranges.length==gZ.sel.ranges.length&&gZ.sel.ranges[gU];var gY=b2(gZ,gV.anchor,gR&&gR.anchor,gW,gX);var gS=b2(gZ,gV.head,gR&&gR.head,gW,gX);if(gT||gY!=gV.anchor||gS!=gV.head){if(!gT){gT=gQ.ranges.slice(0,gU)}gT[gU]=new ea(gY,gS)}}return gT?cH(gT,gQ.primIndex):gQ}function e5(g0,gY,gT,gS,gW){var g1=fD(g0,gY.line);if(g1.markedSpans){for(var gU=0;gU<g1.markedSpans.length;++gU){var gQ=g1.markedSpans[gU],gR=gQ.marker;if((gQ.from==null||(gR.inclusiveLeft?gQ.from<=gY.ch:gQ.from<gY.ch))&&(gQ.to==null||(gR.inclusiveRight?gQ.to>=gY.ch:gQ.to>gY.ch))){if(gW){aF(gR,"beforeCursorEnter");if(gR.explicitlyCleared){if(!g1.markedSpans){break}else{--gU;continue}}}if(!gR.atomic){continue}if(gT){var gX=gR.find(gS<0?1:-1),gZ=(void 0);if(gS<0?gR.inclusiveRight:gR.inclusiveLeft){gX=gM(g0,gX,-gS,gX&&gX.line==gY.line?g1:null)}if(gX&&gX.line==gY.line&&(gZ=co(gX,gT))&&(gS<0?gZ<0:gZ>0)){return e5(g0,gX,gY,gS,gW)}}var gV=gR.find(gS<0?-1:1);if(gS<0?gR.inclusiveLeft:gR.inclusiveRight){gV=gM(g0,gV,gS,gV.line==gY.line?g1:null)}return gV?e5(g0,gV,gY,gS,gW):null}}}return gY}function b2(gU,gV,gS,gQ,i){var gR=gQ||1;var gT=e5(gU,gV,gS,gR,i)||(!i&&e5(gU,gV,gS,gR,true))||e5(gU,gV,gS,-gR,i)||(!i&&e5(gU,gV,gS,-gR,true));if(!gT){gU.cantEdit=true;return W(gU.first,0)}return gT}function gM(gR,gS,gQ,i){if(gQ<0&&gS.ch==0){if(gS.line>gR.first){return gb(gR,W(gS.line-1))}else{return null}}else{if(gQ>0&&gS.ch==(i||fD(gR,gS.line)).text.length){if(gS.line<gR.first+gR.size-1){return W(gS.line+1,0)}else{return null}}else{return new W(gS.line,gS.ch+gQ)}}}function am(i){i.setSelection(W(i.firstLine(),0),W(i.lastLine()),aa)}function d3(gQ,gS,gR){var i={canceled:false,from:gS.from,to:gS.to,text:gS.text,origin:gS.origin,cancel:function(){return i.canceled=true}};if(gR){i.update=function(gW,gV,gU,gT){if(gW){i.from=gb(gQ,gW)}if(gV){i.to=gb(gQ,gV)}if(gU){i.text=gU}if(gT!==undefined){i.origin=gT}}}aF(gQ,"beforeChange",gQ,i);if(gQ.cm){aF(gQ.cm,"beforeChange",gQ.cm,i)}if(i.canceled){return null}return{from:i.from,to:i.to,text:i.text,origin:i.origin}}function bh(gT,gU,gS){if(gT.cm){if(!gT.cm.curOp){return dc(gT.cm,bh)(gT,gU,gS)}if(gT.cm.state.suppressEdits){return}}if(fI(gT,"beforeChange")||gT.cm&&fI(gT.cm,"beforeChange")){gU=d3(gT,gU,true);if(!gU){return}}var gR=gK&&!gS&&cT(gT,gU.from,gU.to);if(gR){for(var gQ=gR.length-1;gQ>=0;--gQ){K(gT,{from:gR[gQ].from,to:gR[gQ].to,text:gQ?[""]:gU.text})}}else{K(gT,gU)}}function K(gR,gS){if(gS.text.length==1&&gS.text[0]==""&&co(gS.from,gS.to)==0){return}var gQ=fH(gR,gS);gd(gR,gS,gQ,gR.cm?gR.cm.curOp.id:NaN);es(gR,gS,gQ,eA(gR,gS));var i=[];el(gR,function(gU,gT){if(!gT&&dw(i,gU.history)==-1){dQ(gU.history,gS);i.push(gU.history)}es(gU,gS,null,eA(gU,gS))})}function cg(g1,g0,g3){if(g1.cm&&g1.cm.state.suppressEdits&&!g3){return}var gZ=g1.history,gR,gT=g1.sel;var gQ=g0=="undo"?gZ.done:gZ.undone,g2=g0=="undo"?gZ.undone:gZ.done;var gW=0;for(;gW<gQ.length;gW++){gR=gQ[gW];if(g3?gR.ranges&&!gR.equals(g1.sel):!gR.ranges){break}}if(gW==gQ.length){return}gZ.lastOrigin=gZ.lastSelOrigin=null;for(;;){gR=gQ.pop();if(gR.ranges){c0(gR,g2);if(g3&&!gR.equals(g1.sel)){b1(g1,gR,{clearRedo:false});return}gT=gR}else{break}}var gY=[];c0(gT,g2);g2.push({changes:gY,generation:gZ.generation});gZ.generation=gR.generation||++gZ.maxGeneration;var gS=fI(g1,"beforeChange")||g1.cm&&fI(g1.cm,"beforeChange");var gX=function(g4){var g7=gR.changes[g4];g7.origin=g0;if(gS&&!d3(g1,g7,false)){gQ.length=0;return{}}gY.push(dI(g1,g7));var g6=g4?fH(g1,g7):f6(gQ);es(g1,g7,g6,en(g1,g7));if(!g4&&g1.cm){g1.cm.scrollIntoView({from:g7.from,to:c8(g7)})}var g5=[];el(g1,function(g8,i){if(!i&&dw(g5,g8.history)==-1){dQ(g8.history,g7);g5.push(g8.history)}es(g8,g7,null,en(g8,g7))})};for(var gU=gR.changes.length-1;gU>=0;--gU){var gV=gX(gU);if(gV){return gV.v}}}function fL(gQ,gS){if(gS==0){return}gQ.first+=gS;gQ.sel=new gy(b0(gQ.sel.ranges,function(gT){return new ea(W(gT.anchor.line+gS,gT.anchor.ch),W(gT.head.line+gS,gT.head.ch))}),gQ.sel.primIndex);if(gQ.cm){ai(gQ.cm,gQ.first,gQ.first-gS,gS);for(var gR=gQ.cm.display,i=gR.viewFrom;i<gR.viewTo;i++){R(gQ.cm,i,"gutter")}}}function es(gT,gU,gS,gQ){if(gT.cm&&!gT.cm.curOp){return dc(gT.cm,es)(gT,gU,gS,gQ)}if(gU.to.line<gT.first){fL(gT,gU.text.length-1-(gU.to.line-gU.from.line));return}if(gU.from.line>gT.lastLine()){return}if(gU.from.line<gT.first){var i=gU.text.length-1-(gT.first-gU.from.line);fL(gT,i);gU={from:W(gT.first,0),to:W(gU.to.line+i,gU.to.ch),text:[f6(gU.text)],origin:gU.origin}}var gR=gT.lastLine();if(gU.to.line>gR){gU={from:gU.from,to:W(gR,fD(gT,gR).text.length),text:[gU.text[0]],origin:gU.origin}}gU.removed=gA(gT,gU.from,gU.to);if(!gS){gS=fH(gT,gU)}if(gT.cm){aJ(gT.cm,gU,gQ)}else{fW(gT,gU,gQ)}eG(gT,gS,aa)}function aJ(g0,gW,gU){var gZ=g0.doc,gV=g0.display,gX=gW.from,gY=gW.to;var i=false,gT=gX.line;if(!g0.options.lineWrapping){gT=bU(y(fD(gZ,gX.line)));gZ.iter(gT,gY.line+1,function(g2){if(g2==gV.maxLine){i=true;return true}})}if(gZ.sel.contains(gW.from,gW.to)>-1){V(g0)}fW(gZ,gW,gU,bf(g0));if(!g0.options.lineWrapping){gZ.iter(gT,gX.line+gW.text.length,function(g3){var g2=eD(g3);if(g2>gV.maxLineLength){gV.maxLine=g3;gV.maxLineLength=g2;gV.maxLineChanged=true;i=false}});if(i){g0.curOp.updateMaxLine=true}}gZ.frontier=Math.min(gZ.frontier,gX.line);et(g0,400);var g1=gW.text.length-(gY.line-gX.line)-1;if(gW.full){ai(g0)}else{if(gX.line==gY.line&&gW.text.length==1&&!d5(g0.doc,gW)){R(g0,gX.line,"text")}else{ai(g0,gX.line,gY.line+1,g1)}}var gR=fI(g0,"changes"),gS=fI(g0,"change");if(gS||gR){var gQ={from:gX,to:gY,text:gW.text,removed:gW.removed,origin:gW.origin};if(gS){af(g0,"change",g0,gQ)}if(gR){(g0.curOp.changeObjs||(g0.curOp.changeObjs=[])).push(gQ)}}g0.display.selForContextMenu=null}function a2(gS,gR,gU,gT,i){if(!gT){gT=gU}if(co(gT,gU)<0){var gQ=gT;gT=gU;gU=gQ}if(typeof gR=="string"){gR=gS.splitLines(gR)}bh(gS,{from:gU,to:gT,text:gR,origin:i})}function I(gS,gR,gQ,i){if(gQ<gS.line){gS.line+=i}else{if(gR<gS.line){gS.line=gR;gS.ch=0}}}function fF(gU,gW,gX,gY){for(var gT=0;gT<gU.length;++gT){var gQ=gU[gT],gV=true;if(gQ.ranges){if(!gQ.copied){gQ=gU[gT]=gQ.deepCopy();gQ.copied=true}for(var gS=0;gS<gQ.ranges.length;gS++){I(gQ.ranges[gS].anchor,gW,gX,gY);I(gQ.ranges[gS].head,gW,gX,gY)}continue}for(var gR=0;gR<gQ.changes.length;++gR){var gZ=gQ.changes[gR];if(gX<gZ.from.line){gZ.from=W(gZ.from.line+gY,gZ.from.ch);gZ.to=W(gZ.to.line+gY,gZ.to.ch)}else{if(gW<=gZ.to.line){gV=false;break}}}if(!gV){gU.splice(0,gT+1);gT=0}}}function dQ(gQ,gT){var gS=gT.from.line,gR=gT.to.line,i=gT.text.length-(gR-gS)-1;fF(gQ.done,gS,gR,i);fF(gQ.undone,gS,gR,i)}function eS(gS,gR,i,gU){var gT=gR,gQ=gR;if(typeof gR=="number"){gQ=fD(gS,dg(gS,gR))}else{gT=bU(gR)}if(gT==null){return null}if(gU(gQ,gT)&&gS.cm){R(gS.cm,gT,i)}return gQ}var fn=function(gR){var gT=this;this.lines=gR;this.parent=null;var gQ=0;for(var gS=0;gS<gR.length;++gS){gR[gS].parent=gT;gQ+=gR[gS].height}this.height=gQ};fn.prototype.chunkSize=function(){return this.lines.length};fn.prototype.removeInner=function(gQ,gV){var gU=this;for(var gS=gQ,gT=gQ+gV;gS<gT;++gS){var gR=gU.lines[gS];gU.height-=gR.height;bI(gR);af(gR,"delete")}this.lines.splice(gQ,gV)};fn.prototype.collapse=function(i){i.push.apply(i,this.lines)};fn.prototype.insertInner=function(gR,gS,gQ){var gU=this;this.height+=gQ;this.lines=this.lines.slice(0,gR).concat(gS).concat(this.lines.slice(gR));for(var gT=0;gT<gS.length;++gT){gS[gT].parent=gU}};fn.prototype.iterN=function(i,gT,gS){var gR=this;for(var gQ=i+gT;i<gQ;++i){if(gS(gR.lines[i])){return true}}};var fV=function(gT){var gV=this;this.children=gT;var gS=0,gQ=0;for(var gR=0;gR<gT.length;++gR){var gU=gT[gR];gS+=gU.chunkSize();gQ+=gU.height;gU.parent=gV}this.size=gS;this.height=gQ;this.parent=null};fV.prototype.chunkSize=function(){return this.size};fV.prototype.removeInner=function(gS,gR){var gU=this;this.size-=gR;for(var gT=0;gT<this.children.length;++gT){var gQ=gU.children[gT],gW=gQ.chunkSize();if(gS<gW){var gV=Math.min(gR,gW-gS),gX=gQ.height;gQ.removeInner(gS,gV);gU.height-=gX-gQ.height;if(gW==gV){gU.children.splice(gT--,1);gQ.parent=null}if((gR-=gV)==0){break}gS=0}else{gS-=gW}}if(this.size-gR<25&&(this.children.length>1||!(this.children[0] instanceof fn))){var gY=[];this.collapse(gY);this.children=[new fn(gY)];this.children[0].parent=this}};fV.prototype.collapse=function(gQ){var gS=this;for(var gR=0;gR<this.children.length;++gR){gS.children[gR].collapse(gQ)}};fV.prototype.insertInner=function(gR,gZ,gY){var gU=this;this.size+=gZ.length;this.height+=gY;for(var gT=0;gT<this.children.length;++gT){var gQ=gU.children[gT],gW=gQ.chunkSize();if(gR<=gW){gQ.insertInner(gR,gZ,gY);if(gQ.lines&&gQ.lines.length>50){var gS=gQ.lines.length%25+25;for(var gX=gS;gX<gQ.lines.length;){var gV=new fn(gQ.lines.slice(gX,gX+=25));gQ.height-=gV.height;gU.children.splice(++gT,0,gV);gV.parent=gU}gQ.lines=gQ.lines.slice(0,gS);gU.maybeSpill()}break}gR-=gW}};fV.prototype.maybeSpill=function(){if(this.children.length<=10){return}var gS=this;do{var gQ=gS.children.splice(gS.children.length-5,5);var gR=new fV(gQ);if(!gS.parent){var gT=new fV(gS.children);gT.parent=gS;gS.children=[gT,gR];gS=gT}else{gS.size-=gR.size;gS.height-=gR.height;var i=dw(gS.parent.children,gS);gS.parent.children.splice(i+1,0,gR)}gR.parent=gS.parent}while(gS.children.length>10);gS.parent.maybeSpill()};fV.prototype.iterN=function(gQ,gX,gW){var gV=this;for(var gR=0;gR<this.children.length;++gR){var gU=gV.children[gR],gT=gU.chunkSize();if(gQ<gT){var gS=Math.min(gX,gT-gQ);if(gU.iterN(gQ,gS,gW)){return true}if((gX-=gS)==0){break}gQ=0}else{gQ-=gT}}};var dN=function(gS,gR,i){var gT=this;if(i){for(var gQ in i){if(i.hasOwnProperty(gQ)){gT[gQ]=i[gQ]}}}this.doc=gS;this.node=gR};dN.prototype.clear=function(){var gW=this;var gR=this.doc.cm,gT=this.line.widgets,gS=this.line,gV=bU(gS);if(gV==null||!gT){return}for(var gU=0;gU<gT.length;++gU){if(gT[gU]==gW){gT.splice(gU--,1)}}if(!gT.length){gS.widgets=null}var gQ=c9(this);gD(gS,Math.max(0,gS.height-gQ));if(gR){cY(gR,function(){ec(gR,gS,-gQ);R(gR,gV,"widget")});af(gR,"lineWidgetCleared",gR,this,gV)}};dN.prototype.changed=function(){var gT=this;var gQ=this.height,i=this.doc.cm,gR=this.line;this.height=null;var gS=c9(this)-gQ;if(!gS){return}gD(gR,gR.height+gS);if(i){cY(i,function(){i.curOp.forceUpdate=true;ec(i,gR,gS);af(i,"lineWidgetChanged",i,gT,bU(gR))})}};bG(dN);function ec(i,gQ,gR){if(bT(gQ)<((i.curOp&&i.curOp.scrollTop)||i.doc.scrollTop)){cX(i,null,gR)}}function bN(gU,gT,gR,gQ){var gS=new dN(gU,gR,gQ);var i=gU.cm;if(i&&gS.noHScroll){i.display.alignWidgets=true}eS(gU,gT,"widget",function(gW){var gX=gW.widgets||(gW.widgets=[]);if(gS.insertAt==null){gX.push(gS)}else{gX.splice(Math.min(gX.length-1,Math.max(0,gS.insertAt)),0,gS)}gS.line=gW;if(i&&!fT(gU,gW)){var gV=bT(gW)<gU.scrollTop;gD(gW,gW.height+c9(gS));if(gV){cX(i,null,gS.height)}i.curOp.forceUpdate=true}return true});af(i,"lineWidgetAdded",i,gS,typeof gT=="number"?gT:bU(gT));return gS}var a5=0;var Q=function(gQ,i){this.lines=[];this.type=i;this.doc=gQ;this.id=++a5};Q.prototype.clear=function(){var gV=this;if(this.explicitlyCleared){return}var gZ=this.doc.cm,gS=gZ&&!gZ.curOp;if(gS){cU(gZ)}if(fI(this,"clear")){var g0=this.find();if(g0){af(this,"clear",g0.from,g0.to)}}var gT=null,gX=null;for(var gU=0;gU<this.lines.length;++gU){var g1=gV.lines[gU];var gY=fy(g1.markedSpans,gV);if(gZ&&!gV.collapsed){R(gZ,bU(g1),"text")}else{if(gZ){if(gY.to!=null){gX=bU(g1)}if(gY.from!=null){gT=bU(g1)}}}g1.markedSpans=e3(g1.markedSpans,gY);if(gY.from==null&&gV.collapsed&&!fT(gV.doc,g1)&&gZ){gD(g1,aZ(gZ.display))}}if(gZ&&this.collapsed&&!gZ.options.lineWrapping){for(var gR=0;gR<this.lines.length;++gR){var gQ=y(gV.lines[gR]),gW=eD(gQ);if(gW>gZ.display.maxLineLength){gZ.display.maxLine=gQ;gZ.display.maxLineLength=gW;gZ.display.maxLineChanged=true}}}if(gT!=null&&gZ&&this.collapsed){ai(gZ,gT,gX+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(gZ){eQ(gZ.doc)}}if(gZ){af(gZ,"markerCleared",gZ,this,gT,gX)}if(gS){an(gZ)}if(this.parent){this.parent.clear()}};Q.prototype.find=function(gT,gR){var gX=this;if(gT==null&&this.type=="bookmark"){gT=1}var gW,gV;for(var gS=0;gS<this.lines.length;++gS){var gQ=gX.lines[gS];var gU=fy(gQ.markedSpans,gX);if(gU.from!=null){gW=W(gR?gQ:bU(gQ),gU.from);if(gT==-1){return gW}}if(gU.to!=null){gV=W(gR?gQ:bU(gQ),gU.to);if(gT==1){return gV}}}return gW&&{from:gW,to:gV}};Q.prototype.changed=function(){var gS=this;var gR=this.find(-1,true),gQ=this,i=this.doc.cm;if(!gR||!i){return}cY(i,function(){var gU=gR.line,gV=bU(gR.line);var gT=fA(i,gV);if(gT){av(gT);i.curOp.selectionChanged=i.curOp.forceUpdate=true}i.curOp.updateMaxLine=true;if(!fT(gQ.doc,gU)&&gQ.height!=null){var gX=gQ.height;gQ.height=null;var gW=c9(gQ)-gX;if(gW){gD(gU,gU.height+gW)}}af(i,"markerChanged",i,gS)})};Q.prototype.attachLine=function(i){if(!this.lines.length&&this.doc.cm){var gQ=this.doc.cm.curOp;if(!gQ.maybeHiddenMarkers||dw(gQ.maybeHiddenMarkers,this)==-1){(gQ.maybeUnhiddenMarkers||(gQ.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(i)};Q.prototype.detachLine=function(i){this.lines.splice(dw(this.lines,i),1);if(!this.lines.length&&this.doc.cm){var gQ=this.doc.cm.curOp;(gQ.maybeHiddenMarkers||(gQ.maybeHiddenMarkers=[])).push(this)}};bG(Q);function e0(gY,gW,gX,g0,gU){if(g0&&g0.shared){return N(gY,gW,gX,g0,gU)}if(gY.cm&&!gY.cm.curOp){return dc(gY.cm,e0)(gY,gW,gX,g0,gU)}var gT=new Q(gY,gU),gZ=co(gW,gX);if(g0){aO(g0,gT,false)}if(gZ>0||gZ==0&&gT.clearWhenEmpty!==false){return gT}if(gT.replacedWith){gT.collapsed=true;gT.widgetNode=gz("span",[gT.replacedWith],"CodeMirror-widget");gT.widgetNode.setAttribute("role","presentation");if(!g0.handleMouseEvents){gT.widgetNode.setAttribute("cm-ignore-events","true")}if(g0.insertLeft){gT.widgetNode.insertLeft=true}}if(gT.collapsed){if(z(gY,gW.line,gW,gX,gT)||gW.line!=gX.line&&z(gY,gX.line,gW,gX,gT)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}bD()}if(gT.addToHistory){gd(gY,{from:gW,to:gX,origin:"markText"},gY.sel,NaN)}var gR=gW.line,gV=gY.cm,gQ;gY.iter(gR,gX.line+1,function(i){if(gV&&gT.collapsed&&!gV.options.lineWrapping&&y(i)==gV.display.maxLine){gQ=true}if(gT.collapsed&&gR!=gW.line){gD(i,0)}cm(i,new ey(gT,gR==gW.line?gW.ch:null,gR==gX.line?gX.ch:null));++gR});if(gT.collapsed){gY.iter(gW.line,gX.line+1,function(i){if(fT(gY,i)){gD(i,0)}})}if(gT.clearOnEnter){b4(gT,"beforeCursorEnter",function(){return gT.clear()})}if(gT.readOnly){fY();if(gY.history.done.length||gY.history.undone.length){gY.clearHistory()}}if(gT.collapsed){gT.id=++a5;gT.atomic=true}if(gV){if(gQ){gV.curOp.updateMaxLine=true}if(gT.collapsed){ai(gV,gW.line,gX.line+1)}else{if(gT.className||gT.title||gT.startStyle||gT.endStyle||gT.css){for(var gS=gW.line;gS<=gX.line;gS++){R(gV,gS,"text")}}}if(gT.atomic){eQ(gV.doc)}af(gV,"markerAdded",gV,gT)}return gT}var x=function(gS,gR){var gT=this;this.markers=gS;this.primary=gR;for(var gQ=0;gQ<gS.length;++gQ){gS[gQ].parent=gT}};x.prototype.clear=function(){var gR=this;if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var gQ=0;gQ<this.markers.length;++gQ){gR.markers[gQ].clear()}af(this,"clear")};x.prototype.find=function(gQ,i){return this.primary.find(gQ,i)};bG(x);function N(gT,gW,gV,i,gR){i=aO(i);i.shared=false;var gU=[e0(gT,gW,gV,i,gR)],gQ=gU[0];var gS=i.widgetNode;el(gT,function(gY){if(gS){i.widgetNode=gS.cloneNode(true)}gU.push(e0(gY,gb(gY,gW),gb(gY,gV),i,gR));for(var gX=0;gX<gY.linked.length;++gX){if(gY.linked[gX].isParent){return}}gQ=f6(gU)});return new x(gU,gQ)}function fb(i){return i.findMarks(W(i.first,0),i.clipPos(W(i.lastLine())),function(gQ){return gQ.parent})}function dR(gV,gW){for(var gT=0;gT<gW.length;gT++){var gR=gW[gT],gX=gR.find();var gQ=gV.clipPos(gX.from),gU=gV.clipPos(gX.to);if(co(gQ,gU)){var gS=e0(gV,gQ,gU,gR.primary,gR.primary.type);gR.markers.push(gS);gS.parent=gR}}}function eF(gS){var gQ=function(gV){var gT=gS[gV],gX=[gT.primary.doc];el(gT.primary.doc,function(i){return gX.push(i)});for(var gU=0;gU<gT.markers.length;gU++){var gW=gT.markers[gU];if(dw(gX,gW.doc)==-1){gW.parent=null;gT.markers.splice(gU--,1)}}};for(var gR=0;gR<gS.length;gR++){gQ(gR)}}var cC=0;var au=function(gS,gR,i,gQ){if(!(this instanceof au)){return new au(gS,gR,i,gQ)}if(i==null){i=0}fV.call(this,[new fn([new gC("",null)])]);this.first=i;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=i;var gT=W(i,0);this.sel=fe(gT);this.history=new go(null);this.id=++cC;this.modeOption=gR;this.lineSep=gQ;this.extend=false;if(typeof gS=="string"){gS=this.splitLines(gS)}fW(this,{from:gT,to:gT,text:gS});b1(this,fe(gT),aa)};au.prototype=cu(fV.prototype,{constructor:au,iter:function(gR,gQ,i){if(i){this.iterN(gR-this.first,gQ-gR,i)}else{this.iterN(this.first,this.first+this.size,gR)}},insert:function(gR,gS){var gQ=0;for(var gT=0;gT<gS.length;++gT){gQ+=gS[gT].height}this.insertInner(gR-this.first,gS,gQ)},remove:function(i,gQ){this.removeInner(i-this.first,gQ)},getValue:function(gQ){var i=a3(this,this.first,this.first+this.size);if(gQ===false){return i}return i.join(gQ||this.lineSeparator())},setValue:cP(function(gQ){var gR=W(this.first,0),i=this.first+this.size-1;bh(this,{from:gR,to:W(i,fD(this,i).text.length),text:this.splitLines(gQ),origin:"setValue",full:true},true);b1(this,fe(gR))}),replaceRange:function(gQ,gS,gR,i){gS=gb(this,gS);gR=gR?gb(this,gR):gS;a2(this,gQ,gS,gR,i)},getRange:function(gS,gR,gQ){var i=gA(this,gb(this,gS),gb(this,gR));if(gQ===false){return i}return i.join(gQ||this.lineSeparator())},getLine:function(gQ){var i=this.getLineHandle(gQ);return i&&i.text},getLineHandle:function(i){if(ch(this,i)){return fD(this,i)}},getLineNumber:function(i){return bU(i)},getLineHandleVisualStart:function(i){if(typeof i=="number"){i=fD(this,i)}return y(i)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(i){return gb(this,i)},getCursor:function(gR){var i=this.sel.primary(),gQ;if(gR==null||gR=="head"){gQ=i.head}else{if(gR=="anchor"){gQ=i.anchor}else{if(gR=="end"||gR=="to"||gR===false){gQ=i.to()}else{gQ=i.from()}}}return gQ},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:cP(function(i,gR,gQ){F(this,gb(this,typeof i=="number"?W(i,gR||0):i),null,gQ)}),setSelection:cP(function(gQ,gR,i){F(this,gb(this,gQ),gb(this,gR||gQ),i)}),extendSelection:cP(function(gR,i,gQ){gt(this,gb(this,gR),i&&gb(this,i),gQ)}),extendSelections:cP(function(gQ,i){aw(this,ed(this,gQ),i)}),extendSelectionsBy:cP(function(gR,i){var gQ=b0(this.sel.ranges,gR);aw(this,ed(this,gQ),i)}),setSelections:cP(function(gQ,gU,gS){var gV=this;if(!gQ.length){return}var gR=[];for(var gT=0;gT<gQ.length;gT++){gR[gT]=new ea(gb(gV,gQ[gT].anchor),gb(gV,gQ[gT].head))}if(gU==null){gU=Math.min(gQ.length-1,this.sel.primIndex)}b1(this,cH(gR,gU),gS)}),addSelection:cP(function(gR,gS,gQ){var i=this.sel.ranges.slice(0);i.push(new ea(gb(this,gR),gb(this,gS||gR)));b1(this,cH(i,i.length-1),gQ)}),getSelection:function(gU){var gV=this;var gR=this.sel.ranges,gQ;for(var gS=0;gS<gR.length;gS++){var gT=gA(gV,gR[gS].from(),gR[gS].to());gQ=gQ?gQ.concat(gT):gT}if(gU===false){return gQ}else{return gQ.join(gU||this.lineSeparator())}},getSelections:function(gU){var gV=this;var gT=[],gQ=this.sel.ranges;for(var gR=0;gR<gQ.length;gR++){var gS=gA(gV,gQ[gR].from(),gQ[gR].to());if(gU!==false){gS=gS.join(gU||gV.lineSeparator())}gT[gR]=gS}return gT},replaceSelection:function(gS,gU,gQ){var gT=[];for(var gR=0;gR<this.sel.ranges.length;gR++){gT[gR]=gS}this.replaceSelections(gT,gU,gQ||"+input")},replaceSelections:cP(function(gR,gX,gZ){var gV=this;var gY=[],gT=this.sel;for(var gU=0;gU<gT.ranges.length;gU++){var gW=gT.ranges[gU];gY[gU]={from:gW.from(),to:gW.to(),text:gV.splitLines(gR[gU]),origin:gZ}}var gQ=gX&&gX!="end"&&ag(this,gY,gX);for(var gS=gY.length-1;gS>=0;gS--){bh(gV,gY[gS])}if(gQ){fw(this,gQ)}else{if(this.cm){f5(this.cm)}}}),undo:cP(function(){cg(this,"undo")}),redo:cP(function(){cg(this,"redo")}),undoSelection:cP(function(){cg(this,"undo",true)}),redoSelection:cP(function(){cg(this,"redo",true)}),setExtending:function(i){this.extend=i},getExtending:function(){return this.extend},historySize:function(){var gT=this.history,gQ=0,gS=0;for(var gR=0;gR<gT.done.length;gR++){if(!gT.done[gR].ranges){++gQ}}for(var gU=0;gU<gT.undone.length;gU++){if(!gT.undone[gU].ranges){++gS}}return{undo:gQ,redo:gS}},clearHistory:function(){this.history=new go(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(i){if(i){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(i){return this.history.generation==(i||this.cleanGeneration)},getHistory:function(){return{done:bW(this.history.done),undone:bW(this.history.undone)}},setHistory:function(gQ){var i=this.history=new go(this.history.maxGeneration);i.done=bW(gQ.done.slice(0),null,true);i.undone=bW(gQ.undone.slice(0),null,true)},setGutterMarker:cP(function(i,gQ,gR){return eS(this,i,"gutter",function(gS){var gT=gS.gutterMarkers||(gS.gutterMarkers={});gT[gQ]=gR;if(!gR&&fi(gT)){gS.gutterMarkers=null}return true})}),clearGutter:cP(function(i){var gQ=this;this.iter(function(gR){if(gR.gutterMarkers&&gR.gutterMarkers[i]){eS(gQ,gR,"gutter",function(){gR.gutterMarkers[i]=null;if(fi(gR.gutterMarkers)){gR.gutterMarkers=null}return true})}})}),lineInfo:function(i){var gQ;if(typeof i=="number"){if(!ch(this,i)){return null}gQ=i;i=fD(this,i);if(!i){return null}}else{gQ=bU(i);if(gQ==null){return null}}return{line:gQ,handle:i,text:i.text,gutterMarkers:i.gutterMarkers,textClass:i.textClass,bgClass:i.bgClass,wrapClass:i.wrapClass,widgets:i.widgets}},addLineClass:cP(function(gR,gQ,i){return eS(this,gR,gQ=="gutter"?"gutter":"class",function(gS){var gT=gQ=="text"?"textClass":gQ=="background"?"bgClass":gQ=="gutter"?"gutterClass":"wrapClass";if(!gS[gT]){gS[gT]=i}else{if(S(i).test(gS[gT])){return false}else{gS[gT]+=" "+i}}return true})}),removeLineClass:cP(function(gR,gQ,i){return eS(this,gR,gQ=="gutter"?"gutter":"class",function(gT){var gW=gQ=="text"?"textClass":gQ=="background"?"bgClass":gQ=="gutter"?"gutterClass":"wrapClass";var gV=gT[gW];if(!gV){return false}else{if(i==null){gT[gW]=null}else{var gU=gV.match(S(i));if(!gU){return false}var gS=gU.index+gU[0].length;gT[gW]=gV.slice(0,gU.index)+(!gU.index||gS==gV.length?"":" ")+gV.slice(gS)||null}}return true})}),addLineWidget:cP(function(gR,gQ,i){return bN(this,gR,gQ,i)}),removeLineWidget:function(i){i.clear()},markText:function(gR,gQ,i){return e0(this,gb(this,gR),gb(this,gQ),i,i&&i.type||"range")},setBookmark:function(gR,i){var gQ={replacedWith:i&&(i.nodeType==null?i.widget:i),insertLeft:i&&i.insertLeft,clearWhenEmpty:false,shared:i&&i.shared,handleMouseEvents:i&&i.handleMouseEvents};gR=gb(this,gR);return e0(this,gR,gR,gQ,"bookmark")},findMarksAt:function(gU){gU=gb(this,gU);var gT=[],gR=fD(this,gU.line).markedSpans;if(gR){for(var gQ=0;gQ<gR.length;++gQ){var gS=gR[gQ];if((gS.from==null||gS.from<=gU.ch)&&(gS.to==null||gS.to>=gU.ch)){gT.push(gS.marker.parent||gS.marker)}}}return gT},findMarks:function(gT,gS,i){gT=gb(this,gT);gS=gb(this,gS);var gQ=[],gR=gT.line;this.iter(gT.line,gS.line+1,function(gU){var gW=gU.markedSpans;if(gW){for(var gV=0;gV<gW.length;gV++){var gX=gW[gV];if(!(gX.to!=null&&gR==gT.line&&gT.ch>=gX.to||gX.from==null&&gR!=gT.line||gX.from!=null&&gR==gS.line&&gX.from>=gS.ch)&&(!i||i(gX.marker))){gQ.push(gX.marker.parent||gX.marker)}}}++gR});return gQ},getAllMarks:function(){var i=[];this.iter(function(gR){var gQ=gR.markedSpans;if(gQ){for(var gS=0;gS<gQ.length;++gS){if(gQ[gS].from!=null){i.push(gQ[gS].marker)}}}});return i},posFromIndex:function(gR){var i,gS=this.first,gQ=this.lineSeparator().length;this.iter(function(gT){var gU=gT.text.length+gQ;if(gU>gR){i=gR;return true}gR-=gU;++gS});return gb(this,W(gS,i))},indexFromPos:function(gR){gR=gb(this,gR);var i=gR.ch;if(gR.line<this.first||gR.ch<0){return 0}var gQ=this.lineSeparator().length;this.iter(this.first,gR.line,function(gS){i+=gS.text.length+gQ});return i},copy:function(i){var gQ=new au(a3(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);gQ.scrollTop=this.scrollTop;gQ.scrollLeft=this.scrollLeft;gQ.sel=this.sel;gQ.extend=false;if(i){gQ.history.undoDepth=this.history.undoDepth;gQ.setHistory(this.getHistory())}return gQ},linkedDoc:function(i){if(!i){i={}}var gS=this.first,gR=this.first+this.size;if(i.from!=null&&i.from>gS){gS=i.from}if(i.to!=null&&i.to<gR){gR=i.to}var gQ=new au(a3(this,gS,gR),i.mode||this.modeOption,gS,this.lineSep);if(i.sharedHist){gQ.history=this.history}(this.linked||(this.linked=[])).push({doc:gQ,sharedHist:i.sharedHist});gQ.linked=[{doc:this,isParent:true,sharedHist:i.sharedHist}];dR(gQ,fb(this));return gQ},unlinkDoc:function(gR){var gU=this;if(gR instanceof G){gR=gR.doc}if(this.linked){for(var gS=0;gS<this.linked.length;++gS){var gT=gU.linked[gS];if(gT.doc!=gR){continue}gU.linked.splice(gS,1);gR.unlinkDoc(gU);eF(fb(gU));break}}if(gR.history==this.history){var gQ=[gR.id];el(gR,function(i){return gQ.push(i.id)},true);gR.history=new go(null);gR.history.done=bW(this.history.done,gQ);gR.history.undone=bW(this.history.undone,gQ)}},iterLinkedDocs:function(i){el(this,i)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(i){if(this.lineSep){return i.split(this.lineSep)}return gl(i)},lineSeparator:function(){return this.lineSep||"\n"}});au.prototype.eachLine=au.prototype.iter;var ah=0;function bl(gY){var g0=this;dn(g0);if(aS(g0,gY)||bc(g0.display,gY)){return}cR(gY);if(dW){ah=+new Date}var gZ=cy(g0,gY,true),gR=gY.dataTransfer.files;if(!gZ||g0.isReadOnly()){return}if(gR&&gR.length&&window.FileReader&&window.File){var gU=gR.length,g1=Array(gU),gS=0;var gW=function(g4,g3){if(g0.options.allowDropFileTypes&&dw(g0.options.allowDropFileTypes,g4.type)==-1){return}var g2=new FileReader;g2.onload=dc(g0,function(){var i=g2.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(i)){i=""}g1[g3]=i;if(++gS==gU){gZ=gb(g0.doc,gZ);var g5={from:gZ,to:gZ,text:g0.doc.splitLines(g1.join(g0.doc.lineSeparator())),origin:"paste"};bh(g0.doc,g5);fw(g0.doc,fe(gZ,c8(g5)))}});g2.readAsText(g4)};for(var gX=0;gX<gU;++gX){gW(gR[gX],gX)}}else{if(g0.state.draggingText&&g0.doc.sel.contains(gZ)>-1){g0.state.draggingText(gY);setTimeout(function(){return g0.display.input.focus()},20);return}try{var gQ=gY.dataTransfer.getData("Text");if(gQ){var gV;if(g0.state.draggingText&&!g0.state.draggingText.copy){gV=g0.listSelections()}eG(g0.doc,fe(gZ,gZ));if(gV){for(var gT=0;gT<gV.length;++gT){a2(g0.doc,"",gV[gT].anchor,gV[gT].head,"drag")}}g0.replaceSelection(gQ,"around","paste");g0.display.input.focus()}}catch(gY){}}}function P(i,gR){if(dW&&(!i.state.draggingText||+new Date-ah<100)){eI(gR);return}if(aS(i,gR)||bc(i.display,gR)){return}gR.dataTransfer.setData("Text",i.getSelection());gR.dataTransfer.effectAllowed="copyMove";if(gR.dataTransfer.setDragImage&&!aD){var gQ=gz("img",null,null,"position: fixed; left: 0; top: 0;");gQ.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(eg){gQ.width=gQ.height=1;i.display.wrapper.appendChild(gQ);gQ._top=gQ.offsetTop}gR.dataTransfer.setDragImage(gQ,0,0);if(eg){gQ.parentNode.removeChild(gQ)}}}function gN(i,gQ){var gS=cy(i,gQ);if(!gS){return}var gR=document.createDocumentFragment();A(i,gS,gR);if(!i.display.dragCursor){i.display.dragCursor=gz("div",null,"CodeMirror-cursors CodeMirror-dragcursors");i.display.lineSpace.insertBefore(i.display.dragCursor,i.display.cursorDiv)}bZ(i.display.dragCursor,gR)}function dn(i){if(i.display.dragCursor){i.display.lineSpace.removeChild(i.display.dragCursor);i.display.dragCursor=null}}function aB(gT){if(!document.body.getElementsByClassName){return}var gS=document.body.getElementsByClassName("CodeMirror");for(var gR=0;gR<gS.length;gR++){var gQ=gS[gR].CodeMirror;if(gQ){gT(gQ)}}}var cO=false;function bk(){if(cO){return}f4();cO=true}function f4(){var i;b4(window,"resize",function(){if(i==null){i=setTimeout(function(){i=null;aB(aU)},100)}});b4(window,"blur",function(){return aB(aW)})}function aU(i){var gQ=i.display;if(gQ.lastWrapHeight==gQ.wrapper.clientHeight&&gQ.lastWrapWidth==gQ.wrapper.clientWidth){return}gQ.cachedCharWidth=gQ.cachedTextHeight=gQ.cachedPaddingH=null;gQ.scrollbarsClipped=false;i.setSize()}var fE={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var fU=0;fU<10;fU++){fE[fU+48]=fE[fU+96]=String(fU)}for(var gn=65;gn<=90;gn++){fE[gn]=String.fromCharCode(gn)}for(var gm=1;gm<=12;gm++){fE[gm+111]=fE[gm+63235]="F"+gm}var fz={};fz.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};fz.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};fz.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};fz.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};fz["default"]=cf?fz.macDefault:fz.pcDefault;function dG(gR){var gX=gR.split(/-(?!$)/);gR=gX[gX.length-1];var gW,gV,gQ,gU;for(var gT=0;gT<gX.length-1;gT++){var gS=gX[gT];if(/^(cmd|meta|m)$/i.test(gS)){gU=true}else{if(/^a(lt)?$/i.test(gS)){gW=true}else{if(/^(c|ctrl|control)$/i.test(gS)){gV=true}else{if(/^s(hift)?$/i.test(gS)){gQ=true}else{throw new Error("Unrecognized modifier name: "+gS)}}}}}if(gW){gR="Alt-"+gR}if(gV){gR="Ctrl-"+gR}if(gU){gR="Cmd-"+gR}if(gQ){gR="Shift-"+gR}return gR}function cS(gX){var gR={};for(var gW in gX){if(gX.hasOwnProperty(gW)){var gY=gX[gW];if(/^(name|fallthrough|(de|at)tach)$/.test(gW)){continue}if(gY=="..."){delete gX[gW];continue}var gZ=b0(gW.split(" "),dG);for(var gV=0;gV<gZ.length;gV++){var gT=(void 0),gS=(void 0);if(gV==gZ.length-1){gS=gZ.join(" ");gT=gY}else{gS=gZ.slice(0,gV+1).join(" ");gT="..."}var gU=gR[gS];if(!gU){gR[gS]=gT}else{if(gU!=gT){throw new Error("Inconsistent bindings for "+gS)}}}delete gX[gW]}}for(var gQ in gR){gX[gQ]=gR[gQ]}return gX}function j(gT,gW,gV,gS){gW=gs(gW);var gU=gW.call?gW.call(gT,gS):gW[gT];if(gU===false){return"nothing"}if(gU==="..."){return"multi"}if(gU!=null&&gV(gU)){return"handled"}if(gW.fallthrough){if(Object.prototype.toString.call(gW.fallthrough)!="[object Array]"){return j(gT,gW.fallthrough,gV,gS)}for(var gR=0;gR<gW.fallthrough.length;gR++){var gQ=j(gT,gW.fallthrough[gR],gV,gS);if(gQ){return gQ}}}}function eU(gQ){var i=typeof gQ=="string"?gQ:fE[gQ.keyCode];return i=="Ctrl"||i=="Alt"||i=="Shift"||i=="Mod"}function fO(gQ,gS){if(eg&&gQ.keyCode==34&&gQ["char"]){return false}var gR=fE[gQ.keyCode],i=gR;if(i==null||gQ.altGraphKey){return false}if(gQ.altKey&&gR!="Alt"){i="Alt-"+i}if((bX?gQ.metaKey:gQ.ctrlKey)&&gR!="Ctrl"){i="Ctrl-"+i}if((bX?gQ.ctrlKey:gQ.metaKey)&&gR!="Cmd"){i="Cmd-"+i}if(!gS&&gQ.shiftKey&&gR!="Shift"){i="Shift-"+i}return i}function gs(i){return typeof i=="string"?fz[i]:i}function fl(gQ,gW){var gR=gQ.doc.sel.ranges,gU=[];for(var gT=0;gT<gR.length;gT++){var gS=gW(gR[gT]);while(gU.length&&co(gS.from,f6(gU).to)<=0){var gV=gU.pop();if(co(gV.from,gS.from)<0){gS.from=gV.from;break}}gU.push(gS)}cY(gQ,function(){for(var gX=gU.length-1;gX>=0;gX--){a2(gQ.doc,"",gU[gX].from,gU[gX].to,"+delete")}f5(gQ)})}var eX={selectAll:am,singleSelection:function(i){return i.setSelection(i.getCursor("anchor"),i.getCursor("head"),aa)},killLine:function(i){return fl(i,function(gR){if(gR.empty()){var gQ=fD(i.doc,gR.head.line).text.length;if(gR.head.ch==gQ&&gR.head.line<i.lastLine()){return{from:gR.head,to:W(gR.head.line+1,0)}}else{return{from:gR.head,to:W(gR.head.line,gQ)}}}else{return{from:gR.from(),to:gR.to()}}})},deleteLine:function(i){return fl(i,function(gQ){return({from:W(gQ.from().line,0),to:gb(i.doc,W(gQ.to().line+1,0))})})},delLineLeft:function(i){return fl(i,function(gQ){return({from:W(gQ.from().line,0),to:gQ.from()})})},delWrappedLineLeft:function(i){return fl(i,function(gQ){var gS=i.charCoords(gQ.head,"div").top+5;var gR=i.coordsChar({left:0,top:gS},"div");return{from:gR,to:gQ.from()}})},delWrappedLineRight:function(i){return fl(i,function(gQ){var gS=i.charCoords(gQ.head,"div").top+5;var gR=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:gS},"div");return{from:gQ.from(),to:gR}})},undo:function(i){return i.undo()},redo:function(i){return i.redo()},undoSelection:function(i){return i.undoSelection()},redoSelection:function(i){return i.redoSelection()},goDocStart:function(i){return i.extendSelection(W(i.firstLine(),0))},goDocEnd:function(i){return i.extendSelection(W(i.lastLine()))},goLineStart:function(i){return i.extendSelectionsBy(function(gQ){return bz(i,gQ.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(i){return i.extendSelectionsBy(function(gQ){return dU(i,gQ.head)},{origin:"+move",bias:1})},goLineEnd:function(i){return i.extendSelectionsBy(function(gQ){return d2(i,gQ.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){return i.extendSelectionsBy(function(gQ){var gR=i.charCoords(gQ.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:gR},"div")},c7)},goLineLeft:function(i){return i.extendSelectionsBy(function(gQ){var gR=i.charCoords(gQ.head,"div").top+5;return i.coordsChar({left:0,top:gR},"div")},c7)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(gQ){var gR=i.charCoords(gQ.head,"div").top+5;var gS=i.coordsChar({left:0,top:gR},"div");if(gS.ch<i.getLine(gS.line).search(/\S/)){return dU(i,gQ.head)}return gS},c7)},goLineUp:function(i){return i.moveV(-1,"line")},goLineDown:function(i){return i.moveV(1,"line")},goPageUp:function(i){return i.moveV(-1,"page")},goPageDown:function(i){return i.moveV(1,"page")},goCharLeft:function(i){return i.moveH(-1,"char")},goCharRight:function(i){return i.moveH(1,"char")},goColumnLeft:function(i){return i.moveH(-1,"column")},goColumnRight:function(i){return i.moveH(1,"column")},goWordLeft:function(i){return i.moveH(-1,"word")},goGroupRight:function(i){return i.moveH(1,"group")},goGroupLeft:function(i){return i.moveH(-1,"group")},goWordRight:function(i){return i.moveH(1,"word")},delCharBefore:function(i){return i.deleteH(-1,"char")},delCharAfter:function(i){return i.deleteH(1,"char")},delWordBefore:function(i){return i.deleteH(-1,"word")},delWordAfter:function(i){return i.deleteH(1,"word")},delGroupBefore:function(i){return i.deleteH(-1,"group")},delGroupAfter:function(i){return i.deleteH(1,"group")},indentAuto:function(i){return i.indentSelection("smart")},indentMore:function(i){return i.indentSelection("add")},indentLess:function(i){return i.indentSelection("subtract")},insertTab:function(i){return i.replaceSelection("\t")},insertSoftTab:function(gQ){var gS=[],gR=gQ.listSelections(),gV=gQ.options.tabSize;for(var gU=0;gU<gR.length;gU++){var gW=gR[gU].from();var gT=bY(gQ.getLine(gW.line),gW.ch,gV);gS.push(cA(gV-gT%gV))}gQ.replaceSelections(gS)},defaultTab:function(i){if(i.somethingSelected()){i.indentSelection("add")}else{i.execCommand("insertTab")}},transposeChars:function(i){return cY(i,function(){var gS=i.listSelections(),gR=[];for(var gT=0;gT<gS.length;gT++){if(!gS[gT].empty()){continue}var gV=gS[gT].head,gQ=fD(i.doc,gV.line).text;if(gQ){if(gV.ch==gQ.length){gV=new W(gV.line,gV.ch-1)}if(gV.ch>0){gV=new W(gV.line,gV.ch+1);i.replaceRange(gQ.charAt(gV.ch-1)+gQ.charAt(gV.ch-2),W(gV.line,gV.ch-2),gV,"+transpose")}else{if(gV.line>i.doc.first){var gU=fD(i.doc,gV.line-1).text;if(gU){gV=new W(gV.line,1);i.replaceRange(gQ.charAt(0)+i.doc.lineSeparator()+gU.charAt(gU.length-1),W(gV.line-1,gU.length-1),gV,"+transpose")}}}}gR.push(new ea(gV,gV))}i.setSelections(gR)})},newlineAndIndent:function(i){return cY(i,function(){var gQ=i.listSelections();for(var gR=gQ.length-1;gR>=0;gR--){i.replaceRange(i.doc.lineSeparator(),gQ[gR].anchor,gQ[gR].head,"+input")}gQ=i.listSelections();for(var gS=0;gS<gQ.length;gS++){i.indentLine(gQ[gS].from().line,null,true)}f5(i)})},openLine:function(i){return i.replaceSelection("\n","start")},toggleOverwrite:function(i){return i.toggleOverwrite()}};function bz(i,gR){var gQ=fD(i.doc,gR);var gS=y(gQ);if(gS!=gQ){gR=bU(gS)}return eT(true,i,gS,gR,1)}function d2(i,gR){var gQ=fD(i.doc,gR);var gS=ct(gQ);if(gS!=gQ){gR=bU(gS)}return eT(true,i,gQ,gR,-1)}function dU(gQ,gV){var gU=bz(gQ,gV.line);var gR=fD(gQ.doc,gU.line);var i=a(gR);if(!i||i[0].level==0){var gT=Math.max(0,gR.text.search(/\S/));var gS=gV.line==gU.line&&gV.ch<=gT&&gV.ch;return W(gU.line,gS?0:gT,gU.sticky)}return gU}function gk(gQ,gT,i){if(typeof gT=="string"){gT=eX[gT];if(!gT){return false}}gQ.display.input.ensurePolled();var gS=gQ.display.shift,gR=false;try{if(gQ.isReadOnly()){gQ.state.suppressEdits=true}if(i){gQ.display.shift=false}gR=gT(gQ)!=ck}finally{gQ.display.shift=gS;gQ.state.suppressEdits=false}return gR}function em(gR,gS,gU){for(var gT=0;gT<gR.state.keyMaps.length;gT++){var gQ=j(gS,gR.state.keyMaps[gT],gU,gR);if(gQ){return gQ}}return(gR.options.extraKeys&&j(gS,gR.options.extraKeys,gU,gR))||j(gS,gR.options.keyMap,gU,gR)}var dY=new gP;function be(gQ,gS,gU,gT){var gR=gQ.state.keySeq;if(gR){if(eU(gS)){return"handled"}dY.set(50,function(){if(gQ.state.keySeq==gR){gQ.state.keySeq=null;gQ.display.input.reset()}});gS=gR+" "+gS}var i=em(gQ,gS,gT);if(i=="multi"){gQ.state.keySeq=gS}if(i=="handled"){af(gQ,"keyHandled",gQ,gS,gU)}if(i=="handled"||i=="multi"){cR(gU);p(gQ)}if(gR&&!i&&/\'$/.test(gS)){cR(gU);return true}return !!i}function fG(i,gR){var gQ=fO(gR,true);if(!gQ){return false}if(gR.shiftKey&&!i.state.keySeq){return be(i,"Shift-"+gQ,gR,function(gS){return gk(i,gS,true)})||be(i,gQ,gR,function(gS){if(typeof gS=="string"?/^go[A-Z]/.test(gS):gS.motion){return gk(i,gS)}})}else{return be(i,gQ,gR,function(gS){return gk(i,gS)})}}function ex(i,gR,gQ){return be(i,"'"+gQ+"'",gR,function(gS){return gk(i,gS,true)})}var dB=null;function q(gS){var i=this;i.curOp.focus=d0();if(aS(i,gS)){return}if(dW&&l<11&&gS.keyCode==27){gS.returnValue=false}var gQ=gS.keyCode;i.display.shift=gQ==16||gS.shiftKey;var gR=fG(i,gS);if(eg){dB=gR?gQ:null;if(!gR&&gQ==88&&!dm&&(cf?gS.metaKey:gS.ctrlKey)){i.replaceSelection("",null,"cut")}}if(gQ==18&&!/\bCodeMirror-crosshair\b/.test(i.display.lineDiv.className)){at(i)}}function at(gQ){var gR=gQ.display.lineDiv;f0(gR,"CodeMirror-crosshair");function i(gS){if(gS.keyCode==18||!gS.altKey){h(gR,"CodeMirror-crosshair");eu(document,"keyup",i);eu(document,"mouseover",i)}}b4(document,"keyup",i);b4(document,"mouseover",i)}function bi(i){if(i.keyCode==16){this.doc.sel.shift=false}aS(this,i)}function cI(gT){var i=this;if(bc(i.display,gT)||aS(i,gT)||gT.ctrlKey&&!gT.altKey||cf&&gT.metaKey){return}var gS=gT.keyCode,gQ=gT.charCode;if(eg&&gS==dB){dB=null;cR(gT);return}if((eg&&(!gT.which||gT.which<10))&&fG(i,gT)){return}var gR=String.fromCharCode(gQ==null?gS:gQ);if(gR=="\x08"){return}if(ex(i,gT,gR)){return}i.display.input.onKeyPress(gT)}function eM(gR){var i=this,gQ=i.display;if(aS(i,gR)||gQ.activeTouch&&gQ.input.supportsTouch()){return}gQ.input.ensurePolled();gQ.shift=gR.shiftKey;if(bc(gQ,gR)){if(!db){gQ.scroller.draggable=false;setTimeout(function(){return gQ.scroller.draggable=true},100)}return}if(m(i,gR)){return}var gS=cy(i,gR);window.focus();switch(gg(gR)){case 1:if(i.state.selectingText){i.state.selectingText(gR)}else{if(gS){ax(i,gR,gS)}else{if(L(gR)==gQ.scroller){cR(gR)}}}break;case 2:if(db){i.state.lastMiddleDown=+new Date}if(gS){gt(i.doc,gS)}setTimeout(function(){return gQ.input.focus()},20);cR(gR);break;case 3:if(gG){ay(i,gR)}else{al(i)}break}}var dA;var dr;function ax(gQ,gV,gW){if(dW){setTimeout(cG(s,gQ),0)}else{gQ.curOp.focus=d0()}var gR=+new Date,gT;if(dr&&dr.time>gR-400&&co(dr.pos,gW)==0){gT="triple"}else{if(dA&&dA.time>gR-400&&co(dA.pos,gW)==0){gT="double";dr={time:gR,pos:gW}}else{gT="single";dA={time:gR,pos:gW}}}var gU=gQ.doc.sel,i=cf?gV.metaKey:gV.ctrlKey,gS;if(gQ.options.dragDrop&&e8&&!gQ.isReadOnly()&&gT=="single"&&(gS=gU.contains(gW))>-1&&(co((gS=gU.ranges[gS]).from(),gW)<0||gW.xRel>0)&&(co(gS.to(),gW)>0||gW.xRel<0)){a4(gQ,gV,gW,i)}else{n(gQ,gV,gW,gT,i)}}function a4(gR,gU,gV,gQ){var gT=gR.display,gS=+new Date;var i=dc(gR,function(gW){if(db){gT.scroller.draggable=false}gR.state.draggingText=false;eu(document,"mouseup",i);eu(gT.scroller,"drop",i);if(Math.abs(gU.clientX-gW.clientX)+Math.abs(gU.clientY-gW.clientY)<10){cR(gW);if(!gQ&&+new Date-200<gS){gt(gR.doc,gV)}if(db||dW&&l==9){setTimeout(function(){document.body.focus();gT.input.focus()},20)}else{gT.input.focus()}}});if(db){gT.scroller.draggable=true}gR.state.draggingText=i;i.copy=cf?gU.altKey:gU.ctrlKey;if(gT.scroller.dragDrop){gT.scroller.dragDrop()}b4(document,"mouseup",i);b4(gT.scroller,"drop",i)}function n(gT,g7,gS,gQ,gV){var g4=gT.display,g9=gT.doc;cR(g7);var gR,g8,gU=g9.sel,i=gU.ranges;if(gV&&!g7.shiftKey){g8=g9.sel.contains(gS);if(g8>-1){gR=i[g8]}else{gR=new ea(gS,gS)}}else{gR=g9.sel.primary();g8=g9.sel.primIndex}if(ga?g7.shiftKey&&g7.metaKey:g7.altKey){gQ="rect";if(!gV){gR=new ea(gS,gS)}gS=cy(gT,g7,true,true);g8=-1}else{if(gQ=="double"){var g5=gT.findWordAt(gS);if(gT.display.shift||g9.extend){gR=fS(g9,gR,g5.anchor,g5.head)}else{gR=g5}}else{if(gQ=="triple"){var gY=new ea(W(gS.line,0),gb(g9,W(gS.line+1,0)));if(gT.display.shift||g9.extend){gR=fS(g9,gR,gY.anchor,gY.head)}else{gR=gY}}else{gR=fS(g9,gR,gS)}}}if(!gV){g8=0;b1(g9,new gy([gR],0),M);gU=g9.sel}else{if(g8==-1){g8=i.length;b1(g9,cH(i.concat([gR]),g8),{scroll:false,origin:"*mouse"})}else{if(i.length>1&&i[g8].empty()&&gQ=="single"&&!g7.shiftKey){b1(g9,cH(i.slice(0,g8).concat(i.slice(g8+1)),0),{scroll:false,origin:"*mouse"});gU=g9.sel}else{e(g9,g8,gR,M)}}}var g3=gS;function g2(hl){if(co(g3,hl)==0){return}g3=hl;if(gQ=="rect"){var hc=[],hi=gT.options.tabSize;var hb=bY(fD(g9,gS.line).text,gS.ch,hi);var ho=bY(fD(g9,hl.line).text,hl.ch,hi);var hd=Math.min(hb,ho),hm=Math.max(hb,ho);for(var hp=Math.min(gS.line,hl.line),hf=Math.min(gT.lastLine(),Math.max(gS.line,hl.line));hp<=hf;hp++){var hn=fD(g9,hp).text,he=eH(hn,hd,hi);if(hd==hm){hc.push(new ea(W(hp,he),W(hp,he)))}else{if(hn.length>he){hc.push(new ea(W(hp,he),W(hp,eH(hn,hm,hi))))}}}if(!hc.length){hc.push(new ea(gS,gS))}b1(g9,cH(gU.ranges.slice(0,g8).concat(hc),g8),{origin:"*mouse",scroll:false});gT.scrollIntoView(hl)}else{var hj=gR;var hg=hj.anchor,hk=hl;if(gQ!="single"){var hh;if(gQ=="double"){hh=gT.findWordAt(hl)}else{hh=new ea(W(hl.line,0),gb(g9,W(hl.line+1,0)))}if(co(hh.anchor,hg)>0){hk=hh.head;hg=ar(hj.from(),hh.anchor)}else{hk=hh.anchor;hg=bE(hj.to(),hh.head)}}var ha=gU.ranges.slice(0);ha[g8]=new ea(gb(g9,hg),hk);b1(g9,cH(ha,g8),M)}}var g0=g4.wrapper.getBoundingClientRect();var gW=0;function g6(hc){var ha=++gW;var he=cy(gT,hc,true,gQ=="rect");if(!he){return}if(co(he,g3)!=0){gT.curOp.focus=d0();g2(he);var hd=ce(g4,g9);if(he.line>=hd.to||he.line<hd.from){setTimeout(dc(gT,function(){if(gW==ha){g6(hc)}}),150)}}else{var hb=hc.clientY<g0.top?-20:hc.clientY>g0.bottom?20:0;if(hb){setTimeout(dc(gT,function(){if(gW!=ha){return}g4.scroller.scrollTop+=hb;g6(hc)}),50)}}}function gZ(ha){gT.state.selectingText=false;gW=Infinity;cR(ha);g4.input.focus();eu(document,"mousemove",g1);eu(document,"mouseup",gX);g9.history.lastSelOrigin=null}var g1=dc(gT,function(ha){if(!gg(ha)){gZ(ha)}else{g6(ha)}});var gX=dc(gT,gZ);gT.state.selectingText=gX;b4(document,"mousemove",g1);b4(document,"mouseup",gX)}function gO(g0,gW,gY,gZ){var gR,gQ;try{gR=gW.clientX;gQ=gW.clientY}catch(gW){return false}if(gR>=Math.floor(g0.display.gutters.getBoundingClientRect().right)){return false}if(gZ){cR(gW)}var gX=g0.display;var gV=gX.lineDiv.getBoundingClientRect();if(gQ>gV.bottom||!fI(g0,gY)){return bS(gW)}gQ-=gV.top-gX.viewOffset;for(var gT=0;gT<g0.options.gutters.length;++gT){var gU=gX.gutters.childNodes[gT];if(gU&&gU.getBoundingClientRect().right>=gR){var g1=bO(g0.doc,gQ);var gS=g0.options.gutters[gT];aF(g0,gY,g0,g1,gS,gW);return bS(gW)}}}function m(i,gQ){return gO(i,gQ,"gutterClick",true)}function ay(i,gQ){if(bc(i.display,gQ)||du(i,gQ)){return}if(aS(i,gQ,"contextmenu")){return}i.display.input.onContextMenu(gQ)}function du(i,gQ){if(!fI(i,"gutterContextMenu")){return false}return gO(i,gQ,"gutterContextMenu",false)}function cZ(i){i.display.wrapper.className=i.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+i.options.theme.replace(/(^|\s)\s*/g," cm-s-");ak(i)}var cl={toString:function(){return"CodeMirror.Init"}};var fq={};var bg={};function e2(i){var gR=i.optionHandlers;function gQ(gS,gV,gU,gT){i.defaults[gS]=gV;if(gU){gR[gS]=gT?function(gW,gY,gX){if(gX!=cl){gU(gW,gY,gX)}}:gU}}i.defineOption=gQ;i.Init=cl;gQ("value","",function(gS,gT){return gS.setValue(gT)},true);gQ("mode",null,function(gS,gT){gS.doc.modeOption=gT;bx(gS)},true);gQ("indentUnit",2,bx,true);gQ("indentWithTabs",false);gQ("smartIndent",true);gQ("tabSize",4,function(gS){eC(gS);ak(gS);ai(gS)},true);gQ("lineSeparator",null,function(gS,gV){gS.doc.lineSep=gV;if(!gV){return}var gU=[],gW=gS.doc.first;gS.doc.iter(function(gX){for(var gZ=0;;){var gY=gX.text.indexOf(gV,gZ);if(gY==-1){break}gZ=gY+gV.length;gU.push(W(gW,gY))}gW++});for(var gT=gU.length-1;gT>=0;gT--){a2(gS.doc,gV,gU[gT],W(gU[gT].line,gU[gT].ch+gV.length))}});gQ("specialChars",/[\u0000-\u001f\u007f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(gS,gU,gT){gS.state.specialChars=new RegExp(gU.source+(gU.test("\t")?"":"|\t"),"g");if(gT!=cl){gS.refresh()}});gQ("specialCharPlaceholder",fC,function(gS){return gS.refresh()},true);gQ("electricChars",true);gQ("inputStyle",ev?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);gQ("spellcheck",false,function(gS,gT){return gS.getInputField().spellcheck=gT},true);gQ("rtlMoveVisually",!aQ);gQ("wholeLineUpdateBefore",true);gQ("theme","default",function(gS){cZ(gS);dJ(gS)},true);gQ("keyMap","default",function(gS,gW,gT){var gU=gs(gW);var gV=gT!=cl&&gs(gT);if(gV&&gV.detach){gV.detach(gS,gU)}if(gU.attach){gU.attach(gS,gV||null)}});gQ("extraKeys",null);gQ("lineWrapping",false,e1,true);gQ("gutters",[],function(gS){cn(gS.options);dJ(gS)},true);gQ("fixedGutter",true,function(gS,gT){gS.display.gutters.style.left=gT?eb(gS.display)+"px":"0";gS.refresh()},true);gQ("coverGutterNextToScrollbar",false,function(gS){return fm(gS)},true);gQ("scrollbarStyle","native",function(gS){aE(gS);fm(gS);gS.display.scrollbars.setScrollTop(gS.doc.scrollTop);gS.display.scrollbars.setScrollLeft(gS.doc.scrollLeft)},true);gQ("lineNumbers",false,function(gS){cn(gS.options);dJ(gS)},true);gQ("firstLineNumber",1,dJ,true);gQ("lineNumberFormatter",function(gS){return gS},dJ,true);gQ("showCursorWhenSelecting",false,bJ,true);gQ("resetSelectionOnContextMenu",true);gQ("lineWiseCopyCut",true);gQ("readOnly",false,function(gS,gT){if(gT=="nocursor"){aW(gS);gS.display.input.blur();gS.display.disabled=true}else{gS.display.disabled=false}gS.display.input.readOnlyChanged(gT)});gQ("disableInput",false,function(gS,gT){if(!gT){gS.display.input.reset()}},true);gQ("dragDrop",true,gw);gQ("allowDropFileTypes",null);gQ("cursorBlinkRate",530);gQ("cursorScrollMargin",0);gQ("cursorHeight",1,bJ,true);gQ("singleCursorHeightPerLine",true,bJ,true);gQ("workTime",100);gQ("workDelay",100);gQ("flattenSpans",true,eC,true);gQ("addModeClass",false,eC,true);gQ("pollInterval",100);gQ("undoDepth",200,function(gS,gT){return gS.doc.history.undoDepth=gT});gQ("historyEventDelay",1250);gQ("viewportMargin",10,function(gS){return gS.refresh()},true);gQ("maxHighlightLength",10000,eC,true);gQ("moveInputWithCursor",true,function(gS,gT){if(!gT){gS.display.input.resetPosition()}});gQ("tabindex",null,function(gS,gT){return gS.display.input.getField().tabIndex=gT||""});gQ("autofocus",null)}function dJ(i){er(i);ai(i);eZ(i)}function gw(gQ,gT,gR){var gU=gR&&gR!=cl;if(!gT!=!gU){var gS=gQ.display.dragFunctions;var i=gT?b4:eu;i(gQ.display.scroller,"dragstart",gS.start);i(gQ.display.scroller,"dragenter",gS.enter);i(gQ.display.scroller,"dragover",gS.over);i(gQ.display.scroller,"dragleave",gS.leave);i(gQ.display.scroller,"drop",gS.drop)}}function e1(i){if(i.options.lineWrapping){f0(i.display.wrapper,"CodeMirror-wrap");i.display.sizer.style.minWidth="";i.display.sizerWidth=null}else{h(i.display.wrapper,"CodeMirror-wrap");f(i)}Z(i);ai(i);ak(i);setTimeout(function(){return fm(i)},100)}function G(gQ,gS){var gX=this;if(!(this instanceof G)){return new G(gQ,gS)}this.options=gS=gS?aO(gS):{};aO(fq,gS,false);cn(gS);var gW=gS.value;if(typeof gW=="string"){gW=new au(gW,gS.mode,null,gS.lineSeparator)}this.doc=gW;var gR=new G.inputStyles[gS.inputStyle](this);var gV=this.display=new e4(gQ,gW,gR);gV.wrapper.CodeMirror=this;er(this);cZ(this);if(gS.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}aE(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new gP(),keySeq:null,specialChars:null};if(gS.autofocus&&!ev){gV.input.focus()}if(dW&&l<11){setTimeout(function(){return gX.display.input.reset(true)},20)}gj(this);bk();cU(this);this.curOp.forceUpdate=true;eq(this,gW);if((gS.autofocus&&!ev)||this.hasFocus()){setTimeout(cG(cM,this),20)}else{aW(this)}for(var gU in bg){if(bg.hasOwnProperty(gU)){bg[gU](gX,gS[gU],cl)}}ej(this);if(gS.finishInit){gS.finishInit(this)}for(var gT=0;gT<a9.length;++gT){a9[gT](gX)}an(this);if(db&&gS.lineWrapping&&getComputedStyle(gV.lineDiv).textRendering=="optimizelegibility"){gV.lineDiv.style.textRendering="auto"}}G.defaults=fq;G.optionHandlers=bg;function gj(gQ){var gU=gQ.display;b4(gU.scroller,"mousedown",dc(gQ,eM));if(dW&&l<11){b4(gU.scroller,"dblclick",dc(gQ,function(gY){if(aS(gQ,gY)){return}var gZ=cy(gQ,gY);if(!gZ||m(gQ,gY)||bc(gQ.display,gY)){return}cR(gY);var gX=gQ.findWordAt(gZ);gt(gQ.doc,gX.anchor,gX.head)}))}else{b4(gU.scroller,"dblclick",function(gX){return aS(gQ,gX)||cR(gX)})}if(!gG){b4(gU.scroller,"contextmenu",function(gX){return ay(gQ,gX)})}var gW,i={end:0};function gV(){if(gU.activeTouch){gW=setTimeout(function(){return gU.activeTouch=null},1000);i=gU.activeTouch;i.end=+new Date}}function gS(gX){if(gX.touches.length!=1){return false}var gY=gX.touches[0];return gY.radiusX<=1&&gY.radiusY<=1}function gR(g0,gX){if(gX.left==null){return true}var gZ=gX.left-g0.left,gY=gX.top-g0.top;return gZ*gZ+gY*gY>20*20}b4(gU.scroller,"touchstart",function(gY){if(!aS(gQ,gY)&&!gS(gY)){gU.input.ensurePolled();clearTimeout(gW);var gX=+new Date;gU.activeTouch={start:gX,moved:false,prev:gX-i.end<=300?i:null};if(gY.touches.length==1){gU.activeTouch.left=gY.touches[0].pageX;gU.activeTouch.top=gY.touches[0].pageY}}});b4(gU.scroller,"touchmove",function(){if(gU.activeTouch){gU.activeTouch.moved=true}});b4(gU.scroller,"touchend",function(gY){var g0=gU.activeTouch;if(g0&&!bc(gU,gY)&&g0.left!=null&&!g0.moved&&new Date-g0.start<300){var gZ=gQ.coordsChar(gU.activeTouch,"page"),gX;if(!g0.prev||gR(g0,g0.prev)){gX=new ea(gZ,gZ)}else{if(!g0.prev.prev||gR(g0,g0.prev.prev)){gX=gQ.findWordAt(gZ)}else{gX=new ea(W(gZ.line,0),gb(gQ.doc,W(gZ.line+1,0)))}}gQ.setSelection(gX.anchor,gX.head);gQ.focus();cR(gY)}gV()});b4(gU.scroller,"touchcancel",gV);b4(gU.scroller,"scroll",function(){if(gU.scroller.clientHeight){O(gQ,gU.scroller.scrollTop);bL(gQ,gU.scroller.scrollLeft,true);aF(gQ,"scroll",gQ)}});b4(gU.scroller,"mousewheel",function(gX){return c(gQ,gX)});b4(gU.scroller,"DOMMouseScroll",function(gX){return c(gQ,gX)});b4(gU.wrapper,"scroll",function(){return gU.wrapper.scrollTop=gU.wrapper.scrollLeft=0});gU.dragFunctions={enter:function(gX){if(!aS(gQ,gX)){eI(gX)}},over:function(gX){if(!aS(gQ,gX)){gN(gQ,gX);eI(gX)}},start:function(gX){return P(gQ,gX)},drop:dc(gQ,bl),leave:function(gX){if(!aS(gQ,gX)){dn(gQ)}}};var gT=gU.input.getField();b4(gT,"keyup",function(gX){return bi.call(gQ,gX)});b4(gT,"keydown",dc(gQ,q));b4(gT,"keypress",dc(gQ,cI));b4(gT,"focus",function(gX){return cM(gQ,gX)});b4(gT,"blur",function(gX){return aW(gQ,gX)})}var a9=[];G.defineInitHook=function(i){return a9.push(i)};function ad(g5,gU,g4,gS){var g3=g5.doc,gR;if(g4==null){g4="add"}if(g4=="smart"){if(!g3.mode.indent){g4="prev"}else{gR=dO(g5,gU)}}var gY=g5.options.tabSize;var g6=fD(g3,gU),gX=bY(g6.text,null,gY);if(g6.stateAfter){g6.stateAfter=null}var gQ=g6.text.match(/^\s*/)[0],g1;if(!gS&&!/\S/.test(g6.text)){g1=0;g4="not"}else{if(g4=="smart"){g1=g3.mode.indent(gR,g6.text.slice(gQ.length),g6.text);if(g1==ck||g1>150){if(!gS){return}g4="prev"}}}if(g4=="prev"){if(gU>g3.first){g1=bY(fD(g3,gU-1).text,null,gY)}else{g1=0}}else{if(g4=="add"){g1=gX+g5.options.indentUnit}else{if(g4=="subtract"){g1=gX-g5.options.indentUnit}else{if(typeof g4=="number"){g1=gX+g4}}}}g1=Math.max(0,g1);var g2="",g0=0;if(g5.options.indentWithTabs){for(var gV=Math.floor(g1/gY);gV;--gV){g0+=gY;g2+="\t"}}if(g0<g1){g2+=cA(g1-g0)}if(g2!=gQ){a2(g3,g2,W(gU,0),W(gU,gQ.length),"+input");g6.stateAfter=null;return true}else{for(var gT=0;gT<g3.sel.ranges.length;gT++){var gW=g3.sel.ranges[gT];if(gW.head.line==gU&&gW.head.ch<gQ.length){var gZ=W(gU,gQ.length);e(g3,gT,new ea(gZ,gZ));break}}}}var bn=null;function dh(i){bn=i}function gu(g5,gV,gT,gS,g4){var g3=g5.doc;g5.display.shift=false;if(!gS){gS=g3.sel}var gU=g5.state.pasteIncoming||g4=="paste";var gY=gl(gV),gQ=null;if(gU&&gS.ranges.length>1){if(bn&&bn.text.join("\n")==gV){if(gS.ranges.length%bn.text.length==0){gQ=[];for(var gW=0;gW<bn.text.length;gW++){gQ.push(g3.splitLines(bn.text[gW]))}}}else{if(gY.length==gS.ranges.length){gQ=b0(gY,function(i){return[i]})}}}var gZ;for(var gR=gS.ranges.length-1;gR>=0;gR--){var gX=gS.ranges[gR];var g2=gX.from(),g1=gX.to();if(gX.empty()){if(gT&&gT>0){g2=W(g2.line,g2.ch-gT)}else{if(g5.state.overwrite&&!gU){g1=W(g1.line,Math.min(fD(g3,g1.line).text.length,g1.ch+f6(gY).length))}else{if(bn&&bn.lineWise&&bn.text.join("\n")==gV){g2=g1=W(g2.line,0)}}}}gZ=g5.curOp.updateInput;var g0={from:g2,to:g1,text:gQ?gQ[gR%gQ.length]:gY,origin:g4||(gU?"paste":g5.state.cutIncoming?"cut":"+input")};bh(g5.doc,g0);af(g5,"inputRead",g5,g0)}if(gV&&!gU){gr(g5,gV)}f5(g5);g5.curOp.updateInput=gZ;g5.curOp.typing=true;g5.state.pasteIncoming=g5.state.cutIncoming=false}function bb(gR,i){var gQ=gR.clipboardData&&gR.clipboardData.getData("Text");if(gQ){gR.preventDefault();if(!i.isReadOnly()&&!i.options.disableInput){cY(i,function(){return gu(i,gQ,0,null,"paste")})}return true}}function gr(gQ,gU){if(!gQ.options.electricChars||!gQ.options.smartIndent){return}var gV=gQ.doc.sel;for(var gT=gV.ranges.length-1;gT>=0;gT--){var gR=gV.ranges[gT];if(gR.head.ch>100||(gT&&gV.ranges[gT-1].head.line==gR.head.line)){continue}var gW=gQ.getModeAt(gR.head);var gX=false;if(gW.electricChars){for(var gS=0;gS<gW.electricChars.length;gS++){if(gU.indexOf(gW.electricChars.charAt(gS))>-1){gX=ad(gQ,gR.head.line,"smart");break}}}else{if(gW.electricInput){if(gW.electricInput.test(fD(gQ.doc,gR.head.line).text.slice(0,gR.head.ch))){gX=ad(gQ,gR.head.line,"smart")}}}if(gX){af(gQ,"electricInput",gQ,gR.head.line)}}}function dv(gQ){var gV=[],gS=[];for(var gT=0;gT<gQ.doc.sel.ranges.length;gT++){var gR=gQ.doc.sel.ranges[gT].head.line;var gU={anchor:W(gR,0),head:W(gR+1,0)};gS.push(gU);gV.push(gQ.getRange(gU.anchor,gU.head))}return{text:gV,ranges:gS}}function gh(gQ,i){gQ.setAttribute("autocorrect","off");gQ.setAttribute("autocapitalize","off");gQ.setAttribute("spellcheck",!!i)}function aY(){var i=gz("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var gQ=gz("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(db){i.style.width="1000px"}else{i.setAttribute("wrap","off")}if(fp){i.style.border="1px solid black"}gh(i);return gQ}function d1(i){var gQ=i.optionHandlers;var gR=i.helpers={};i.prototype={constructor:i,focus:function(){window.focus();this.display.input.focus()},setOption:function(gU,gV){var gT=this.options,gS=gT[gU];if(gT[gU]==gV&&gU!="mode"){return}gT[gU]=gV;if(gQ.hasOwnProperty(gU)){dc(this,gQ[gU])(this,gV,gS)}aF(this,"optionChange",this,gU)},getOption:function(gS){return this.options[gS]},getDoc:function(){return this.doc},addKeyMap:function(gT,gS){this.state.keyMaps[gS?"push":"unshift"](gs(gT))},removeKeyMap:function(gT){var gU=this.state.keyMaps;for(var gS=0;gS<gU.length;++gS){if(gU[gS]==gT||gU[gS].name==gT){gU.splice(gS,1);return true}}},addOverlay:dl(function(gS,gT){var gU=gS.token?gS:i.getMode(this.options,gS);if(gU.startState){throw new Error("Overlays may not be stateful.")}ci(this.state.overlays,{mode:gU,modeSpec:gS,opaque:gT&&gT.opaque,priority:(gT&&gT.priority)||0},function(gV){return gV.priority});this.state.modeGen++;ai(this)}),removeOverlay:dl(function(gS){var gW=this;var gU=this.state.overlays;for(var gT=0;gT<gU.length;++gT){var gV=gU[gT].modeSpec;if(gV==gS||typeof gS=="string"&&gV.name==gS){gU.splice(gT,1);gW.state.modeGen++;ai(gW);return}}}),indentLine:dl(function(gU,gS,gT){if(typeof gS!="string"&&typeof gS!="number"){if(gS==null){gS=this.options.smartIndent?"smart":"prev"}else{gS=gS?"add":"subtract"}}if(ch(this.doc,gU)){ad(this,gU,gS,gT)}}),indentSelection:dl(function(g2){var gY=this;var gS=this.doc.sel.ranges,gV=-1;for(var gX=0;gX<gS.length;gX++){var gZ=gS[gX];if(!gZ.empty()){var g0=gZ.from(),g1=gZ.to();var gT=Math.max(gV,g0.line);gV=Math.min(gY.lastLine(),g1.line-(g1.ch?0:1))+1;for(var gW=gT;gW<gV;++gW){ad(gY,gW,g2)}var gU=gY.doc.sel.ranges;if(g0.ch==0&&gS.length==gU.length&&gU[gX].from().ch>0){e(gY.doc,gX,new ea(g0,gU[gX].to()),aa)}}else{if(gZ.head.line>gV){ad(gY,gZ.head.line,g2,true);gV=gZ.head.line;if(gX==gY.doc.sel.primIndex){f5(gY)}}}}}),getTokenAt:function(gT,gS){return cB(this,gT,gS)},getLineTokens:function(gT,gS){return cB(this,W(gT),gS,true)},getTokenTypeAt:function(gZ){gZ=gb(this.doc,gZ);var gV=dj(this,fD(this.doc,gZ.line));var gX=0,gY=(gV.length-1)/2,gU=gZ.ch;var gT;if(gU==0){gT=gV[2]}else{for(;;){var gS=(gX+gY)>>1;if((gS?gV[gS*2-1]:0)>=gU){gY=gS}else{if(gV[gS*2+1]<gU){gX=gS+1}else{gT=gV[gS*2+2];break}}}}var gW=gT?gT.indexOf("overlay "):-1;return gW<0?gT:gW==0?null:gT.slice(0,gW-1)},getModeAt:function(gT){var gS=this.doc.mode;if(!gS.innerMode){return gS}return i.innerMode(gS,this.getTokenAt(gT).state).mode},getHelper:function(gT,gS){return this.getHelpers(gT,gS)[0]},getHelpers:function(gZ,gY){var gW=this;var g1=[];if(!gR.hasOwnProperty(gY)){return g1}var gU=gR[gY],gX=this.getModeAt(gZ);if(typeof gX[gY]=="string"){if(gU[gX[gY]]){g1.push(gU[gX[gY]])}}else{if(gX[gY]){for(var gV=0;gV<gX[gY].length;gV++){var gT=gU[gX[gY][gV]];if(gT){g1.push(gT)}}}else{if(gX.helperType&&gU[gX.helperType]){g1.push(gU[gX.helperType])}else{if(gU[gX.name]){g1.push(gU[gX.name])}}}}for(var gS=0;gS<gU._global.length;gS++){var g0=gU._global[gS];if(g0.pred(gX,gW)&&dw(g1,g0.val)==-1){g1.push(g0.val)}}return g1},getStateAfter:function(gT,gS){var gU=this.doc;gT=dg(gU,gT==null?gU.first+gU.size-1:gT);return dO(this,gT+1,gS)},cursorCoords:function(gV,gT){var gU,gS=this.doc.sel.primary();if(gV==null){gU=gS.head}else{if(typeof gV=="object"){gU=gb(this.doc,gV)}else{gU=gV?gS.from():gS.to()}}return d7(this,gU,gT||"page")},charCoords:function(gT,gS){return cV(this,gb(this.doc,gT),gS||"page")},coordsChar:function(gS,gT){gS=gL(this,gS,gT||"page");return gi(this,gS.left,gS.top)},lineAtHeight:function(gS,gT){gS=gL(this,{top:gS,left:0},gT||"page").top;return bO(this.doc,gS+this.display.viewOffset)},heightAtLine:function(gT,gX,gW){var gS=false,gU;if(typeof gT=="number"){var gV=this.doc.first+this.doc.size-1;if(gT<this.doc.first){gT=this.doc.first}else{if(gT>gV){gT=gV;gS=true}}gU=fD(this.doc,gT)}else{gU=gT}return fd(this,gU,{top:0,left:0},gX||"page",gW||gS).top+(gS?this.doc.height-bT(gU):0)},defaultTextHeight:function(){return aZ(this.display)},defaultCharWidth:function(){return dP(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(gX,gU,gZ,gV,g1){var gW=this.display;gX=d7(this,gb(this.doc,gX));var gY=gX.bottom,gT=gX.left;gU.style.position="absolute";gU.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(gU);gW.sizer.appendChild(gU);if(gV=="over"){gY=gX.top}else{if(gV=="above"||gV=="near"){var gS=Math.max(gW.wrapper.clientHeight,this.doc.height),g0=Math.max(gW.sizer.clientWidth,gW.lineSpace.clientWidth);if((gV=="above"||gX.bottom+gU.offsetHeight>gS)&&gX.top>gU.offsetHeight){gY=gX.top-gU.offsetHeight}else{if(gX.bottom+gU.offsetHeight<=gS){gY=gX.bottom}}if(gT+gU.offsetWidth>g0){gT=g0-gU.offsetWidth}}}gU.style.top=gY+"px";gU.style.left=gU.style.right="";if(g1=="right"){gT=gW.sizer.clientWidth-gU.offsetWidth;gU.style.right="0px"}else{if(g1=="left"){gT=0}else{if(g1=="middle"){gT=(gW.sizer.clientWidth-gU.offsetWidth)/2}}gU.style.left=gT+"px"}if(gZ){E(this,gT,gY,gT+gU.offsetWidth,gY+gU.offsetHeight)}},triggerOnKeyDown:dl(q),triggerOnKeyPress:dl(cI),triggerOnKeyUp:bi,execCommand:function(gS){if(eX.hasOwnProperty(gS)){return eX[gS].call(null,this)}},triggerElectric:dl(function(gS){gr(this,gS)}),findPosH:function(gZ,gV,gW,gT){var gY=this;var gS=1;if(gV<0){gS=-1;gV=-gV}var gX=gb(this.doc,gZ);for(var gU=0;gU<gV;++gU){gX=bC(gY.doc,gX,gS,gW,gT);if(gX.hitSide){break}}return gX},moveH:dl(function(gS,gT){var gU=this;this.extendSelectionsBy(function(gV){if(gU.display.shift||gU.doc.extend||gV.empty()){return bC(gU.doc,gV.head,gS,gT,gU.options.rtlMoveVisually)}else{return gS<0?gV.from():gV.to()}},c7)}),deleteH:dl(function(gS,gT){var gU=this.doc.sel,gV=this.doc;if(gU.somethingSelected()){gV.replaceSelection("",null,"+delete")}else{fl(this,function(gX){var gW=bC(gV,gX.head,gS,gT,false);return gS<0?{from:gW,to:gX.head}:{from:gX.head,to:gW}})}}),findPosV:function(gY,gV,gZ,g1){var gU=this;var gS=1,gX=g1;if(gV<0){gS=-1;gV=-gV}var g0=gb(this.doc,gY);for(var gT=0;gT<gV;++gT){var gW=d7(gU,g0,"div");if(gX==null){gX=gW.left}else{gW.left=gX}g0=bw(gU,gW,gS,gZ);if(g0.hitSide){break}}return g0},moveV:dl(function(gS,gU){var gY=this;var gW=this.doc,gV=[];var gX=!this.display.shift&&!gW.extend&&gW.sel.somethingSelected();gW.extendSelectionsBy(function(gZ){if(gX){return gS<0?gZ.from():gZ.to()}var g1=d7(gY,gZ.head,"div");if(gZ.goalColumn!=null){g1.left=gZ.goalColumn}gV.push(g1.left);var g0=bw(gY,g1,gS,gU);if(gU=="page"&&gZ==gW.sel.primary()){cX(gY,null,cV(gY,g0,"div").top-g1.top)}return g0},c7);if(gV.length){for(var gT=0;gT<gW.sel.ranges.length;gT++){gW.sel.ranges[gT].goalColumn=gV[gT]}}}),findWordAt:function(gZ){var gX=this.doc,gV=fD(gX,gZ.line).text;var gY=gZ.ch,gU=gZ.ch;if(gV){var gW=this.getHelper(gZ,"wordChars");if((gZ.sticky=="before"||gU==gV.length)&&gY){--gY}else{++gU}var gT=gV.charAt(gY);var gS=cL(gT,gW)?function(g0){return cL(g0,gW)}:/\s/.test(gT)?function(g0){return/\s/.test(g0)}:function(g0){return(!/\s/.test(g0)&&!cL(g0))};while(gY>0&&gS(gV.charAt(gY-1))){--gY}while(gU<gV.length&&gS(gV.charAt(gU))){++gU}}return new ea(W(gZ.line,gY),W(gZ.line,gU))},toggleOverwrite:function(gS){if(gS!=null&&gS==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){f0(this.display.cursorDiv,"CodeMirror-overwrite")}else{h(this.display.cursorDiv,"CodeMirror-overwrite")}aF(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==d0()},isReadOnly:function(){return !!(this.options.readOnly||this.doc.cantEdit)},scrollTo:dl(function(gS,gT){if(gS!=null||gT!=null){f2(this)}if(gS!=null){this.curOp.scrollLeft=gS}if(gT!=null){this.curOp.scrollTop=gT}}),getScrollInfo:function(){var gS=this.display.scroller;return{left:gS.scrollLeft,top:gS.scrollTop,height:gS.scrollHeight-c4(this)-this.display.barHeight,width:gS.scrollWidth-c4(this)-this.display.barWidth,clientHeight:c6(this),clientWidth:dz(this)}},scrollIntoView:dl(function(gT,gU){if(gT==null){gT={from:this.doc.sel.primary().head,to:null};if(gU==null){gU=this.options.cursorScrollMargin}}else{if(typeof gT=="number"){gT={from:W(gT,0),to:null}}else{if(gT.from==null){gT={from:gT,to:null}}}}if(!gT.to){gT.to=gT.from}gT.margin=gU||0;if(gT.from.line!=null){f2(this);this.curOp.scrollToPos=gT}else{var gS=H(this,Math.min(gT.from.left,gT.to.left),Math.min(gT.from.top,gT.to.top)-gT.margin,Math.max(gT.from.right,gT.to.right),Math.max(gT.from.bottom,gT.to.bottom)+gT.margin);this.scrollTo(gS.scrollLeft,gS.scrollTop)}}),setSize:dl(function(gU,gS){var gW=this;var gT=function(gX){return typeof gX=="number"||/^\d+$/.test(String(gX))?gX+"px":gX};if(gU!=null){this.display.wrapper.style.width=gT(gU)}if(gS!=null){this.display.wrapper.style.height=gT(gS)}if(this.options.lineWrapping){aP(this)}var gV=this.display.viewFrom;this.doc.iter(gV,this.display.viewTo,function(gX){if(gX.widgets){for(var gY=0;gY<gX.widgets.length;gY++){if(gX.widgets[gY].noHScroll){R(gW,gV,"widget");break}}}++gV});this.curOp.forceUpdate=true;aF(this,"refresh",this)}),operation:function(gS){return cY(this,gS)},refresh:dl(function(){var gS=this.display.cachedTextHeight;ai(this);this.curOp.forceUpdate=true;ak(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);df(this);if(gS==null||Math.abs(gS-aZ(this.display))>0.5){Z(this)}aF(this,"refresh",this)}),swapDoc:dl(function(gT){var gS=this.doc;gS.cm=null;eq(this,gT);ak(this);this.display.input.reset();this.scrollTo(gT.scrollLeft,gT.scrollTop);this.curOp.forceScroll=true;af(this,"swapDoc",this,gS);return gS}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bG(i);i.registerHelper=function(gT,gS,gU){if(!gR.hasOwnProperty(gT)){gR[gT]=i[gT]={_global:[]}}gR[gT][gS]=gU};i.registerGlobalHelper=function(gU,gT,gS,gV){i.registerHelper(gU,gT,gV);gR[gU]._global.push({pred:gS,val:gV})}}function bC(g1,g0,gS,g2,gQ){var gT=g0;var gX=gS;var gW=fD(g1,g0.line);function i(){var g6=g0.line+gS;if(g6<g1.first||g6>=g1.first+g1.size){return false}g0=new W(g6,g0.ch,g0.sticky);return gW=fD(g1,g6)}function gU(g7){var g6;if(gQ){g6=u(g1.cm,gW,g0,gS)}else{g6=aj(gW,g0,gS)}if(g6==null){if(!g7&&i()){g0=eT(gQ,g1.cm,gW,g0.line,gS)}else{return false}}else{g0=g6}return true}if(g2=="char"){gU()}else{if(g2=="column"){gU(true)}else{if(g2=="word"||g2=="group"){var gZ=null,g4=g2=="group";var gR=g1.cm&&g1.cm.getHelper(g0,"wordChars");for(var gV=true;;gV=false){if(gS<0&&!gU(!gV)){break}var g3=gW.text.charAt(g0.ch)||"\n";var gY=cL(g3,gR)?"w":g4&&g3=="\n"?"n":!g4||/\s/.test(g3)?null:"p";if(g4&&!gV&&!gY){gY="s"}if(gZ&&gZ!=gY){if(gS<0){gS=1;gU();g0.sticky="after"}break}if(gY){gZ=gY}if(gS>0&&!gU(!gV)){break}}}}}var g5=b2(g1,g0,gT,gX,true);if(X(gT,g5)){g5.hitSide=true}return g5}function bw(gY,gT,gQ,gX){var gW=gY.doc,gV=gT.left,gU;if(gX=="page"){var gS=Math.min(gY.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var i=Math.max(gS-0.5*aZ(gY.display),3);gU=(gQ>0?gT.bottom:gT.top)+gQ*i}else{if(gX=="line"){gU=gQ>0?gT.bottom+3:gT.top-3}}var gR;for(;;){gR=gi(gY,gV,gU);if(!gR.outside){break}if(gQ<0?gU<=0:gU>=gW.height){gR.hitSide=true;break}gU+=gQ*5}return gR}var dH=function(i){this.cm=i;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new gP();this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null};dH.prototype.init=function(gS){var gU=this;var gR=this,i=gR.cm;var gT=gR.div=gS.lineDiv;gh(gT,i.options.spellcheck);b4(gT,"paste",function(gV){if(aS(i,gV)||bb(gV,i)){return}if(l<=11){setTimeout(dc(i,function(){if(!gR.pollContent()){ai(i)}}),20)}});b4(gT,"compositionstart",function(gV){gU.composing={data:gV.data,done:false}});b4(gT,"compositionupdate",function(gV){if(!gU.composing){gU.composing={data:gV.data,done:false}}});b4(gT,"compositionend",function(gV){if(gU.composing){if(gV.data!=gU.composing.data){gU.readFromDOMSoon()}gU.composing.done=true}});b4(gT,"touchstart",function(){return gR.forceCompositionEnd()});b4(gT,"input",function(){if(!gU.composing){gU.readFromDOMSoon()}});function gQ(gZ){if(aS(i,gZ)){return}if(i.somethingSelected()){dh({lineWise:false,text:i.getSelections()});if(gZ.type=="cut"){i.replaceSelection("",null,"cut")}}else{if(!i.options.lineWiseCopyCut){return}else{var gW=dv(i);dh({lineWise:true,text:gW.text});if(gZ.type=="cut"){i.operation(function(){i.setSelections(gW.ranges,0,aa);i.replaceSelection("",null,"cut")})}}}if(gZ.clipboardData){gZ.clipboardData.clearData();var gY=bn.text.join("\n");gZ.clipboardData.setData("Text",gY);if(gZ.clipboardData.getData("Text")==gY){gZ.preventDefault();return}}var gX=aY(),g0=gX.firstChild;i.display.lineSpace.insertBefore(gX,i.display.lineSpace.firstChild);g0.value=bn.text.join("\n");var gV=document.activeElement;dX(g0);setTimeout(function(){i.display.lineSpace.removeChild(gX);gV.focus();if(gV==gT){gR.showPrimarySelection()}},50)}b4(gT,"copy",gQ);b4(gT,"cut",gQ)};dH.prototype.prepareSelection=function(){var i=f9(this.cm,false);i.focus=this.cm.state.focused;return i};dH.prototype.showSelection=function(gQ,i){if(!gQ||!this.cm.display.view.length){return}if(gQ.focus||i){this.showPrimarySelection()}this.showMultipleSelections(gQ)};dH.prototype.showPrimarySelection=function(){var gT=window.getSelection(),gW=this.cm.doc.sel.primary();var gU=az(this.cm,gT.anchorNode,gT.anchorOffset);var gY=az(this.cm,gT.focusNode,gT.focusOffset);if(gU&&!gU.bad&&gY&&!gY.bad&&co(ar(gU,gY),gW.from())==0&&co(bE(gU,gY),gW.to())==0){return}var gS=cK(this.cm,gW.from());var gX=cK(this.cm,gW.to());if(!gS&&!gX){return}var g0=this.cm.display.view;var gV=gT.rangeCount&&gT.getRangeAt(0);if(!gS){gS={node:g0[0].measure.map[2],offset:0}}else{if(!gX){var gR=g0[g0.length-1].measure;var gQ=gR.maps?gR.maps[gR.maps.length-1]:gR.map;gX={node:gQ[gQ.length-1],offset:gQ[gQ.length-2]-gQ[gQ.length-3]}}}var i;try{i=cw(gS.node,gS.offset,gX.offset,gX.node)}catch(gZ){}if(i){if(!cz&&this.cm.state.focused){gT.collapse(gS.node,gS.offset);if(!i.collapsed){gT.removeAllRanges();gT.addRange(i)}}else{gT.removeAllRanges();gT.addRange(i)}if(gV&&gT.anchorNode==null){gT.addRange(gV)}else{if(cz){this.startGracePeriod()}}}this.rememberSelection()};dH.prototype.startGracePeriod=function(){var i=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){i.gracePeriod=false;if(i.selectionChanged()){i.cm.operation(function(){return i.cm.curOp.selectionChanged=true})}},20)};dH.prototype.showMultipleSelections=function(i){bZ(this.cm.display.cursorDiv,i.cursors);bZ(this.cm.display.selectionDiv,i.selection)};dH.prototype.rememberSelection=function(){var i=window.getSelection();this.lastAnchorNode=i.anchorNode;this.lastAnchorOffset=i.anchorOffset;this.lastFocusNode=i.focusNode;this.lastFocusOffset=i.focusOffset};dH.prototype.selectionInEditor=function(){var gQ=window.getSelection();if(!gQ.rangeCount){return false}var i=gQ.getRangeAt(0).commonAncestorContainer;return gH(this.div,i)};dH.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"){if(!this.selectionInEditor()){this.showSelection(this.prepareSelection(),true)}this.div.focus()}};dH.prototype.blur=function(){this.div.blur()};dH.prototype.getField=function(){return this.div};dH.prototype.supportsTouch=function(){return true};dH.prototype.receivedFocus=function(){var i=this;if(this.selectionInEditor()){this.pollSelection()}else{cY(this.cm,function(){return i.cm.curOp.selectionChanged=true})}function gQ(){if(i.cm.state.focused){i.pollSelection();i.polling.set(i.cm.options.pollInterval,gQ)}}this.polling.set(this.cm.options.pollInterval,gQ)};dH.prototype.selectionChanged=function(){var i=window.getSelection();return i.anchorNode!=this.lastAnchorNode||i.anchorOffset!=this.lastAnchorOffset||i.focusNode!=this.lastFocusNode||i.focusOffset!=this.lastFocusOffset};dH.prototype.pollSelection=function(){if(!this.composing&&this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var gS=window.getSelection(),i=this.cm;this.rememberSelection();var gQ=az(i,gS.anchorNode,gS.anchorOffset);var gR=az(i,gS.focusNode,gS.focusOffset);if(gQ&&gR){cY(i,function(){b1(i.doc,fe(gQ,gR),aa);if(gQ.bad||gR.bad){i.curOp.selectionChanged=true}})}}};dH.prototype.pollContent=function(){if(this.readDOMTimeout!=null){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var gZ=this.cm,g9=gZ.display,g7=gZ.doc.sel.primary();var g8=g7.from(),gT=g7.to();if(g8.ch==0&&g8.line>gZ.firstLine()){g8=W(g8.line-1,fD(gZ.doc,g8.line-1).length)}if(gT.ch==fD(gZ.doc,gT.line).text.length&&gT.line<gZ.lastLine()){gT=W(gT.line+1,0)}if(g8.line<g9.viewFrom||gT.line>g9.viewTo-1){return false}var gW,gU,gY;if(g8.line==g9.viewFrom||(gW=dE(gZ,g8.line))==0){gU=bU(g9.view[0].line);gY=g9.view[0].node}else{gU=bU(g9.view[gW].line);gY=g9.view[gW-1].node.nextSibling}var g6=dE(gZ,gT.line);var g1,g4;if(g6==g9.view.length-1){g1=g9.viewTo-1;g4=g9.lineDiv.lastChild}else{g1=bU(g9.view[g6+1].line)-1;g4=g9.view[g6+1].node.previousSibling}if(!gY){return false}var ha=gZ.doc.splitLines(gv(gZ,gY,g4,gU,g1));var g3=gA(gZ.doc,W(gU,0),W(g1,fD(gZ.doc,g1).text.length));while(ha.length>1&&g3.length>1){if(f6(ha)==f6(g3)){ha.pop();g3.pop();g1--}else{if(ha[0]==g3[0]){ha.shift();g3.shift();gU++}else{break}}}var g5=0,gR=0;var g0=ha[0],gQ=g3[0],i=Math.min(g0.length,gQ.length);while(g5<i&&g0.charCodeAt(g5)==gQ.charCodeAt(g5)){++g5}var gX=f6(ha),hb=f6(g3);var gS=Math.min(gX.length-(ha.length==1?g5:0),hb.length-(g3.length==1?g5:0));while(gR<gS&&gX.charCodeAt(gX.length-gR-1)==hb.charCodeAt(hb.length-gR-1)){++gR}ha[ha.length-1]=gX.slice(0,gX.length-gR).replace(/^\u200b+/,"");ha[0]=ha[0].slice(g5).replace(/\u200b+$/,"");var gV=W(gU,g5);var g2=W(g1,g3.length?f6(g3).length-gR:0);if(ha.length>1||ha[0]||co(gV,g2)){a2(gZ.doc,ha,gV,g2,"+input");return true}};dH.prototype.ensurePolled=function(){this.forceCompositionEnd()};dH.prototype.reset=function(){this.forceCompositionEnd()};dH.prototype.forceCompositionEnd=function(){if(!this.composing){return}clearTimeout(this.readDOMTimeout);this.composing=null;if(!this.pollContent()){ai(this.cm)}this.div.blur();this.div.focus()};dH.prototype.readFromDOMSoon=function(){var i=this;if(this.readDOMTimeout!=null){return}this.readDOMTimeout=setTimeout(function(){i.readDOMTimeout=null;if(i.composing){if(i.composing.done){i.composing=null}else{return}}if(i.cm.isReadOnly()||!i.pollContent()){cY(i.cm,function(){return ai(i.cm)})}},80)};dH.prototype.setUneditable=function(i){i.contentEditable="false"};dH.prototype.onKeyPress=function(i){if(i.charCode==0){return}i.preventDefault();if(!this.cm.isReadOnly()){dc(this.cm,gu)(this.cm,String.fromCharCode(i.charCode==null?i.keyCode:i.charCode),0)}};dH.prototype.readOnlyChanged=function(i){this.div.contentEditable=String(i!="nocursor")};dH.prototype.onContextMenu=function(){};dH.prototype.resetPosition=function(){};dH.prototype.needsContentAttribute=true;function cK(gV,gT){var gU=fA(gV,gT.line);if(!gU||gU.hidden){return null}var gX=fD(gV.doc,gT.line);var gQ=cE(gU,gX,gT.line);var gR=a(gX),gS="left";if(gR){var i=aI(gR,gT.ch);gS=i%2?"right":"left"}var gW=aL(gQ.map,gT.ch,gS);gW.offset=gW.collapse=="right"?gW.end:gW.start;return gW}function eJ(gQ,i){if(i){gQ.bad=true}return gQ}function gv(gX,gV,gW,gS,gQ){var gY="",gR=false,i=gX.doc.lineSeparator();function gT(gZ){return function(g0){return g0.id==gZ}}function gU(g3){if(g3.nodeType==1){var g0=g3.getAttribute("cm-text");if(g0!=null){if(g0==""){gY+=g3.textContent.replace(/\u200b/g,"")}else{gY+=g0}return}var g2=g3.getAttribute("cm-marker"),gZ;if(g2){var g4=gX.findMarks(W(gS,0),W(gQ+1,0),gT(+g2));if(g4.length&&(gZ=g4[0].find())){gY+=gA(gX.doc,gZ.from,gZ.to).join(i)}return}if(g3.getAttribute("contenteditable")=="false"){return}for(var g1=0;g1<g3.childNodes.length;g1++){gU(g3.childNodes[g1])}if(/^(pre|div|p)$/i.test(g3.nodeName)){gR=true}}else{if(g3.nodeType==3){var g5=g3.nodeValue;if(!g5){return}if(gR){gY+=i;gR=false}gY+=g5}}}for(;;){gU(gV);if(gV==gW){break}gV=gV.nextSibling}return gY}function az(gQ,gT,gV){var gU;if(gT==gQ.display.lineDiv){gU=gQ.display.lineDiv.childNodes[gV];if(!gU){return eJ(gQ.clipPos(W(gQ.display.viewTo-1)),true)}gT=null;gV=0}else{for(gU=gT;;gU=gU.parentNode){if(!gU||gU==gQ.display.lineDiv){return null}if(gU.parentNode&&gU.parentNode==gQ.display.lineDiv){break}}}for(var gS=0;gS<gQ.display.view.length;gS++){var gR=gQ.display.view[gS];if(gR.node==gU){return ab(gR,gT,gV)}}}function ab(gY,gU,gW){var gR=gY.text.firstChild,gT=false;if(!gU||!gH(gR,gU)){return eJ(W(bU(gY.line),0),true)}if(gU==gR){gT=true;gU=gR.childNodes[gW];gW=0;if(!gU){var g4=gY.rest?f6(gY.rest):gY.line;return eJ(W(bU(g4),g4.text.length),gT)}}var gV=gU.nodeType==3?gU:null,g2=gU;if(!gV&&gU.childNodes.length==1&&gU.firstChild.nodeType==3){gV=gU.firstChild;if(gW){gW=gV.nodeValue.length}}while(g2.parentNode!=gR){g2=g2.parentNode}var gQ=gY.measure,g0=gQ.maps;function gX(g7,hc,g9){for(var hb=-1;hb<(g0?g0.length:0);hb++){var g6=hb<0?gQ.map:g0[hb];for(var ha=0;ha<g6.length;ha+=3){var g8=g6[ha+2];if(g8==g7||g8==hc){var hd=bU(hb<0?gY.line:gY.rest[hb]);var g5=g6[ha]+g9;if(g9<0||g8!=g7){g5=g6[ha+(g9?1:0)]}return W(hd,g5)}}}}var g3=gX(gV,g2,gW);if(g3){return eJ(g3,gT)}for(var i=g2.nextSibling,gZ=gV?gV.nodeValue.length-gW:0;i;i=i.nextSibling){g3=gX(i,i.firstChild,0);if(g3){return eJ(W(g3.line,g3.ch-gZ),gT)}else{gZ+=i.textContent.length}}for(var g1=g2.previousSibling,gS=gW;g1;g1=g1.previousSibling){g3=gX(g1,g1.firstChild,-1);if(g3){return eJ(W(g3.line,g3.ch+gS),gT)}else{gS+=g1.textContent.length}}}var Y=function(i){this.cm=i;this.prevInput="";this.pollingFast=false;this.polling=new gP();this.inaccurateSelection=false;this.hasSelection=false;this.composing=null};Y.prototype.init=function(gR){var gV=this;var gQ=this,i=this.cm;var gU=this.wrapper=aY();var gS=this.textarea=gU.firstChild;gR.wrapper.insertBefore(gU,gR.wrapper.firstChild);if(fp){gS.style.width="0px"}b4(gS,"input",function(){if(dW&&l>=9&&gV.hasSelection){gV.hasSelection=null}gQ.poll()});b4(gS,"paste",function(gW){if(aS(i,gW)||bb(gW,i)){return}i.state.pasteIncoming=true;gQ.fastPoll()});function gT(gX){if(aS(i,gX)){return}if(i.somethingSelected()){dh({lineWise:false,text:i.getSelections()});if(gQ.inaccurateSelection){gQ.prevInput="";gQ.inaccurateSelection=false;gS.value=bn.text.join("\n");dX(gS)}}else{if(!i.options.lineWiseCopyCut){return}else{var gW=dv(i);dh({lineWise:true,text:gW.text});if(gX.type=="cut"){i.setSelections(gW.ranges,null,aa)}else{gQ.prevInput="";gS.value=gW.text.join("\n");dX(gS)}}}if(gX.type=="cut"){i.state.cutIncoming=true}}b4(gS,"cut",gT);b4(gS,"copy",gT);b4(gR.scroller,"paste",function(gW){if(bc(gR,gW)||aS(i,gW)){return}i.state.pasteIncoming=true;gQ.focus()});b4(gR.lineSpace,"selectstart",function(gW){if(!bc(gR,gW)){cR(gW)}});b4(gS,"compositionstart",function(){var gW=i.getCursor("from");if(gQ.composing){gQ.composing.range.clear()}gQ.composing={start:gW,range:i.markText(gW,i.getCursor("to"),{className:"CodeMirror-composing"})}});b4(gS,"compositionend",function(){if(gQ.composing){gQ.poll();gQ.composing.range.clear();gQ.composing=null}})};Y.prototype.prepareSelection=function(){var gQ=this.cm,gU=gQ.display,gT=gQ.doc;var i=f9(gQ);if(gQ.options.moveInputWithCursor){var gV=d7(gQ,gT.sel.primary().head,"div");var gR=gU.wrapper.getBoundingClientRect(),gS=gU.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(gU.wrapper.clientHeight-10,gV.top+gS.top-gR.top));i.teLeft=Math.max(0,Math.min(gU.wrapper.clientWidth-10,gV.left+gS.left-gR.left))}return i};Y.prototype.showSelection=function(gR){var i=this.cm,gQ=i.display;bZ(gQ.cursorDiv,gR.cursors);bZ(gQ.selectionDiv,gR.selection);if(gR.teTop!=null){this.wrapper.style.top=gR.teTop+"px";this.wrapper.style.left=gR.teLeft+"px"}};Y.prototype.reset=function(gT){if(this.contextMenuPending){return}var gQ,gS,i=this.cm,gV=i.doc;if(i.somethingSelected()){this.prevInput="";var gR=gV.sel.primary();gQ=dm&&(gR.to().line-gR.from().line>100||(gS=i.getSelection()).length>1000);var gU=gQ?"-":gS||i.getSelection();this.textarea.value=gU;if(i.state.focused){dX(this.textarea)}if(dW&&l>=9){this.hasSelection=gU}}else{if(!gT){this.prevInput=this.textarea.value="";if(dW&&l>=9){this.hasSelection=null}}}this.inaccurateSelection=gQ};Y.prototype.getField=function(){return this.textarea};Y.prototype.supportsTouch=function(){return false};Y.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!ev||d0()!=this.textarea)){try{this.textarea.focus()}catch(i){}}};Y.prototype.blur=function(){this.textarea.blur()};Y.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};Y.prototype.receivedFocus=function(){this.slowPoll()};Y.prototype.slowPoll=function(){var i=this;if(this.pollingFast){return}this.polling.set(this.cm.options.pollInterval,function(){i.poll();if(i.cm.state.focused){i.slowPoll()}})};Y.prototype.fastPoll=function(){var gQ=false,i=this;i.pollingFast=true;function gR(){var gS=i.poll();if(!gS&&!gQ){gQ=true;i.polling.set(60,gR)}else{i.pollingFast=false;i.slowPoll()}}i.polling.set(20,gR)};Y.prototype.poll=function(){var gW=this;var i=this.cm,gR=this.textarea,gS=this.prevInput;if(this.contextMenuPending||!i.state.focused||(by(gR)&&!gS&&!this.composing)||i.isReadOnly()||i.options.disableInput||i.state.keySeq){return false}var gU=gR.value;if(gU==gS&&!i.somethingSelected()){return false}if(dW&&l>=9&&this.hasSelection===gU||cf&&/[\uf700-\uf7ff]/.test(gU)){i.display.input.reset();return false}if(i.doc.sel==i.display.selForContextMenu){var gT=gU.charCodeAt(0);if(gT==8203&&!gS){gS="\u200b"}if(gT==8666){this.reset();return this.cm.execCommand("undo")}}var gV=0,gQ=Math.min(gS.length,gU.length);while(gV<gQ&&gS.charCodeAt(gV)==gU.charCodeAt(gV)){++gV}cY(i,function(){gu(i,gU.slice(gV),gS.length-gV,null,gW.composing?"*compose":null);if(gU.length>1000||gU.indexOf("\n")>-1){gR.value=gW.prevInput=""}else{gW.prevInput=gU}if(gW.composing){gW.composing.range.clear();gW.composing.range=i.markText(gW.composing.start,i.getCursor("to"),{className:"CodeMirror-composing"})}});return true};Y.prototype.ensurePolled=function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}};Y.prototype.onKeyPress=function(){if(dW&&l>=9){this.hasSelection=null}this.fastPoll()};Y.prototype.onContextMenu=function(gU){var gZ=this,g0=gZ.cm,gW=g0.display,gQ=gZ.textarea;var gY=cy(g0,gU),i=gW.scroller.scrollTop;if(!gY||eg){return}var gT=g0.options.resetSelectionOnContextMenu;if(gT&&g0.doc.sel.contains(gY)==-1){dc(g0,b1)(g0.doc,fe(gY),aa)}var gV=gQ.style.cssText,g3=gZ.wrapper.style.cssText;gZ.wrapper.style.cssText="position: absolute";var g2=gZ.wrapper.getBoundingClientRect();gQ.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(gU.clientY-g2.top-5)+"px; left: "+(gU.clientX-g2.left-5)+"px;\n      z-index: 1000; background: "+(dW?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var g1;if(db){g1=window.scrollY}gW.input.focus();if(db){window.scrollTo(null,g1)}gW.input.reset();if(!g0.somethingSelected()){gQ.value=gZ.prevInput=" "}gZ.contextMenuPending=true;gW.selForContextMenu=g0.doc.sel;clearTimeout(gW.detectingSelectAll);function gS(){if(gQ.selectionStart!=null){var g4=g0.somethingSelected();var g5="\u200b"+(g4?gQ.value:"");gQ.value="\u21da";gQ.value=g5;gZ.prevInput=g4?"":"\u200b";gQ.selectionStart=1;gQ.selectionEnd=g5.length;gW.selForContextMenu=g0.doc.sel}}function gX(){gZ.contextMenuPending=false;gZ.wrapper.style.cssText=g3;gQ.style.cssText=gV;if(dW&&l<9){gW.scrollbars.setScrollTop(gW.scroller.scrollTop=i)}if(gQ.selectionStart!=null){if(!dW||(dW&&l<9)){gS()}var g4=0,g5=function(){if(gW.selForContextMenu==g0.doc.sel&&gQ.selectionStart==0&&gQ.selectionEnd>0&&gZ.prevInput=="\u200b"){dc(g0,am)(g0)}else{if(g4++<10){gW.detectingSelectAll=setTimeout(g5,500)}else{gW.selForContextMenu=null;gW.input.reset()}}};gW.detectingSelectAll=setTimeout(g5,200)}}if(dW&&l>=9){gS()}if(gG){eI(gU);var gR=function(){eu(window,"mouseup",gR);setTimeout(gX,20)};b4(window,"mouseup",gR)}else{setTimeout(gX,50)}};Y.prototype.readOnlyChanged=function(i){if(!i){this.reset()}};Y.prototype.setUneditable=function(){};Y.prototype.needsContentAttribute=false;function f7(gW,gX){gX=gX?aO(gX):{};gX.value=gW.value;if(!gX.tabindex&&gW.tabIndex){gX.tabindex=gW.tabIndex}if(!gX.placeholder&&gW.placeholder){gX.placeholder=gW.placeholder}if(gX.autofocus==null){var i=d0();gX.autofocus=i==gW||gW.getAttribute("autofocus")!=null&&i==document.body}function gT(){gW.value=gV.getValue()}var gU;if(gW.form){b4(gW.form,"submit",gT);if(!gX.leaveSubmitMethodAlone){var gQ=gW.form;gU=gQ.submit;try{var gS=gQ.submit=function(){gT();gQ.submit=gU;gQ.submit();gQ.submit=gS}}catch(gR){}}}gX.finishInit=function(gY){gY.save=gT;gY.getTextArea=function(){return gW};gY.toTextArea=function(){gY.toTextArea=isNaN;gT();gW.parentNode.removeChild(gY.getWrapperElement());gW.style.display="";if(gW.form){eu(gW.form,"submit",gT);if(typeof gW.form.submit=="function"){gW.form.submit=gU}}}};gW.style.display="none";var gV=G(function(gY){return gW.parentNode.insertBefore(gY,gW.nextSibling)},gX);return gV}function gc(i){i.off=eu;i.on=b4;i.wheelEventPixels=aA;i.Doc=au;i.splitLines=gl;i.countColumn=bY;i.findColumn=eH;i.isWordChar=f3;i.Pass=ck;i.signal=aF;i.Line=gC;i.changeEnd=c8;i.scrollbarModel=bo;i.Pos=W;i.cmpPos=co;i.modes=dF;i.mimeModes=aT;i.resolveMode=gI;i.getMode=fZ;i.modeExtensions=dC;i.extendMode=eY;i.copyState=cb;i.startState=b8;i.innerMode=gE;i.commands=eX;i.keyMap=fz;i.keyName=fO;i.isModifierKey=eU;i.lookupKey=j;i.normalizeKeyMap=cS;i.StringStream=fh;i.SharedTextMarker=x;i.TextMarker=Q;i.LineWidget=dN;i.e_preventDefault=cR;i.e_stopPropagation=dD;i.e_stop=eI;i.addClass=f0;i.contains=gH;i.rmClass=h;i.keyNames=fE}e2(G);d1(G);var d="iter insert remove copy getEditor constructor".split(" ");for(var bR in au.prototype){if(au.prototype.hasOwnProperty(bR)&&dw(d,bR)<0){G.prototype[bR]=(function(i){return function(){return i.apply(this.doc,arguments)}})(au.prototype[bR])}}bG(au);G.inputStyles={textarea:Y,contenteditable:dH};G.defineMode=function(i){if(!G.defaults.mode&&i!="null"){G.defaults.mode=i}eL.apply(this,arguments)};G.defineMIME=br;G.defineMode("null",function(){return({token:function(i){return i.skipToEnd()}})});G.defineMIME("text/plain","null");G.defineExtension=function(i,gQ){G.prototype[i]=gQ};G.defineDocExtension=function(i,gQ){au.prototype[i]=gQ};G.fromTextArea=f7;gc(G);G.version="5.24.2";return G})));