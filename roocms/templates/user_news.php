<?phpclass tpl_items_user_news {//#########################################################//#		Основной шаблон//#########################################################function tpl_page() {$HTML = <<<HTML	<h1>Новости</h1>	<div id="content">		<table border="0" cellpadding="0" cellspacing="0">		<tr>		<td valing="top" style="vertical-align: top;width: 300px;">			<div id="news_category">				{html:category}			</div>		</td>		<td valign="top" style="vertical-align: top;">		<span style="float: right;">{html:rsslink}</span>			{html:content}			{html:navpage}		</td>		</tr>		</table>	&nbsp;	</div>HTML;return $HTML;}//*****************************************************// CSSfunction tpl_css() {$CSS = <<<CSS#brief_news {padding: 10px 0px 10px 0px;border-bottom: 3px dotted #B8AD9A; text-align: justify;}#brief_news .brief_image {border: 1px solid #B8AD9A;margin: 3px 7px 7px 0px;}#news_category {padding-top: 13px;}#news_category li {list-style: none; line-height: 19px; width: 295px;}#news_category li a { color: #373737; text-decoration: underline;}#news_category li.sel, #news_category li:hover { color: #F38833; cursor: pointer; }#news_category li:hover a, #news_category li a:hover { color: #F38833; cursor: pointer; }#news_category li:hover, #news_category li.sel {background: #EDE1CC url('../img/acp/submenu_arrow.png') no-repeat 100% 50%;}#news_category li .items {display: none; color: #B8AD9A; font-size: 11px; padding: 0px 10px 0px 0px;margin: 0px;float: right;}#news_category li:hover .items, #news_category li.sel .items { display: inline; }.unit_image {	border: 1px solid #B8AD9A;	padding: 5px; margin: 1px;	background-color: white;	vertical-align: top;	position: relative;	-moz-border-radius: 4px 4px 4px 4px;  	-webkit-border-radius: 4px 4px 4px 4px;   	border-radius: 4px 4px 4px 4px;}.unit_image:hover {	border: 1px solid #F38833;}CSS;return $CSS;}//*****************************************************// JSfunction tpl_js() {$JS = <<<JSJS;return $JS;}//#########################################################//#		Элементы шаблона//#########################################################//***************************//	{html:content}//	Отрисовка ленты последних новостейfunction last_news($news) {$image = "";if(isset($news['image_news'])) $image .= <<<HTML	<td style="width: 80px;" valign="top">	<a href="{THIS}?news={$news['id']}"><img src="upload/{$news['image_news']}" width="80" height="80" align="left" class="brief_image" alt="{$news['title']}" title="{$news['title']}"></a>	</td>HTML;$HTML = <<<HTML	<div id="brief_news">		<a href="{THIS}?news={$news['id']}" class="black"><font class="title_text">{$news['title']}</font></a>		<table width="100%" border="0" cellpadding="0" cellspacing="0">		 <tr>			{$image}		  <td valign="top">			<font class="date">{$news['rdate']}</font> <a href="news.php?category={$news['category_id']}" class="links">{$news['catname']}</a>			<div id="block_text" class="corner">			{$news['brief_news']}			<br />			<br /><font class="rem">Изображений: {$news['images']} | Файлов: {$news['files']}</font>			</div>		  </td>		 </tr>		</table>		<div align="right">			<a href="{THIS}?news={$news['id']}" class="link">подробнее &raquo;</a>		</div>	</div>HTML;return $HTML;}//***************************//	{html:content}//	Отрисовка ленты новостейfunction news($news) {$image = "";if(isset($news['image_news'])) $image .= <<<HTML	<td style="width: 80px;" valign="top">	<a href="{THIS}?news={$news['id']}"><img src="upload/{$news['image_news']}" width="80" height="80" align="left" class="brief_image" alt="{$news['title']}" title="{$news['title']}"></a>	</td>HTML;$HTML = <<<HTML	<div id="brief_news">		<a href="{THIS}?news={$news['id']}" class="black"><font class="title_text">{$news['title']}</font></a>		<table width="100%" border="0" cellpadding="0" cellspacing="0">		 <tr>			{$image}		  <td valign="top">			<font class="date">{$news['rdate']}</font>			<div id="block_text" class="corner">			{$news['brief_news']}			<br />			<br /><font class="rem">Изображений: {$news['images']} | Файлов: {$news['files']}</font>			</div>		  </td>		 </tr>		</table>		<div align="right">			<a href="{THIS}?news={$news['id']}" class="link">подробнее &raquo;</a>		</div>	</div>HTML;return $HTML;}//***************************//	{html:content}//	Элемент показа подробной новостиfunction news_item($news) {$images = ""; $files = "";if($news['images'] != "") {	$images = <<<HTML				<td width="130" rowspan="2" align="center" valign="top">					<div id="block_text" class="corner" style="margin: 10px 10px 0px 0px;">						<div id="news_images" align="center">							{$news['images']}						</div>							</div>				</td>HTML;}if($news['files'] != "") {	$files = <<<HTML			<tr>				<td align="left" valign="bottom">					<div id="block_text" class="corner">						Файлы: {$news['files']}					</div>				</td>			</tr>HTML;}$HTML = <<<HTML	<div id="brief_news">		<h2>{$news['title']}</h2>		<font class="date">{$news['rdate']}</font>		<a href="{THIS}?category={$news['category_id']}" class="links">{$news['catname']}</a>		<table width="100%" border="0" cellpadding="0" cellspacing="0">			<tr>				{$images}				<td align="left" valign="top">					<div id="block_text" class="corner" style="margin: 10px 0px 0px 0px;">						{$news['full_news']}					</div>				</td>			</tr>			{$files}		</table>				<table width="100%" border="0" cellpadding="0" cellspacing="0">			<tr>			 <td width="50%" align="left" valign="middle">{html:prev_news}</td>			 <td width="50%" align="right" valign="middle">{html:next_news}</td>			</tr>		</table>		<br />				{module:vk_like}{module:google_plusone}		{module:vk_comments}				<div align="right">			<a href="{THIS}?category={$news['category_id']}" class="link">вернуться назад &raquo;</a>		</div>	</div>HTML;return $HTML;}//***************************// 	{html:category}//	Отрисовываем категорииfunction category($category, $sel_cat_id=0) {$f = "ей"; if($category['viewitems'] == 1) $f = "ь"; elseif($category['viewitems'] == 2 OR $category['viewitems'] == 3 OR $category['viewitems'] == 4) $f = "и";if($sel_cat_id != 0 && $sel_cat_id == $category['cat_id']) $class = " class=\"sel\"";else $class="";$HTML = <<<HTML	<li{$class}>		<a href="{THIS}?category={$category['cat_id']}" style="padding-left: {$category['padding']}px">{$category['cat_name']}</a> <font class="items">{$category['viewitems']} новост{$f}</font>	</li>HTML;return $HTML;}//***************************// 	{html:rsslink}//	RSS ссылкаfunction rsslink($link) {$HTML = <<<HTML	<br /><a href="{$link}" class="button" style="vertical-align: middle;text-decoration: none;"><img src="/img/misc/rss.gif" border="0" style="vertical-align: middle;"> <u>RSS 2.0</u> </a>HTML;return $HTML;}//***************************// 	{html:image} -> {$news['images']} //	Элемент отрисовки картинки в подробном просмотре новостейfunction image($image) {$HTML = <<<HTML	<a href="upload/{$image['original_img']}" rel="img"	title="{$image['description']}"><img id="thumb_{$image['id']}" src="upload/{$image['thumb_img']}" class="unit_image" title="{$image['description']}" alt="{$image['description']}"></a>HTML;return $HTML;}//***************************// 	{html:file} -> {$news['files']} //	Элемент отрисовки файла в подробном просмотре новостейfunction file($file) {$HTML = <<<HTML	<br /><img src="/img/icon/16/{$file['icon']}" border="0" width="16" height="16" alt="{$file['description']}" class="img"> <a href="/upload/files/{$file['filename']}">{$file['description']}</a> <font class="rem">({$file['size']})</font>HTML;return $HTML;}//***************************// 	{html:navpage} //	Отрисовка навигации по страницамfunction navpage() {$HTML = <<<HTML	<div id="brief_news">	Страницы: {html:navpage_el}	</div>HTML;return $HTML;}//***************************// 	{html:navpage_el} //	Элмент навигации по страницам (ссылка на страницу)function navpage_el($page, $category) {$topage = ($page != 1) ? "&page=".$page : "" ;$HTML = <<<HTML	<b><a href="{THIS}?category={$category}{$topage}" class="linkb">{$page}</a></b>HTML;return $HTML;}//***************************// 	{html:navpage_el} //	Элмент навигации по страницам (предыдущая)function navpage_prev_el($page, $category) {$topage = ($page != 1) ? "&page=".$page : "" ;$HTML = <<<HTML	<b><a href="{THIS}?category={$category}{$topage}" class="linkb" title="Предыдущая страница">&larr;</a></b>HTML;return $HTML;}//***************************// 	{html:navpage_el} //	Элмент навигации по страницам (следующая)function navpage_next_el($page, $category) {$topage = ($page != 1) ? "&page=".$page : "" ;$HTML = <<<HTML	<b><a href="{THIS}?category={$category}{$topage}" class="linkb" title="Следующая страница">&rarr;</a></b>HTML;return $HTML;}//***************************// 	{html:prev_news} //	Кросслинкинг на предыдущую новостьfunction prev_news($data) {$HTML = <<<HTML	<a href="{THIS}?news={$data['id']}" class="link">&larr; Предыдущая новость</a>	<font class="rem"><br />{$data['title']}</font>HTML;return $HTML;}//***************************// 	{html:next_news} //	Кросслинкинг на следующую новостьfunction next_news($data) {$HTML = <<<HTML	<a href="{THIS}?news={$data['id']}" class="link">Следующая новость &rarr;</a>	<font class="rem"><br />{$data['title']}</font>HTML;return $HTML;}// end class}?>